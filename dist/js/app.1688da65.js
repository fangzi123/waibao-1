(function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],d=0,u=[];d<c.length;d++)o=c[d],n[o]&&u.push(n[o][0]),n[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);h&&h(e);while(u.length)u.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var r=i[o];0!==n[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=i[0]))}return t}var a={},n={app:0},s=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e8de88ed"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(t){var e=[],i=n[t];if(0!==i)if(i)e.push(i[2]);else{var a=new Promise(function(e,a){i=n[t]=[e,a]});e.push(i[2]=a);var s,r=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t),s=function(e){l.onerror=l.onload=null,clearTimeout(d);var i=n[t];if(0!==i){if(i){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+a+": "+s+")");o.type=a,o.request=s,i[1](o)}n[t]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,r.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(i,a,function(e){return t[e]}.bind(null,a));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var h=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var a=i("c21b"),n=i.n(a);n.a},1027:function(t,e,i){"use strict";var a=i("f3ac"),n=i.n(a);n.a},"175f":function(t,e,i){},"34ce":function(t,e,i){"use strict";var a=i("c34d"),n=i.n(a);n.a},"37b0":function(t,e,i){"use strict";i.r(e);i("28a5"),i("a481");var a=function(t){var e=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=e,i}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var a in i)e[a]=i[a]}return e}function e(i){function a(e,n,s){var o;if("undefined"!==typeof document){if(arguments.length>1){if(s=t({path:"/"},a.defaults,s),"number"===typeof s.expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*s.expires),s.expires=c}s.expires=s.expires?s.expires.toUTCString():"";try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(t){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var r="";for(var l in s)s[l]&&(r+="; "+l,!0!==s[l]&&(r+="="+s[l]));return document.cookie=e+"="+n+r}e||(o={});for(var d=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,u=0;u<d.length;u++){var p=d[u].split("="),m=p.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{var f=p[0].replace(h,decodeURIComponent);if(m=i.read?i.read(m,f):i(m,f)||m.replace(h,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(t){}if(e===f){o=m;break}e||(o[f]=m)}catch(t){}}return o}}return a.set=a,a.get=function(t){return a.call(a,t)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(e,i){a(e,"",t(i,{expires:-1}))},a.withConverter=e,a}return e(function(){})});e["default"]={cookie:a}},"3c38":function(t,e,i){"use strict";var a=i("b1c7"),n=i.n(a);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("386d"),i("28a5"),i("cadf"),i("551c"),i("097d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],o=(i("034f"),i("2877")),c={},r=Object(o["a"])(c,n,s,!1,null,null,null);r.options.__file="App.vue";var l=r.exports,d=i("8c4f"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"search_wrapa",on:{click:t.toSearch}},[t._m(0)]),i("div",{staticClass:"list_wrap"},[i("item-list",{attrs:{list:t.items},on:{select:t.onSelects}})],1),i("div",[i("van-actionsheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e()])},u=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{},[i("span",{staticClass:"fontFamily hht-sousuo"}),t._v(" 请输入搜索关键词")])}],p=(i("55dd"),i("ac6a"),i("c5f6"),i("b970")),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"list_wrap"},[i("ul",t._l(t.list,function(e,a){return i("li",{key:a},[i("p",{staticClass:"t machine_name"},[1==e.wxUserDeviceRole?i("span",{staticClass:"fontFamily hht-guanliyuan Administrator"}):t._e(),t._v(t._s(e.name)+"\n          \n          "),i("span",{staticClass:"fontFamily hht-shezhi1 fr",on:{click:function(i){t.set(a,e.top,e.wxUserDeviceId,e.wxUserDeviceRole)}}}),1==e.signalFlag?i("span",{staticClass:"fontFamily  hht-WIFIxinhao-ji3 fr"}):t._e(),2==e.signalFlag?i("span",{staticClass:"fontFamily  hht-WIFIxinhao-ji2 fr"}):t._e(),3==e.signalFlag?i("span",{staticClass:"fontFamily  hht-WIFIxinhao-ji1 fr"}):t._e(),4==e.signalFlag?i("span",{staticClass:"fontFamily  hht-WIFIxinhao-ji fr"}):t._e(),4==e.voltageFlag?i("span",{staticClass:"fontFamily  hht-dianchidianya_ji3 fr"}):3==e.voltageFlag?i("span",{staticClass:"fontFamily  hht-dianchidianya_ji2 fr"}):2==e.voltageFlag?i("span",{staticClass:"fontFamily  hht-dianchidianya_ji1 fr"}):1==e.voltageFlag?i("span",{staticClass:"fontFamily  hht-dianchidianya_ji fr"}):t._e(),0==e.cmdExeStatus?i("span",{staticClass:"fr  fontFamily hht-dengdai",staticStyle:{"font-size":".32rem","margin-right":".2rem"}}):t._e(),1==e.cmdExeStatus?i("span",{staticClass:"fr fontFamily hht-dengdai",staticStyle:{"font-size":".32rem","margin-right":".2rem"}}):t._e(),4==e.cmdExeStatus?i("span",{staticClass:"fr fontFamily hht-dengdai",staticStyle:{"font-size":".32rem  margin-right: .2rem"}}):t._e(),3==e.cmdExeStatus?i("span",{staticClass:"fr fontFamily hht-shibai",staticStyle:{"font-size":".32rem","margin-right":".2rem"}}):t._e(),2==e.cmdExeStatus?i("span",{staticClass:"fr fontFamily hht-chenggong-01",staticStyle:{"font-size":".32rem","margin-right":".2rem"}}):t._e()]),i("p",{staticClass:"wendu p"},[i("span",{staticClass:"fontFamily hht-wendu"},[t._v("温度：")]),i("span",{class:t.returnClass(e.report_parse_temperature,e.temperature_low,e.temperature_high)},[t._v(t._s(e.report_parse_temperature)+"℃")]),1==e.isSeted?i("span",{staticClass:"scope fr "},[t._v("范围："),i("span",{},[t._v(t._s(e.temperature_low)+"-"+t._s(e.temperature_high))])]):t._e()]),i("p",{staticClass:"shidu p "},[i("span",{staticClass:"fontFamily hht-shidu"},[t._v("湿度：")]),i("span",{class:t.returnClass(e.report_parse_humidity,e.humidity_low,e.humidity_high)},[t._v(t._s(e.report_parse_humidity)+" %RH")]),1==e.isSeted?i("span",{staticClass:"scope fr"},[t._v("范围："),i("span",{},[t._v(t._s(e.humidity_low)+"-"+t._s(e.humidity_high))])]):t._e()]),i("p",{staticClass:"info p"},[i("span",[t._v(t._s(t._f("nyr")(e.report_parse_acquisition_time)))]),i("span",[t._v("ID:"+t._s(e.device_id))]),i("span",[t._v(t._s(e.sensor_type))])])])}))]),i("div",[i("van-actionsheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)])},f=[],v=i("bc3a"),g=i.n(v);function _(t,e){return new Promise(function(i,a){console.log(t,"------------url");var n="http://live-smart.com.cn"+t;g.a.get(n,{params:e}).then(function(t){i(t.data)}).catch(function(t){a(t)})})}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,a){var n="http://live-smart.com.cn"+t;g.a.post(n,e).then(function(t){i(t.data)},function(t){a(t)})})}function b(t){if(null!=t){var e=new Date,i=new Date(t),a=e.getTime(),n=i.getTime(),s=(a-n)/1e3;if(s<60)return"刚刚";if(60<s&&s<3600)return Math.floor(s/60)+"分钟前";if(3600<s&&s<86400)return Math.floor(s/3600)+"小时前";if(86400<s){var o=""+(i.getMonth()+1),c=""+i.getDate(),r=i.getFullYear();return o.length<2&&(o="0"+o),c.length<2&&(c="0"+c),e.getFullYear()==i.getFullYear()?[o,c].join("-"):[r,o,c].join("-")}}}function y(t,e,i){var a;return function(){var n=this,s=arguments,o=function(){a=null,i||t.apply(n,s)},c=i&&!a;clearTimeout(a),a=setTimeout(o,e),c&&t.apply(n,s)}}function C(t){if(t){t*=1e3;var e=new Date(t),i=e.getFullYear(),a=l(e.getMonth()+1),n=l(e.getDate()),s=l(e.getHours()),o=l(e.getMinutes()),c=l(e.getSeconds()),r=i+"-"+a+"-"+n+"   "+s+":"+o+":"+c;return r}function l(t){return t<10?"0"+t:t}}function D(t){if(t){var e=new Date(t),i=e.getFullYear(),a=l(e.getMonth()+1),n=l(e.getDate()),s=l(e.getHours()),o=l(e.getMinutes()),c=l(e.getSeconds()),r=i+"-"+a+"-"+n+" "+s+":"+o+":"+c;return r}function l(t){return t<10?"0"+t:t}}function x(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,a=0;a<e.length;a++)if(t.indexOf(e[a])>0){i=!1;break}return i}function I(){var t={},e={jump:function(){console.log("jump")},move:function(){console.log("move")},shoot:function(){console.log("shoot")},squat:function(){console.log("shoot")}},i={changestate:function(){var e=arguments;if(t={},e.length)for(var i=0;i<e.length;i++)t[e[i]]=!0;return this},goes:function(){for(var i in console.log("触发一次动作"),t)e[i]&&e[i]();return this}};return{change:i.changestate,goes:i.goes}}g.a.defaults.timeout=1e4;new I;var T={name:"itemlist",props:{list:{type:Array,default:function(){return[]}}},components:{Loading:p["e"],Actionsheet:p["a"],Toast:p["h"],Dialog:p["d"]},filters:{nyr:C},data:function(){return{selectId:"",show:!1,isFirst:!1,loading:!1,actions:[]}},methods:{returnClass:function(t,e,i){return t>i||t<e?"warn":"normal"},top:function(t){var e=this;console.log(t,"------123"),this.loading=!0,w("/device/setting/software",{wxUserDeviceId:t.wxUserDeviceId,top:t.top?"0":"1"}).then(function(t){1e4==t.code?(e.$emit("select"),console.log(e.$parent)):(e.loading=!1,Object(p["h"])("置顶失败，稍后再试！"))}).catch(function(t){console.log(t,"------------")})},onSelect:function(t){if(this.show=!1,"first"!=t.url)if("delete"!=t.url)if("/wsd/"==t.url){var e=this.list[this.currentIndex],i={path:t.url+""+e.device_id};this.selectId="",this.$router.push(i)}else{var a={path:t.url+""+this.selectId};console.log(a,"--------"),this.selectId="",this.$router.push(a)}else{var n=this.list[this.currentIndex];this.dealer(n)}else if("gotop"==t.type){var s=this.list[this.currentIndex];this.top(s)}else if("cancelgotop"==t.type){var o=this.list[this.currentIndex];this.top(o)}},set:function(t,e,i,a){var n=[];n=[{name:"设备详情",url:"/xq/"},{name:"温度曲线",url:"/wsd/"},{name:"报警设置",url:"/warn/"},{name:"成员列表",url:"/itemlist/"}],"search"!=this.$parent.$el.className&&n.push({name:"置顶/取消置顶",url:"first"}),this.actions=n,"search"!=this.$parent.$el.className&&(1==e?(this.actions[this.actions.length-1].name="取消置顶",this.actions[this.actions.length-1].type="cancelgotop"):(this.actions[this.actions.length-1].name="置顶",this.actions[this.actions.length-1].type="gotop")),this.selectId=i,this.currentIndex=t,this.show=!this.show}},mounted:function(){}},j=T,k=(i("8a5e"),Object(o["a"])(j,m,f,!1,null,"63e96bd4",null));k.options.__file="citemlist.vue";var S=k.exports;i("37b0");var O={name:"home",components:{Loading:p["e"],Actionsheet:p["a"],Toast:p["h"],Dialog:p["d"],ItemList:S},filters:{nyr:C},methods:{onSelects:function(){this.getList()},onSelect:function(t){if(this.show=!1,"first"!=t.url)if("delete"!=t.url)if("/wsd/"==t.url){var e=this.items[this.currentIndex],i={path:t.url+""+e.device_id};this.selectId="",this.$router.push(i)}else{var a={path:t.url+""+this.selectId};this.selectId="",this.$router.push(a)}else{var n=this.items[this.currentIndex];this.dealer(n)}else if("gotop"==t.type){var s=this.items[this.currentIndex];this.top(s)}else if("cancelgotop"==t.type){var o=this.items[this.currentIndex];this.top(o)}},toPercent:function(t){var e=Number(100*t).toFixed(1);return e+="%",e},getList:function(){var t=this,e=Cookies.get("openId");_("/device/list",{openId:e}).then(function(e){1e4==e.code&&(t.loading=!1,t.items=e.data,t.items.forEach(function(t,e){t.probe_type=1==t.probe_type?"内置探头":"外置探头 ",t.report_parse_voltage>3.6?t.powerL=1:t.report_parse_voltage<3.6&&t.report_parse_voltage>3.5?t.powerL=2:t.report_parse_voltage<3.5&&t.report_parse_voltage>3.45?t.powerL=3:t.powerL=4}),t.items.sort(function(t,e){if(void 0!=e.top&&void 0!=t.top)return e.top-t.top}))}).catch(function(t){console.log(t)})},toSearch:function(){var t={path:"/search",query:{id:""}};this.$router.push(t)}},directives:{db:{inserted:function(t,e){t.innerText=e.value}}},data:function(){return{selectId:"",show:!1,isFirst:!1,items:[],loading:!1,actions:[]}},mounted:function(){var t=this;if(console.log("------还是会触发我么？？？？？"),this.loading=!0,Cookies.get("openId"))this.getList();else{var e=window.location.search.split("&")[0].split("=")[1];e?_("/wx/getWebTokenByCode",{code:e}).then(function(e){1e4==e.code&&void 0!=e.data&&""!=e.data.openid&&void 0!=e.data.openid?(t.userInfo=e.data,Cookies("openId",t.userInfo.openid,{expires:new Date((new Date).getTime()+1728e5)}),t.getList()):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=http%3a%2f%2flive-smart.com.cn%2findex.html%23%2f&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}).catch(function(t){console.log(t)}):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=http%3a%2f%2flive-smart.com.cn%2findex.html%23%2f&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}}},F=O,L=(i("34ce"),Object(o["a"])(F,h,u,!1,null,"2ff2e2fe",null));L.options.__file="Home.vue";var H=L.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item_list"},[i("p",{staticClass:"title"}),i("div",{staticClass:"list"},[i("ul",[i("li",{staticClass:"item"},[i("p",{},[i("span",{staticClass:"label"},[t._v("申请者昵称：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t.info.nickname))])]),i("p",{},[i("span",{staticClass:"label"},[t._v("申请时间：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t._f("Dnyr")(t.info.create_time)))])]),i("p",{},[i("span",{staticClass:"label"},[t._v("设备Id：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t.info.device_id))])]),i("p",{},[i("span",{staticClass:"label"},[t._v("设备名称：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t.info.custom_device_name))])]),i("p",{},[i("span",{staticClass:"label"},[t._v("审核时间：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t._f("Dnyr")(t.info.check_time)))])]),i("p",{},[i("span",{staticClass:"label"},[t._v("审核状态：")]),0==t.info.check_status?i("span",{staticClass:"label fr"},[t._v("待审核")]):t._e(),1==t.info.check_status?i("span",{staticClass:"label fr"},[t._v("已批准")]):t._e(),2==t.info.check_status?i("span",{staticClass:"label fr"},[t._v("已拒绝")]):t._e()]),i("p",{},[i("span",{staticClass:"label"},[t._v("审核人：")]),i("span",{staticClass:"label fr"},[t._v(t._s(t.info.checkPersonName))])])])])]),0==t.info.check_status?i("div",{staticClass:"btn_wrap"},[i("van-button",{attrs:{type:"primary",size:"normal",disabled:t.disabledT},on:{click:t.Onallow}},[t._v("允许")]),i("van-button",{attrs:{type:"warning",size:"normal",disabled:t.disabledW},on:{click:t.Onreject}},[t._v("拒绝")])],1):t._e(),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e()])},E=[];i("37b0");var P={name:"cjset",components:{Loading:p["e"],Button:p["b"],Toast:p["h"]},filters:{formatDatePub:b,Dnyr:D},data:function(){return{deviceId:"",loading:!1,info:{},disabledT:!1,disabledW:!1,userInfo:{}}},methods:{Onallow:function(t){var e=this;this.loading=!0,_("/device/checkApproved",{wxUserDeviceId:this.deviceId,openId:this.userInfo.openid}).then(function(t){1e4==t.code?(Object(p["h"])("允许成功"),e.loading=!1,e.disabledT=!0,e.disabledW=!0):(e.loading=!1,Object(p["h"])(t.msg?t.msg:"允许失败"))}).catch(function(t){e.loading=!1,Object(p["h"])("允许失败"),console.log(t)})},Onreject:function(t){var e=this;this.loading=!0,_("/device/checkUnapprove",{wxUserDeviceId:this.deviceId,openId:this.userInfo.openid}).then(function(t){1e4==t.code?(Object(p["h"])("拒绝成功"),e.loading=!1,e.disabledT=!0,e.disabledW=!0):(e.loading=!1,Object(p["h"])(t.msg?t.msg:"拒绝失败"))}).catch(function(t){e.loading=!1,Object(p["h"])("拒绝失败"),console.log(t)})},getData:function(){var t=this;_("/device/checkView",{wxUserDeviceId:this.deviceId,openId:this.userInfo.openid}).then(function(e){1e4==e.code?(t.loading=!1,t.info=e.data):(Object(p["h"])(e.msg?e.msg:"获取数据失败"+JSON.stringify(e.data)),t.loading=!1)}).catch(function(e){t.loading=!1,Object(p["h"])("获取数据失败，catch"),console.log(e)})},checkOpenid:function(){var t=this,e=window.location.search.split("&")[0].split("=")[1];if(e){_("/wx/getWebTokenByCode",{code:e}).then(function(e){if(1e4==e.code&&void 0!=e.data&&""!=e.data.openid&&void 0!=e.data.openid)t.userInfo=e.data,Cookies("openId",t.userInfo.openid,{expires:new Date((new Date).getTime()+1728e5)}),t.getData();else{var i="http://live-smart.com.cn/index.html#/Tpl/"+t.deviceId,a=encodeURIComponent(i),n="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri="+a+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=n,t.loading=!1}}).catch(function(e){console.log(e),t.loading=!1})}else{var i=encodeURIComponent(window.location.href),a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=a}}},mounted:function(){this.deviceId=this.$route.params.id,this.deviceId||setTimeout(function(){window.close()}),console.log(this.$route.params.id),this.checkOpenid(),this.loading=!0}},M=P,q=(i("a9c1"),Object(o["a"])(M,$,E,!1,null,"65349c74",null));q.options.__file="Tpl.vue";var U=q.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cjset"},[i("p",{staticClass:"title"},[t._v("采集上传设置")]),i("div",{staticClass:"btn_wrap"},[i("p",[i("van-button",{attrs:{type:"primary"},on:{click:t.cj}},[t._v("采集间隔设置")]),""!=t.viewCjTime?i("span",{staticClass:"fr"},[t._v(t._s(t.viewCjTime))]):t._e()],1),i("p",[i("van-button",{attrs:{type:"primary"},on:{click:t.sb}},[t._v("上报间隔设置")]),""!=t.viewSbTime?i("span",{staticClass:"fr"},[t._v(t._s(t.viewSbTime))]):t._e()],1),i("p",[i("van-button",{attrs:{type:"primary"}},[t._v("确认")])],1)]),i("div",[i("van-actionsheet",{attrs:{actions:t.mod},on:{select:t.oncj},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),i("van-actionsheet",{attrs:{actions:t.modTow},on:{select:t.onsb},model:{value:t.showTow,callback:function(e){t.showTow=e},expression:"showTow"}})],1),i("div",{staticClass:"dialog"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose,title:"自定义采集间隔"},on:{confirm:t.onConfirm},model:{value:t.showdialog,callback:function(e){t.showdialog=e},expression:"showdialog"}},[i("van-field",{attrs:{label:"分钟",type:"number",placeholder:"请输入1-60",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:t.cjtime,callback:function(e){t.cjtime=e},expression:"cjtime"}})],1)],1),i("div",{staticClass:"dialog"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseTow,title:"自定义上报间隔"},on:{confirm:t.onConfirm},model:{value:t.showdialogTow,callback:function(e){t.showdialogTow=e},expression:"showdialogTow"}},[i("van-field",{attrs:{label:"分钟",type:"number",placeholder:"请输入10-60",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:t.sbTimeM,callback:function(e){t.sbTimeM=e},expression:"sbTimeM"}})],1)],1),i("div",{staticClass:"dialog"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseThree,title:"自定义上报间隔"},on:{confirm:t.onConfirm},model:{value:t.showdialogThree,callback:function(e){t.showdialogThree=e},expression:"showdialogThree"}},[i("van-field",{attrs:{label:"小时",type:"number",placeholder:"请输入1-24",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:t.sbTimeH,callback:function(e){t.sbTimeH=e},expression:"sbTimeH"}})],1)],1)])},z=[],N=(i("a481"),i("7f7f"),{name:"cjset",components:{Button:p["b"],Actionsheet:p["a"],Dialog:p["d"],Toast:p["h"]},methods:{cj:function(){this.show=!0},oncj:function(t){this.show=!1,"自定义"==t.name?this.custom():(this.viewCjTime=t.name,this.viewCjTimeVal=t.val),console.log(t)},custom:function(){this.showdialog=!0},beforeClose:function(t,e){if("confirm"===t){var i=/0\d/,a=this.cjtime.replace(/^\s+|\s+$/gm,"");if(""==this.cjtime||"00"==this.cjtime||i.test(a))return p["h"].fail("请输入正确的时间"),void e(!1);this.viewCjTime=this.cjtime+"分钟",this.cjtime="",setTimeout(e,1e3)}else e()},onConfirm:function(){},sb:function(){this.showTow=!0},onsb:function(t){this.showTow=!1,"自定义分钟"==t.name?this.showdialogTow=!0:"自定义小时"==t.name?this.showdialogThree=!0:(this.viewSbTime=t.name,this.viewSbTimeVal=t.val)},customTow:function(){},beforeCloseTow:function(t,e){if("confirm"===t){var i=/0\d/,a=this.sbTimeM.replace(/^\s+|\s+$/gm,"");if(""==this.sbTimeM||"00"==this.sbTimeM||i.test(a)||a>60)return p["h"].fail("请输入正确的时间"),void e(!1);this.viewSbTime=this.sbTimeM+"分钟",this.sbTimeM="",setTimeout(e,1e3)}else e()},beforeCloseThree:function(t,e){if("confirm"===t){var i=/0\d/,a=this.sbTimeH.replace(/^\s+|\s+$/gm,"");if(""==this.sbTimeH||"00"==this.sbTimeH||i.test(a)||a>24)return p["h"].fail("请输入正确的时间"),void e(!1);this.viewSbTime=this.sbTimeH+"小时",this.sbTimeH="",setTimeout(e,1e3)}else e()}},data:function(){return{show:!1,showTow:!1,showdialog:!1,showdialogTow:!1,showdialogThree:!1,cjtime:"",viewCjTime:"",viewCjTimeVal:"",sbTimeM:"",sbTimeH:"",viewSbTime:"",modTow:[{name:"10分钟",val:600},{name:"30分钟",val:1800},{name:"1小时",className:"aa",val:3600},{name:"12小时",val:43200},{name:"自定义分钟"},{name:"自定义小时"}],mod:[{name:"1分钟",val:1},{name:"5分钟",val:5},{name:"10分钟",className:"aa",val:10},{name:"自定义"}]}},mounted:function(){}}),B=N,W=(i("1027"),Object(o["a"])(B,A,z,!1,null,"288986f9",null));W.options.__file="cjset.vue";var Y=W.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"details"},[i("ul",{staticClass:"wrap"},[i("li",{staticClass:"li"},[i("span",[t._v("设备ID：")]),i("span",{staticClass:"fr"},[t._v(t._s(t.info.device_id))])]),i("li",{staticClass:"li",on:{click:t.edit}},[i("span",[t._v("设备名称：")]),i("span",{staticClass:"fr h80"},[t._v(t._s(t.info.name)+" "),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])]),i("li",{staticClass:"li"},[i("span",[t._v("MAC地址：")]),i("span",{staticClass:"fr"},[t._v(t._s(t.info.mac_address))])]),i("li",{staticClass:"li"},[i("span",[t._v("固件版本：")]),i("span",{staticClass:"fr"},[t._v(t._s(t.info.report_parse_version))])]),i("li",{staticClass:"li"},[i("span",[t._v("设备类型：")]),i("span",{staticClass:"fr"},[t._v(t._s(t.info.report_parse_version_high))])]),i("li",{staticClass:"li",on:{click:t.qrcode}},[i("span",[t._v("二维码：")]),i("span",{staticClass:"fr fontFamily hht-QRcode"})]),i("li",{staticClass:"li",on:{click:t.deleteSb}},[i("span",[t._v("删除设备：")]),i("span",{staticClass:"fr fontFamily hht-shanchu"})])]),i("div",{staticClass:"dialog"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose,title:"修改设备名称"},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-field",{attrs:{label:"新名称：",placeholder:"请输入要修改的名称"},model:{value:t.editname,callback:function(e){t.editname=e},expression:"editname"}})],1)],1),i("transition",{attrs:{name:"fade"}},[t.qcshow?i("div",{staticClass:"qc",on:{click:t.hideqe}},[i("div",{staticClass:"img_wrap"},[i("img",{attrs:{src:t.info.qr_code,alt:""}})])]):t._e()]),i("div",{staticStyle:{display:"none"}},[i("img",{attrs:{src:t.info.qr_code,alt:""}})]),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e()],1)},V=[],J={name:"xq",components:{Dialog:p["d"]},methods:{deleteSb:function(){var t=this;p["d"].confirm({title:"确定删除?",message:"删除后将不在展示该设备"}).then(function(){t.loading=!0,_("/device/deleleDevice",{wxUserDeviceId:t.deviceId}).then(function(e){1e4==e.code?(t.loading=!1,Object(p["h"])("老板，再见..."),t.$router.back()):(t.loading=!1,Object(p["h"])("哈哈，没珊掉我.."))}).catch(function(e){t.loading=!1,Object(p["h"])("哈哈，没珊掉我.."),console.log(e)})}).catch(function(){Object(p["h"])("谢手下留情...")})},edit:function(){this.show=!0},beforeClose:function(t,e){console.log("----------"),"confirm"==t?this.editorName(e):(this.editname="",e())},onConfirm:function(){},qrcode:function(){this.qcshow=!0},hideqe:function(){this.qcshow=!1},getData:function(){var t=this;_("/device/view",{wxUserDeviceId:this.deviceId}).then(function(e){1e4==e.code&&(t.info=e.data)}).catch(function(t){console.log(t)})},editorName:function(t){var e=this,i=t||function(){};""!=this.editname?w("/device/update",{name:this.editname,deviceId:this.info.device_id}).then(function(t){e.info.name=e.editname,e.editname="",i()}).catch(function(t){console.log(t,"------------")}):i(!1)}},data:function(){return{params:this.$route.params,show:!1,currentname:"当前设备名称",editname:"",qcshow:!1,info:{},loading:!1}},mounted:function(){this.deviceId=this.params.id,this.getData(),console.log(this.params.id,"-----------params")}},Z=J,K=(i("b82a"),Object(o["a"])(Z,R,V,!1,null,"1b47c4ad",null));K.options.__file="details.vue";var Q=K.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item_list"},[i("p",{staticClass:"title"},[t._v("成员列表")]),i("div",{staticClass:"list"},[i("ul",t._l(t.items,function(e,a){return i("li",{key:a,staticClass:"item"},[i("p",{},[i("img",{staticClass:"label cov",staticStyle:{"margin-right":"5px"},attrs:{src:e.member_headimgurl,alt:""}}),i("span",{staticClass:"label"},[t._v(t._s(e.member_nickname))]),2==e.type&&t.admin===t.openId?i("span",{staticClass:"fontFamily hht-shezhi1 label fr",on:{click:function(i){t.edit(e)}}}):1==e.type?i("span",{staticClass:"fontFamily hht-guanliyuan Administrator label fr"}):t._e()]),i("p",{},[i("span",{staticClass:"label"},[t._v("审核状态：")]),i("span",{staticClass:"label fr"},[t._v(t._s(1==e.member_checkStatus?"审核通过":"待审核"))])])])})),2==t.loadState?i("p",{staticClass:"hint"},[t._v("加载中...")]):t._e(),1==t.loadState?i("p",{staticClass:"hint",on:{click:t.loadMore}},[t._v("点击加载更多")]):t._e(),3==t.loadState?i("p",{staticClass:"hint"},[t._v("没有更多")]):t._e(),4==t.loadState?i("p",{staticClass:"hint",on:{click:t.reload}},[t._v("加载失败，点击重新加载")]):t._e()]),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e(),i("div",{staticClass:"actionsheet"},[i("van-actionsheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)])},X=[];i("37b0");var tt={name:"cjset",components:{Loading:p["e"],Actionsheet:p["a"],Toast:p["h"]},data:function(){return{deviceId:"",loading:!0,items:[],show:!1,actions:[],loadState:0,pageNum:1,pageSize:10,openId:Cookies.get("openId")?Cookies.get("openId"):"",editData:{},admin:""}},methods:{onSelect:function(t){this.show=!1,this.openId&&("delete"==t.type?(this.loading=!0,this.delete()):"move"==t.type?(this.loading=!0,this.move()):"allow"==t.type?(this.loading=!0,this.allow()):"reject"==t.type&&(this.loading=!0,this.reject()))},reload:function(){this.getData()},delete:function(){var t=this;_("/device/memberDelete",{member_wxUserDeviceId:this.editData.member_wxUserDeviceId,openId:this.openId}).then(function(e){if(1e4==e.code){Object(p["h"])("删除成功");for(var i=t.editData.member_wxUserDeviceId,a=t.items,n=0;n<a.length;n++)if(a[n].member_wxUserDeviceId==i){a.splice(n,1);break}t.loading=!1,t.items=a}else Object(p["h"])("删除失败"),t.loading=!1}).catch(function(e){t.loading=!1,Object(p["h"])("删除失败"),console.log(e)})},move:function(t){var e=this;_("/device/adminTransfer",{deviceId:this.editData.member_deviceId,fromOpenId:this.openId,toOpenId:this.editData.member_openId}).then(function(t){1e4==t.code?(e.loading=!1,Object(p["h"])("转移成功"),e.loading=!1,e.pageNum=1,e.getData(),e.items=[]):(Object(p["h"])("转移失败"),e.loading=!1)}).catch(function(t){Object(p["h"])("转移失败"),e.loading=!1,console.log(t)})},allow:function(){var t=this;_("/device/checkApproved",{wxUserDeviceId:this.editData.member_wxUserDeviceId}).then(function(e){if(1e4==e.code){t.loading=!1,Object(p["h"])("审核成功"),t.loading=!1;var i=t.editData.member_wxUserDeviceId;t.items.forEach(function(t,e){t.member_wxUserDeviceId==i&&(t.member_checkStatus=1)})}else Object(p["h"])("审核失败"),t.loading=!1}).catch(function(e){Object(p["h"])("审核失败"),t.loading=!1})},reject:function(){var t=this;_("/device/checkUnapprove",{wxUserDeviceId:this.editData.member_wxUserDeviceId}).then(function(e){1e4==e.code?(t.loading=!1,Object(p["h"])("驳回成功"),t.loading=!1,t.pageNum=1,t.getData(),t.items=[]):(Object(p["h"])("驳回失败"),t.loading=!1)}).catch(function(e){Object(p["h"])("驳回失败"),t.loading=!1})},loadMore:function(){this.loading=!0;var t=this.pageNum;t++,this.pageNum=t,this.loadState=2,this.getData()},getData:function(){var t=this;_("/device/memberList",{wxUserDeviceId:this.deviceId,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){1e4==e.code?(t.loading=!1,1==t.pageNum&&(t.admin=e.data.list[0].member_openId),t.items=t.items.concat(e.data.list),t.loadState=t.pageNum*t.pageSize>=e.data.total?3:1):3e4==e.code&&t.$router.go(-1)}).catch(function(e){t.loadState=4,t.loading=!1,t.$router.go(-1),console.log(e)})},edit:function(t){console.log(t);var e=[];1==t.member_checkStatus?e=[{name:"删除",type:"delete"},{name:"转让",type:"move"}]:0==t.member_checkStatus&&(e=[{name:"删除",type:"delete"},{name:"批准",type:"allow"},{name:"驳回",type:"reject"}]),this.actions=e,console.log(e,"---------------------"),this.editData=t,this.show=!0}},mounted:function(){this.deviceId=this.$route.params.id,this.getData()}},et=tt,it=(i("eea7"),Object(o["a"])(et,G,X,!1,null,"20983d2c",null));it.options.__file="itemlist.vue";var at=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warn"},[i("p",{staticClass:"title"},[t._v("数据设置")]),i("ul",[i("li",[i("span",[t._v("报警开关")]),i("span",{staticClass:"fr mar"},[i("van-switch",{attrs:{value:t.checked,size:"24px"},on:{input:t.onInput}})],1)]),i("li",[i("span",[t._v("报警间隔 ")]),i("span",{staticClass:"fr",on:{click:t.alarmEdit}},[t._v(t._s(t._f("formattingType")(t.info.alarm_interval))+" "),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])]),i("li",[i("span",[t._v("采集间隔 ")]),i("span",{staticClass:"fr",on:{click:t.cjEdit}},[t._v(t._s(t._f("formattingType")(t.info.sampling_interval))+" "),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])]),i("li",[i("span",[t._v("上报间隔 ")]),i("span",{staticClass:"fr",on:{click:t.updateEedit}},[t._v(t._s(t._f("formattingType")(t.info.upload_interval))+" "),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])]),i("li",{staticClass:"setmod"},[i("span",[t._v("正常温度范围℃")]),i("span",{staticClass:"fr ",on:{click:t.modificationWenDu}},[i("span",[t._v(t._s(t.info.temperature_low)+"℃ ")]),t._v(" ~ "),i("span",[t._v(t._s(t.info.temperature_high)+"℃"),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])])]),i("li",[i("span",[t._v("正常湿度范围")]),i("span",{staticClass:"fr ",on:{click:t.modificationSD}},[i("span",[t._v(t._s(t.info.humidity_low)+"%RH")]),t._v(" ~ "),i("span",[t._v(t._s(t.info.humidity_high)+"%RH"),i("span",{staticClass:"fontFamily hht-xiugai-copy aling"})])])])]),i("div",[i("van-actionsheet",{attrs:{actions:t.mod},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e(),i("div",{staticClass:"dialog_wd"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.WDbeforeClose},model:{value:t.wdDialogShow,callback:function(e){t.wdDialogShow=e},expression:"wdDialogShow"}},[i("van-field",{attrs:{label:"温度下线",placeholder:"请输入两位小数"},model:{value:t.temperatureLow,callback:function(e){t.temperatureLow=e},expression:"temperatureLow"}}),i("van-field",{attrs:{label:"温度上线",placeholder:"请输入两位小数"},model:{value:t.temperatureHigh,callback:function(e){t.temperatureHigh=e},expression:"temperatureHigh"}})],1)],1),i("div",{staticClass:"dialog_sd"},[i("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.SDbeforeClose},model:{value:t.sdDialogShow,callback:function(e){t.sdDialogShow=e},expression:"sdDialogShow"}},[i("van-field",{attrs:{label:"湿度下线",placeholder:"请输入两位小数"},model:{value:t.humidityLow,callback:function(e){t.humidityLow=e},expression:"humidityLow"}}),i("van-field",{attrs:{label:"湿度上线",placeholder:"请输入两位小数"},model:{value:t.humidityHigh,callback:function(e){t.humidityHigh=e},expression:"humidityHigh"}})],1)],1)])},st=[],ot={name:"warn",components:{Switch:p["g"],Dialog:p["d"],Loading:p["e"],Toast:p["h"],Actionsheet:p["a"]},filters:{formattingType:function(t){if("number"!=typeof t)return t;switch(t){case 3600:return"1小时";case 1800:return"30分钟";case 300:return"5分钟";case 60:return"1分钟";case 600:return"10分钟";case 21600:return"6个小时";case 43200:return"12个小时";case 86400:return"24个小时"}}},methods:{onInput:function(t){var e=this;p["d"].confirm({title:"提醒",message:"是否切换开关？"}).then(function(){e.loading=!0,e.switchBtn()}).catch(function(t){console.log(t)})},switchBtn:function(){var t=this;w("/device/setting/software",{wxUserDeviceId:this.deviceId,alarmSwitch:!this.checked}).then(function(e){1e4==e.code?(t.checked=!t.checked,t.loading=!1):(t.loading=!1,Object(p["h"])("切换失败，稍后再试！"))}).catch(function(e){t.loading=!1,Object(p["h"])("切换失败，稍后再试！")})},onSelect:function(t){console.log(t);var e=this;if("cj"==t.type){console.log("采集"),this.loading=!0,this.samplingInterval=t.val;var i=function(){e.show=!1,e.loading=!1,e.info.sampling_interval=t.val,e.samplingInterval=""};this.submitParam(i)}else if("bj"==t.type){console.log("报警"),this.loading=!0,this.alarmInterval=t.val;var a=function(){e.show=!1,e.loading=!1,e.info.alarm_interval=t.val,e.alarmInterval=""};this.submitParam(a)}else if("sb"==t.type){console.log("上报"),this.loading=!0,this.uploadInterval=t.val;var n=function(){e.show=!1,e.loading=!1,e.info.upload_interval=t.val,e.uploadInterval=""};this.submitParam(n)}},edit:function(){this.show=!0},setModelVal:function(){this.temperatureHigh=this.info.temperature_high,this.temperatureLow=this.info.temperature_low,this.humidityHigh=this.info.humidity_high,this.humidityLow=this.info.humidity_low},modificationWenDu:function(){this.wdDialogShow=!0,this.setModelVal()},checkoutWD:function(t){if(""===this.temperatureLow)return console.log(this.temperatureLow,"----"),Object(p["h"])("温度下限不能为空"),void t(!1);if(""===this.temperatureHigh)return Object(p["h"])("温度上限不能为空"),void t(!1);if(!this.isNumber(this.temperatureLow))return Object(p["h"])("请输入正确的温度下线"),void t(!1);if(!this.isNumber(this.temperatureHigh))return Object(p["h"])("请输入正确的温度上线"),void t(!1);if(this.temperatureHigh=this.toFixedTow(this.temperatureHigh),this.temperatureLow=this.toFixedTow(this.temperatureLow),this.temperatureHigh=parseFloat(this.temperatureHigh),this.temperatureLow=parseFloat(this.temperatureLow),this.temperatureLow<-655.36)return Object(p["h"])("下线不能小于-655.36"),void t(!1);if(this.temperatureHigh>655.35)return Object(p["h"])("上线不能大于655.35"),void t(!1);if(this.temperatureHigh<this.temperatureLow)return console.log(this.temperatureHigh,"------------",this.temperatureLow),Object(p["h"])("下线不能大于上线"),void t(!1);if(this.temperatureHigh===this.temperatureLow)return console.log(this.temperatureHigh,"------------",this.temperatureLow),Object(p["h"])("下线不能等于上线"),void t(!1);if(console.log(this.temperatureHigh,"------",this.info.temperature_high,"校验合格",this.temperatureLow,"-----",this.info.temperature_low),this.temperatureHigh==this.info.temperature_high&&this.temperatureLow==this.info.temperature_low)return Object(p["h"])("与当前值一致,不能提交..."),void t(!1);var e=this,i=function(){e.info.temperature_low=e.temperatureLow,e.info.temperature_high=e.temperatureHigh,e.temperatureLow=e.temperatureLow,e.temperatureHigh=e.temperatureHigh};this.submitParam(t,i)},toFixedTow:function(t){var e=/([0-9]+.[0-9]{2})[0-9]*/;return t=(t+"").replace(e,"$1"),t},checkoutSD:function(t){if(""===this.humidityLow)return Object(p["h"])("湿度下限不能为空"),void t(!1);if(""===this.humidityHigh)return Object(p["h"])("湿度上限不能为空"),void t(!1);if(!this.isNumber(this.humidityLow))return Object(p["h"])("请输入正确的湿度下线"),void t(!1);if(!this.isNumber(this.humidityHigh))return Object(p["h"])("请输入正确的湿度上线"),void t(!1);if(this.humidityLow=this.toFixedTow(this.humidityLow),this.humidityHigh=this.toFixedTow(this.humidityHigh),this.humidityLow=parseFloat(this.humidityLow),this.humidityHigh=parseFloat(this.humidityHigh),this.humidityLow<0)return Object(p["h"])("下线不能小于0"),void t(!1);if(this.humidityHigh>100)return Object(p["h"])("上线不能大于100"),void t(!1);if(this.humidityHigh<this.humidityLow)return console.log(this.humidityHigh,"------范围------",this.humidityLow),Object(p["h"])("下线不能大于上线"),void t(!1);if(this.humidityHigh===this.humidityLow)return console.log(this.humidityHigh,"------范围------",this.humidityLow),Object(p["h"])("下线不能等于上线"),void t(!1);if(console.log(this.humidityHigh,"-----",this.info.humidity_high,"校验合格",this.humidityLow,"----",this.info.humidity_low),this.humidityHigh==this.info.humidity_high&&this.humidityLow==this.info.humidity_low)return Object(p["h"])("与当前值一致,不能提交..."),void t(!1);var e=this,i=function(){e.info.humidity_low=e.humidityLow,e.info.humidity_high=e.humidityHigh,e.humidityLow=e.humidityLow,e.humidityHigh=e.humidityHigh};this.submitParam(t,i)},WDbeforeClose:function(t,e){"confirm"==t?this.checkoutWD(e):e()},SDbeforeClose:function(t,e){"confirm"==t?this.checkoutSD(e):e()},unInfo:function(t){},submitParam:function(t,e){var i=this,a=t||function(){},n=e||function(){},s={deviceId:this.info.device_id,openId:Cookies.get("openId"),samplingInterval:this.samplingInterval,uploadInterval:this.uploadInterval,alarmInterval:this.alarmInterval,temperatureHigh:this.temperatureHigh,temperatureLow:this.temperatureLow,humidityHigh:this.humidityHigh,humidityLow:this.humidityLow};console.log(s),w("/device/setting/hardware",s).then(function(t){1e4==t.code?(a&&a(),n&&n(),Object(p["h"])("修改成功！"),i.loading=!1):(Object(p["h"])("修改失败，稍后再试！"),i.loading=!1)}).catch(function(t){console.log(t,"-----------------"),i.loading=!1,Object(p["h"])("修改失败，稍后再试！")})},modificationSD:function(){this.sdDialogShow=!0,this.setModelVal()},isNumber:function(t){var e=/^\d+(\.\d+)?$/,i=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!e.test(t)&&!i.test(t))},getData:function(){var t=this;_("/device/view",{wxUserDeviceId:this.deviceId}).then(function(e){1e4==e.code&&(t.info=e.data,t.temperatureHigh=e.data.temperature_high,t.temperatureLow=e.data.temperature_low,t.humidityHigh=e.data.humidity_high,t.humidityLow=e.data.humidity_low,t.checked=e.data.alarm_switch,t.loading=!1)}).catch(function(t){console.log(t)})},alarmEdit:function(){var t=[{name:"30分钟",val:1800,type:"bj"},{name:"1小时",val:3600,type:"bj"},{name:"6小时",val:21600,type:"bj"},{name:"12小时",val:43200,type:"bj"},{name:"24小时",val:86400,type:"bj"}];this.mod=t,this.show=!0},updateEedit:function(){var t=[{name:"10分钟",val:600,type:"sb"},{name:"30分钟",val:1800,type:"sb"},{name:"1小时",val:3600,type:"sb"},{name:"12小时",val:43200,type:"sb"}];this.mod=t,this.show=!0},cjEdit:function(){var t=[{name:"1分钟",val:60,type:"cj"},{name:"5分钟",val:300,type:"cj"},{name:"10分钟",val:600,type:"cj"},{name:"1小时",val:3600,type:"cj"}];this.mod=t,this.show=!0}},data:function(){return{checked:!1,show:!1,deviceId:"",info:{},loading:!1,samplingInterval:"",uploadInterval:"",alarmInterval:"",temperatureHigh:"",temperatureLow:"",humidityHigh:"",humidityLow:"",wdDialogShow:!1,sdDialogShow:!1,mod:[]}},mounted:function(){console.log(this.$route.params,"-----------params"),this.deviceId=this.$route.params.id,this.getData(),this.loading=!0}},ct=ot,rt=(i("e9c7"),Object(o["a"])(ct,nt,st,!1,null,"79e3302f",null));rt.options.__file="warn.vue";var lt=rt.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wsd"},[i("div",{staticClass:"btn_wrap"},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"btn ",class:1==t.currentTab?"active":"",on:{click:function(e){t.cut(1)}}},[t._v("今天")]),i("div",{staticClass:"btn",class:2==t.currentTab?"active":"",on:{click:function(e){t.cut(2)}}},[t._v("昨天")]),i("div",{staticClass:"btn",class:3==t.currentTab?"active":"",on:{click:function(e){t.cut(3)}}},[t._v("前天")]),i("div",{staticClass:"btn",class:4==t.currentTab?"active":"",on:{click:function(e){t.cut(4)}}},[t._v("本周")]),i("div",{staticClass:"btn",class:5==t.currentTab?"active":"",on:{click:function(e){t.cut(5)}}},[t._v("本月")]),i("div",{staticClass:"btn",class:6==t.currentTab?"active":"",on:{click:function(e){t.cut(6)}}},[t._v("本年")])])]),t._m(0),t._m(1),t._m(2),i("div",{staticClass:"date_wrap",class:t.datePicker?"bottom_show":"bottom_false"},[i("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.currentDateT},on:{confirm:t.Onconfirm,cancel:t.Oncancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e(),i("transition",{attrs:{name:"fade"}},[t.datePicker?i("div",{staticClass:"mark",on:{click:t.hideDatePicker}}):t._e()])],1)},ht=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"sd mod",attrs:{id:"sd"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"wd mod",attrs:{id:"wd"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"power mod",attrs:{id:"power"}})])}],ut=(i("3b2b"),{name:"wsd",components:{Button:p["b"],Loading:p["e"],Toast:p["h"]},computed:{classObject:function(){}},methods:{Onconfirm:function(t){var e=new Date(t),i=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()).getTime();i/=1e3,console.log(i),this.selectDate=i,this.getdatas()},cut:function(t){if(this.currentTab=t,1==t){var e=new Date,i=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()).getTime();if(i/=1e3,this.data&&this.data.date==i)return}if(2==t){var a=new Date,n=new Date(a.getFullYear()+"/"+(a.getMonth()+1)+"/"+(a.getDate()-1)).getTime();if(n/=1e3,this.data&&this.data.date==n)return}if(3==t){var s=new Date,o=new Date(s.getFullYear()+"/"+(s.getMonth()+1)+"/"+(s.getDate()-2)).getTime();if(o/=1e3,this.data&&this.data.date==o)return}if(4==t){var c="1";if(this.data&&this.data.date==c)return}if(5==t){var r="2";if(this.data&&this.data.date==r)return}if(6==t){var l="3";if(this.data&&this.data.date==l)return}if(1==t){var d=new Date,h=new Date(d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()).getTime();h/=1e3,this.selectDate=h,this.getdatas()}else if(2==t){var u=new Date,p=new Date(u.getFullYear()+"/"+(u.getMonth()+1)+"/"+(u.getDate()-1)).getTime();p/=1e3,this.selectDate=p,this.getdatas()}else if(3==t){var m=new Date,f=new Date(m.getFullYear()+"/"+(m.getMonth()+1)+"/"+(m.getDate()-2)).getTime();f/=1e3,this.selectDate=f,this.getdatas()}else 4==t?(this.selectDate="1",this.getdatas()):5==t?(this.selectDate="2",this.getdatas()):6==t&&(this.selectDate="3",this.getdatas())},Oncancel:function(){this.datePicker=!1},onElse:function(){this.datePicker=!0},onToday:function(){var t=new Date,e=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()).getTime();e/=1e3,this.selectDate=e,this.getdatas()},onYesterday:function(){var t=new Date,e=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+(t.getDate()-1)).getTime();e/=1e3,this.selectDate=e,this.getdatas()},hideDatePicker:function(){this.datePicker=!1},init:function(){var t=new Date,e=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()).getTime();e/=1e3,this.selectDate=e,this.getdatas()},getDataDate:function(){var t=new Date(1e3*this.data.date),e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return e},drawLine:function(){var t=this,e=this.$echarts.init(document.getElementById("wd")),i=this.$echarts.init(document.getElementById("sd")),a=this.$echarts.init(document.getElementById("power")),n={title:{text:"湿度曲线",subtext:"",x:"center"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"category",data:t.d1},yAxis:{type:"value"},series:[{data:t.d2,type:"line"}],dataZoom:[{},{type:"inside"}]},s={title:{text:"温度曲线",subtext:"",x:"center"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"category",data:t.d1},yAxis:{type:"value"},series:[{data:t.d3,type:"line"}],dataZoom:[{},{type:"inside"}]},o={title:{text:"电量",subtext:"",x:"center"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"category",data:t.d1},yAxis:{type:"value"},series:[{data:t.d4,type:"line"}],dataZoom:[{},{type:"inside"}]};console.log(n,"---------------"),e.setOption(n),i.setOption(s),a.setOption(o),window.addEventListener("resize",function(){e.resize(),i.resize(),a.resize()})},getdatas:function(){var t=this,e={deviceId:this.deviceId};"1"===this.selectDate||"2"===this.selectDate||"3"===this.selectDate?e.flag=this.selectDate:e.date=this.selectDate,_("/device/reportData",e).then(function(e){if(1e4==e.code)if(e.data.humidity.length>0&&e.data.temperature.length>0&&e.data.voltage.length>0){if(t.data=e.data,t.data.date=t.selectDate,t.loading=!1,t.d1=e.data.timeData,"1"===t.selectDate||"2"===t.selectDate||"3"===t.selectDate){var i=/\d{4}-(\d{1,2}-\d{1,2})/,a=[];t.d1.forEach(function(t,e){i.test(t)&&a.push(RegExp.$1)}),t.d1=a}else{var n=/\d{4}-\d{1,2}-\d{1,2}/;t.d1=t.d1.map(function(t){return t.replace(n,"")})}t.d2=e.data.humidity,t.d3=e.data.temperature,t.d4=e.data.voltage,t.drawLine(),t.hideDatePicker(),t.loading=!1}else t.loading=!1,t.data=null,t.d2=[],t.d3=[],t.d4=[],t.d1=[],t.drawLine(),Object(p["h"])("暂无数据..."),t.hideDatePicker(),t.loading=!1;else t.loading=!1,Object(p["h"])("获取数据失败，请稍后"),t.hideDatePicker(),t.loading=!1}).catch(function(e){t.loading=!1,t.hideDatePicker(),Object(p["h"])("获取数据失败，请稍后"),console.log(e)})}},data:function(){return{deviceId:"",selectDate:"",currentDate:new Date,currentDateT:new Date,minDate:new Date("2018/1/1"),datePicker:!1,d1:[],d2:[],d3:[],d4:[],currentTab:!0,data:null,loading:!0}},mounted:function(){this.deviceId=this.$route.params.id,this.init()}}),pt=ut,mt=(i("bcff"),Object(o["a"])(pt,dt,ht,!1,null,"9183a830",null));mt.options.__file="wsd.vue";var ft=mt.exports,vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("p",{staticClass:"title"},[t._v("支持id  name")]),i("div",{staticClass:"search_wrap"},[i("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),i("div",{staticClass:"noData"},[0==t.items.length?i("p",[t._v("没有搜索到相关数据")]):t._e()]),i("div",{staticClass:"list_wrap"},[i("item-list",{attrs:{list:t.items},on:{select:t.onSelects}})],1),t.loading?i("div",{staticClass:"load"},[i("van-loading",{attrs:{color:"#c1c1c1",size:"40px"}})],1):t._e()])},gt=[];i("37b0");var _t={name:"home",components:{Search:p["f"],Actionsheet:p["a"],Dialog:p["d"],Loading:p["e"],ItemList:S},filters:{nyr:void 0},watch:{value:function(t,e){this.searchByKey()}},methods:{refresh:function(t){var e=this,i=this;t&&(this.loading=!0,_("/device/list",{openId:this.openId,deviceName:t}).then(function(t){if(1e4==t.code){e.items=[],e.items=t.data,e.loading=!1;try{i.items.forEach(function(t,e){t.probe_type=1==t.probe_type?"内置探头":"外置探头 ",void 0!=t.report_parse_acquisition_time&&(t.time=b(t.report_parse_acquisition_time)),void 0!=t.report_parse_voltage&&""!=t.report_parse_voltage&&(t.report_parse_voltage>3.6?t.powerL=1:t.report_parse_voltage<3.6&&t.report_parse_voltage>3.5?t.powerL=2:t.report_parse_voltage<3.5&&t.report_parse_voltage>3.45?t.powerL=3:t.powerL=4)})}catch(t){console.log(t)}}}).catch(function(t){console.log(t)}))},onSelects:function(){""!=this.value&&this.refresh(this.value)},toPercent:function(t){var e=Number(100*t).toFixed(1);return e+="%",e},searchByKey:y(function(){var t=this,e=this;""!=e.value&&(this.loading=!0,_("/device/list",{openId:e.openId,deviceName:e.value}).then(function(i){if(1e4==i.code){e.items=[],e.items=i.data,t.loading=!1;try{e.items.forEach(function(t,e){t.probe_type=1==t.probe_type?"内置探头":"外置探头 ",void 0!=t.report_parse_acquisition_time&&(t.time=b(t.report_parse_acquisition_time)),void 0!=t.report_parse_voltage&&""!=t.report_parse_voltage&&(t.report_parse_voltage>3.6?t.powerL=1:t.report_parse_voltage<3.6&&t.report_parse_voltage>3.5?t.powerL=2:t.report_parse_voltage<3.5&&t.report_parse_voltage>3.45?t.powerL=3:t.powerL=4)})}catch(t){console.log(t)}}}).catch(function(t){console.log(t)}))},500)},data:function(){return{selectId:"",show:!1,isFirst:!1,value:"",items:[],loading:!1,searchId:""}},mounted:function(){this.openId=Cookies.get("openId"),this.$route.query.id&&(this.value=this.$route.query.id,this.refresh(this.$route.query.id))}},wt=_t,bt=(i("3c38"),Object(o["a"])(wt,vt,gt,!1,null,"0a371293",null));bt.options.__file="search.vue";var yt=bt.exports,Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"download"},[t.isPc?i("div",[i("h1",[t._v("慧居科技")]),i("div",[i("p",[t._v("请选择导出的开始和结束日期")]),i("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.change},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),i("div",[i("div",{staticClass:"panel-body"},[t._m(0),i("p",{staticStyle:{"margin-top":"10px"}},[i("strong",[t._v("考勤导入：")]),i("a",{staticClass:"btn btn-primary btn-xs ",on:{click:t.chooseFile}},[t._v("选择文件")])]),i("p",[t._v("已选择文件："),i("em",{staticStyle:{color:"red","font-style":"normal"}},[t._v(t._s(t.attence))])]),i("p",[t._v(t._s(t.info))]),i("input",{ref:"attenceInput",staticStyle:{display:"none"},attrs:{type:"file",name:"attence"},on:{change:function(e){t.changeFile(e)}}})]),i("div",{staticClass:"panel-footer"},[i("a",{staticClass:"btn btn-primary btn-md",on:{click:t.upFile}},[t._v("确认导入")])])])]):i("div",[i("h1",[t._v("请用电脑访问")])])])},Dt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("strong",[t._v("注意事项：")]),i("br"),t._v("1、导入文件格式：.xls，.xlsx"),i("br")])}];i("37b0");var xt={name:"home",components:{Loading:p["e"],Actionsheet:p["a"],Toast:p["h"],Dialog:p["d"],DatetimePicker:p["c"]},filters:{nyr:C},methods:{change:function(t){console.log(new Date(t[0]).getTime(),"-------------",new Date(t[1]).getTime())},chooseFile:function(){this.$refs.attenceInput.click()},changeFile:function(t){this.attence=t.target.files[0].name,this.attenceFile=t.target.files[0]},upFile:function(){var t=this.attenceFile.name,e=t.split(".");if(console.log(this.attenceFile),"xls"===e[1]||"xlsx"===e[1]){var i=new window.FormData;i.append("file",this.attenceFile),console.log(i);var a={headers:{"Content-Type":"multipart/form-data"}};g.a.post("http://live-smart.com.cn/file/device/import",i,a).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}else Object(p["h"])("文件格式错误！")}},data:function(){return{value1:"",isPc:x(),attence:"",attenceFile:{},info:{}}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.isPc=x()})}},It=xt,Tt=(i("672b"),Object(o["a"])(It,Ct,Dt,!1,null,null,null));Tt.options.__file="download.vue";var jt=Tt.exports;a["default"].use(d["a"]);var kt=new d["a"]({routes:[{path:"/",name:"home",component:H,meta:{title:"设备列表",keepAlive:!0}},{path:"/cjset/:id",name:"cjset",component:Y,meta:{title:"采集设置"}},{path:"/xq/:id",name:"xq",component:Q,meta:{title:"设备详情"}},{path:"/itemlist/:id",name:"itemlist",component:at,meta:{title:"设备列表"}},{path:"/warn/:id",name:"warn",component:lt,meta:{title:"报警设置"}},{path:"/wsd/:id",name:"wsd",component:ft,meta:{title:"温湿曲线"}},{path:"/search",name:"search",component:yt,meta:{title:"搜索"}},{path:"/tpl/:id",name:"tpl",component:U,meta:{title:"模板消息"}},{path:"/download/",name:"download",component:jt,meta:{title:"数据导出"}},{path:"/about",name:"about",meta:{title:"设备详情"},component:function(){return i.e("about").then(i.bind(null,"f820"))}}]}),St=i("2f62");a["default"].use(St["a"]);var Ot=new St["a"].Store({state:{},mutations:{},actions:{}}),Ft=(i("8590"),i("313e")),Lt=i.n(Ft),Ht=(i("ed2c"),i("5c96")),$t=i.n(Ht);i("0fae");i("37b0"),a["default"].use($t.a),a["default"].use(p["i"]),a["default"].prototype.$echarts=Lt.a,a["default"].config.productionTip=!1,kt.beforeEach(function(t,e,i){t.meta.title&&(document.title=t.meta.title);var a=encodeURIComponent(window.location.href);if(Cookies.get("openId"))i();else{var n=window.location.search.split("&")[0].split("=")[1];n?_("/wx/getWebTokenByCode",{code:n}).then(function(t){1e4==t.code&&void 0!=t.data&&""!=t.data.openid&&void 0!=t.data.openid?(Cookies("openId",t.data.openid,{expires:new Date((new Date).getTime()+1728e5)}),i()):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri="+a+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}).catch(function(t){console.log(t)}):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri="+a+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}}),new a["default"]({router:kt,store:Ot,render:function(t){return t(l)}}).$mount("#app")},"672b":function(t,e,i){"use strict";var a=i("ffbc"),n=i.n(a);n.a},8566:function(t,e,i){},"8a5e":function(t,e,i){"use strict";var a=i("175f"),n=i.n(a);n.a},a769:function(t,e,i){},a9c1:function(t,e,i){"use strict";var a=i("a769"),n=i.n(a);n.a},aa13:function(t,e,i){},b1c7:function(t,e,i){},b82a:function(t,e,i){"use strict";var a=i("aa13"),n=i.n(a);n.a},bcff:function(t,e,i){"use strict";var a=i("cf47"),n=i.n(a);n.a},c21b:function(t,e,i){},c34d:function(t,e,i){},cf47:function(t,e,i){},e9c7:function(t,e,i){"use strict";var a=i("8566"),n=i.n(a);n.a},ed2c:function(t,e,i){},eea7:function(t,e,i){"use strict";var a=i("f34b"),n=i.n(a);n.a},f34b:function(t,e,i){},f3ac:function(t,e,i){},ffbc:function(t,e,i){}});
//# sourceMappingURL=app.1688da65.js.map