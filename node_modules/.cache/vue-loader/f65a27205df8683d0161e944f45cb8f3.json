{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\Tpl.vue?vue&type=style&index=0&id=c1021880&scoped=true&lang=css&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\Tpl.vue","mtime":1537343007084},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.item_list {\n  height: 100%;\n  font-size: .4rem;\n}\n\n.btn_wrap {\n  display: flex;\n  flex-direction:row;\n  justify-content:space-around;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n.list {\n  padding: .133rem .4rem;\n}\n\n.item_list .list .item p{\n  height: 1.2rem;\n  line-height:1.2rem;\n  text-align: left;\n  border-bottom: 1px solid #c6c6c6;\n  \n}\n\n.item_list .list ul li {\n  padding: .133rem 0;\n}\n\n.item_list .list ul li .fr {\n  margin-right: .133rem;\n}\n\n.item_list .list ul li .cov {\n  width: .667rem;\n  height:.667rem;\n  border-radius: 50%;\n  margin-top: .133rem;\n}\n\n.item_list .list ul li p .label:first-child {\n  margin-left: .133rem;\n}\n\n.title {\n  text-align: center;\n  font-size: .4rem;\n  padding: .4rem;\n}\n\n.hint {\n  height: 1.067rem;\n  font-size: .427rem;\n  line-height: 1.067rem;\n  background: #f1f1f1;\n  border-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.btn_wrap {\n  margin-top: .267rem;\n}\n",{"version":3,"sources":["Tpl.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Tpl.vue","sourceRoot":"src\\views","sourcesContent":["<template>\n  <div class=\"item_list\">\n    <p class=\"title\"></p>\n    <div class=\"list\">\n      <ul>\n        <li class=\"item\" >\n          <!-- <p class=\"\">\n            <span class=\"label\">核定ID：</span>\n            <span class=\"fr\">{{info.wxUserDeviceId}}</span>\n          </p> -->\n          <p class=\"\">\n            <span class=\"label\">申请者昵称：</span>\n            <span class=\"label fr\">{{info.nickname}}</span>\n          </p>\n          <!-- <p class=\"\">\n            <span class=\"label\">申请者openId：</span>\n            <span class=\"label fr\">{{info.open_id}}</span>\n          </p> -->\n          <p class=\"\">\n            <span class=\"label\">申请时间：</span>\n            <span class=\"label fr\">{{info.create_time | Dnyr}}</span>\n          </p>\n          <p class=\"\">\n            <span class=\"label\">设备Id：</span>\n            <span class=\"label fr\">{{info.device_id}}</span>\n          </p>\n          <p class=\"\">\n            <span class=\"label\">设备名称：</span>\n            <span class=\"label fr\">{{info.custom_device_name}}</span>\n          </p>\n          <p class=\"\">\n            <span class=\"label\">审核时间：</span>\n            <span class=\"label fr\">{{info.check_time | Dnyr}}</span>\n          </p>\n          <p class=\"\">\n            <span class=\"label\">审核状态：</span>\n            <span class=\"label fr\" v-if=\"info.check_status==0\">待审核</span>\n            <span class=\"label fr\" v-if=\"info.check_status==1\">已批准</span>\n            <span class=\"label fr\" v-if=\"info.check_status==2\">已拒绝</span>\n          </p>\n          <p class=\"\">\n            <span class=\"label\">审核人：</span>\n            <span class=\"label fr\">{{info.checkPersonName}}</span>\n          </p>\n          <!-- <p class=\"\">\n            <span class=\"label\">审核者iD：</span>\n            <span class=\"label fr\">{{info.check_open_id}}</span>\n          </p> -->\n        </li>\n      </ul>\n    </div>\n    <div class=\"btn_wrap\" v-if=\"info.check_status==0\">\n      <van-button type=\"primary\" size=\"normal\" v-on:click=\"Onallow\" :disabled=\"disabledT\">允许</van-button>\n      <van-button type=\"warning\" size=\"normal\" v-on:click=\"Onreject\" :disabled=\"disabledW\">拒绝</van-button>\n    </div>\n    <div class=\"load\" v-if=\"loading\">\n      <van-loading color=\"#c1c1c1\" size=\"40px\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport {Loading,Button,Toast } from 'vant';\nimport {get,post} from '../../src/util/http.js'\nimport {formatDatePub,Dnyr} from '../../src/util/util.js'\nrequire('../../src/util/cookie.js')\n\nexport default {\n  name: 'cjset',\n  components: {\n    Loading,\n    Button ,\n    Toast\n  },\n  filters:{\n    formatDatePub,\n    Dnyr\n  },\n  data(){\n    return {\n      deviceId:'',\n      loading:false,\n      info:{},\n      disabledT:false,\n      disabledW:false,\n      userInfo:{}\n    }\n  },\n  methods:{\n    Onallow(e){\n      this.loading=true\n      get('/device/checkApproved',{wxUserDeviceId :this.deviceId,openId:this.userInfo.openid}).then((res)=>{\n        if(res.code==10000){\n          Toast('允许成功')\n          this.loading=false\n          this.disabledT=true\n          this.disabledW=true\n        }else {\n          this.loading=false\n          Toast(res.msg?res.msg:'允许失败')\n        }\n      }).catch((e)=>{\n        this.loading=false\n        Toast('允许失败')\n        console.log(e)\n      })\n\n    },\n    Onreject(e){\n      this.loading=true\n      get('/device/checkUnapprove',{wxUserDeviceId :this.deviceId,openId:this.userInfo.openid}).then((res)=>{\n        if(res.code==10000){\n          Toast('拒绝成功')\n          this.loading=false\n          this.disabledT=true\n          this.disabledW=true\n        }else {\n          this.loading=false\n          Toast(res.msg?res.msg:'拒绝失败')\n        }\n      }).catch((e)=>{\n        this.loading=false\n        Toast('拒绝失败')\n        console.log(e)\n      })\n    },\n    getData(){\n      get('/device/checkView',{wxUserDeviceId :this.deviceId}).then((res)=>{\n        if(res.code==10000){\n          this.info=res.data\n        }else {\n          this.loading=false\n        }\n      }).catch((e)=>{\n        this.loading=false\n        console.log(e)\n      })\n    },\n    checkOpenid(){\n      let code= window.location.search.split('&')[0].split('=')[1];\n      if(code){\n        get('/wx/getWebTokenByCode',{code:code}).then((res)=>{\n          if(res.code==10000 && res.data!=undefined && res.data.opend!='' &&  res.data.openid!=undefined){\n            this.userInfo=res.data\n            Cookies('openId',this.userInfo.openid,{ expires: new Date(new Date().getTime() + (2*24*60*60 * 1000))})\n            this.getData()\n          }else {\n            // code 失效 或者接口挂了\n            let currentHref= encodeURIComponent(window.location.href);\n            let href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri='+currentHref+'&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\n            window.location.href=href\n          }\n        }).catch((e)=>{\n          console.log(e)\n        })\n        // this.getData()\n      }else{\n        let currentHref= encodeURIComponent(window.location.href);\n        let href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri='+ currentHref+'&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\n        window.location.href=href\n        \n        // let code= window.location.search.split('&')[0].split('=')[1];\n        // if(code){\n        //   // 用code  换openId\n        //   get('/wx/getWebTokenByCode',{code:code}).then((res)=>{\n        //     if(res.code==10000 && res.data!=undefined && res.data.openid!='' &&  res.data.openid!=undefined){\n        //       this.userInfo=res.data\n        //       Cookies('openId',this.userInfo.openid,{ expires: new Date(new Date().getTime() + (2*24*60*60 * 1000))})\n        //       this.getList()\n        //     }else {\n        //       // code 失效 或者接口挂了\n        //       window.location.href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=http%3a%2f%2flive-smart.com.cn%2findex.html%23%2f&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\n        //     }\n        //   }).catch((e)=>{\n        //     console.log(e)\n        //   })\n        // }else {\n        //   // 没有code 去这个地址\n        //   window.location.href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=http%3a%2f%2flive-smart.com.cn%2findex.html%23%2f&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\n        // }\n      }\n    }\n  },\n  \n  mounted(){\n    this.deviceId=this.$route.params.id\n    if(true){\n      setTimeout(()=>{\n        window.close();\n      })\n    }\n    console.log(this.$route.params.id)\n    this.checkOpenid()\n    // this.getData()\n  }\n}\n</script>\n<style scoped>\n.item_list {\n  height: 100%;\n  font-size: .4rem;\n}\n\n.btn_wrap {\n  display: flex;\n  flex-direction:row;\n  justify-content:space-around;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n.list {\n  padding: .133rem .4rem;\n}\n\n.item_list .list .item p{\n  height: 1.2rem;\n  line-height:1.2rem;\n  text-align: left;\n  border-bottom: 1px solid #c6c6c6;\n  \n}\n\n.item_list .list ul li {\n  padding: .133rem 0;\n}\n\n.item_list .list ul li .fr {\n  margin-right: .133rem;\n}\n\n.item_list .list ul li .cov {\n  width: .667rem;\n  height:.667rem;\n  border-radius: 50%;\n  margin-top: .133rem;\n}\n\n.item_list .list ul li p .label:first-child {\n  margin-left: .133rem;\n}\n\n.title {\n  text-align: center;\n  font-size: .4rem;\n  padding: .4rem;\n}\n\n.hint {\n  height: 1.067rem;\n  font-size: .427rem;\n  line-height: 1.067rem;\n  background: #f1f1f1;\n  border-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.btn_wrap {\n  margin-top: .267rem;\n}\n</style>\n"]}]}