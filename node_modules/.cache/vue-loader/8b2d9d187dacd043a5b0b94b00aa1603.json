{"remainingRequest":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\waibao\\waibao\\src\\components\\citemlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\waibao\\waibao\\src\\components\\citemlist.vue","mtime":1542681032177},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {get,post} from '../../src/util/http.js'\nimport {formatDatePub,nyr} from '../../src/util/util.js'\nimport { Actionsheet ,Loading,Toast ,Dialog } from 'vant'\n\nexport default {\n  name: 'itemlist',\n  props:{\n    list:{\n      type: Array,\n      default: function () {\n        return []\n      }\n    }\n  },\n  components: {\n    Loading,\n    Actionsheet ,\n    Toast,\n    Dialog\n  },\n  filters:{\n    nyr\n  },\n  data(){\n    return {\n      selectId:'',//当前选择的设备id\n      show:false,\n      isFirst:false,\n      loading:false,\n      actions:[]\n    }\n  },\n  methods:{\n    returnClass(a,b,c){\n      if(a>c || a<b){\n        return 'warn'\n      }else {\n        return 'normal'\n      }\n    },\n\n    top(opt){\n      console.log(opt,'------123')\n      this.loading=true\n      //       wxUserDeviceId  必传，下面俩参数传其种一个\n      // alarmSwitch （boolean 类型 true|false）\n      // top       1置顶 0取消置顶\n      post('/device/setting/software',{\n        wxUserDeviceId:opt.wxUserDeviceId,\n        top:opt.top?'0':'1'\n      }).then((res)=>{\n        if(res.code==10000){\n          this.$emit('select')\n          console.log(this.$parent)\n        }else {\n          this.loading=false\n          Toast('置顶失败，稍后再试！')\n        }\n      }).catch(function(e){\n        console.log(e,'------------')\n      })\n    },\n    onSelect(item){\n      this.show = false;\n      // console.log(item)/\n      if(item.url=='first'){\n        if(item.type=='gotop'){\n          let opt=this.list[this.currentIndex]\n          this.top(opt)\n        }else if(item.type=='cancelgotop'){\n          let opt=this.list[this.currentIndex]\n          this.top(opt)\n        }\n        return\n      }else if(item.url=='delete'){\n        let opt=this.list[this.currentIndex]\n        this.dealer(opt)\n        return\n      }else if(item.url=='/wsd/'){\n        let items=this.list[this.currentIndex]\n        let opt={\n          path:item.url+''+items.device_id\n        }\n        this.selectId=''\n        this.$router.push(opt)\n      }else {\n        let opt={\n          path:item.url+''+this.selectId\n        }\n        console.log(opt,'--------')\n        this.selectId=''\n        this.$router.push(opt)\n      }\n    },\n    set(index,top,id,role){\n      let data=[]\n      if(role==1){\n        // 2管理员\n        data=[\n          {\n            name:'设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'报警设置',\n            url:'/warn/'\n          },\n          {\n            name:'成员列表',\n            url:'/itemlist/'\n          }\n        ]\n        if(this.$parent.$el.className!='search'){\n          data.push({ name:'置顶/取消置顶',url:'first'})\n        }\n      }else {\n        // 2成员\n        data=[\n          {\n            name:'设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'报警设置',\n            url:'/warn/'\n          },\n          {\n            name:'成员列表',\n            url:'/itemlist/'\n          }\n        ]\n        if(this.$parent.$el.className!='search'){\n          data.push({ name:'置顶/取消置顶',url:'first'})\n        }\n      }\n      this.actions=data\n      if(this.$parent.$el.className!='search'){\n        if(top==1){\n          this.actions[this.actions.length-1].name='取消置顶';\n          this.actions[this.actions.length-1].type='cancelgotop';\n        }else {\n          this.actions[this.actions.length-1].name='置顶'\n          this.actions[this.actions.length-1].type='gotop';\n        }\n      }\n      this.selectId=id\n      this.currentIndex=index\n      this.show=!this.show\n    },\n  },\n  mounted(){\n    \n  }\n}\n",{"version":3,"sources":["citemlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"citemlist.vue","sourceRoot":"src\\components","sourcesContent":["<template>\n  <div>\n    <div class=\"list_wrap\">\n      <ul>\n        <li v-for=\"(item,index) in list\" v-bind:key=\"index\">\n          <!-- <p class=\"machine_name p\"> </p> -->\n          <p class=\"t machine_name\">\n            <!-- <span>温湿度计(名称)</span> -->\n            <span class=\"fontFamily hht-guanliyuan Administrator\" v-if=\"item.wxUserDeviceRole==1\"> </span>{{item.name}}\n            \n            <span class=\"fontFamily hht-shezhi1 fr\" v-on:click=\"set(index,item.top,item.wxUserDeviceId,item.wxUserDeviceRole)\"></span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji3 fr\" v-if=\"item.signalFlag ==1\"></span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji2 fr\" v-if=\"item.signalFlag ==2\"></span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji1 fr\" v-if=\"item.signalFlag ==3\"></span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji fr\" v-if=\"item.signalFlag ==4\"></span>\n            <!-- 信号{{item.report_parse_device_signal}} -->\n            <span class=\"fontFamily  hht-dianchidianya_ji3 fr\" v-if=\"item.voltageFlag==4\"></span>\n            <span class=\"fontFamily  hht-dianchidianya_ji2 fr\"  v-else-if=\"item.voltageFlag==3\"></span>\n            <span class=\"fontFamily  hht-dianchidianya_ji1 fr\" v-else-if=\"item.voltageFlag==2\"></span>\n            <span class=\"fontFamily  hht-dianchidianya_ji fr\" v-else-if=\"item.voltageFlag==1\"></span>\n            <!-- 0,1,4 待下发  3 下发是阿拜 2下发成功 -->\n            <span class=\"fr  fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==0\" style=\"font-size:.32rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==1\" style=\"font-size:.32rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==4\" style=\"font-size:.32rem  margin-right: .2rem;;\"></span>\n            <span class=\"fr fontFamily hht-shibai\" v-if=\"item.cmdExeStatus==3\" style=\"font-size:.32rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-chenggong-01\" v-if=\"item.cmdExeStatus==2\" style=\"font-size:.32rem; margin-right: .2rem;\"></span>\n          </p>\n          <!-- <p class=\"p\">\n            <span>数据设置下发状态:</span>\n            <span class=\"fr  fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==0\" style=\"font-size:.4rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==1\" style=\"font-size:.4rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-dengdai\" v-if=\"item.cmdExeStatus==4\" style=\"font-size:.4rem  margin-right: .2rem;;\"></span>\n            <span class=\"fr fontFamily hht-shibai\" v-if=\"item.cmdExeStatus==3\" style=\"font-size:.4rem; margin-right: .2rem;\"></span>\n            <span class=\"fr fontFamily hht-chenggong-01\" v-if=\"item.cmdExeStatus==2\" style=\"font-size:.4rem; margin-right: .2rem;\"></span>\n          </p> -->\n          <p class=\"wendu p\">\n            <span class=\"fontFamily hht-wendu\">温度：</span>\n            <span v-bind:class='returnClass(item.report_parse_temperature,item.temperature_low,item.temperature_high)'>{{item.report_parse_temperature }}℃</span>\n            <span class=\"scope fr \" v-if=\"item.isSeted==1\">范围：<span class=\"\">{{item.temperature_low}}-{{item.temperature_high}}</span></span>\n          </p>\n          <p class=\"shidu p \">\n            <span class=\"fontFamily hht-shidu\">湿度：</span>\n            <span v-bind:class='returnClass(item.report_parse_humidity,item.humidity_low,item.humidity_high)'>{{item.report_parse_humidity}} %RH</span>\n            <span class=\"scope fr\" v-if=\"item.isSeted==1\">范围：<span class=\"\">{{item.humidity_low}}-{{item.humidity_high}}</span></span>\n          </p>\n          <p class=\"info p\">\n            <span>{{item.report_parse_acquisition_time | nyr }}</span>\n            <span>ID:{{item.device_id}}</span>\n            <span>{{item.sensor_type}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <div>\n      <van-actionsheet\n        v-model=\"show\"\n        :actions=\"actions\"\n        @select=\"onSelect\"\n      />\n    </div>\n  </div>\n  \n</template>\n\n<script>\nimport {get,post} from '../../src/util/http.js'\nimport {formatDatePub,nyr} from '../../src/util/util.js'\nimport { Actionsheet ,Loading,Toast ,Dialog } from 'vant'\n\nexport default {\n  name: 'itemlist',\n  props:{\n    list:{\n      type: Array,\n      default: function () {\n        return []\n      }\n    }\n  },\n  components: {\n    Loading,\n    Actionsheet ,\n    Toast,\n    Dialog\n  },\n  filters:{\n    nyr\n  },\n  data(){\n    return {\n      selectId:'',//当前选择的设备id\n      show:false,\n      isFirst:false,\n      loading:false,\n      actions:[]\n    }\n  },\n  methods:{\n    returnClass(a,b,c){\n      if(a>c || a<b){\n        return 'warn'\n      }else {\n        return 'normal'\n      }\n    },\n\n    top(opt){\n      console.log(opt,'------123')\n      this.loading=true\n      //       wxUserDeviceId  必传，下面俩参数传其种一个\n      // alarmSwitch （boolean 类型 true|false）\n      // top       1置顶 0取消置顶\n      post('/device/setting/software',{\n        wxUserDeviceId:opt.wxUserDeviceId,\n        top:opt.top?'0':'1'\n      }).then((res)=>{\n        if(res.code==10000){\n          this.$emit('select')\n          console.log(this.$parent)\n        }else {\n          this.loading=false\n          Toast('置顶失败，稍后再试！')\n        }\n      }).catch(function(e){\n        console.log(e,'------------')\n      })\n    },\n    onSelect(item){\n      this.show = false;\n      // console.log(item)/\n      if(item.url=='first'){\n        if(item.type=='gotop'){\n          let opt=this.list[this.currentIndex]\n          this.top(opt)\n        }else if(item.type=='cancelgotop'){\n          let opt=this.list[this.currentIndex]\n          this.top(opt)\n        }\n        return\n      }else if(item.url=='delete'){\n        let opt=this.list[this.currentIndex]\n        this.dealer(opt)\n        return\n      }else if(item.url=='/wsd/'){\n        let items=this.list[this.currentIndex]\n        let opt={\n          path:item.url+''+items.device_id\n        }\n        this.selectId=''\n        this.$router.push(opt)\n      }else {\n        let opt={\n          path:item.url+''+this.selectId\n        }\n        console.log(opt,'--------')\n        this.selectId=''\n        this.$router.push(opt)\n      }\n    },\n    set(index,top,id,role){\n      let data=[]\n      if(role==1){\n        // 2管理员\n        data=[\n          {\n            name:'设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'报警设置',\n            url:'/warn/'\n          },\n          {\n            name:'成员列表',\n            url:'/itemlist/'\n          }\n        ]\n        if(this.$parent.$el.className!='search'){\n          data.push({ name:'置顶/取消置顶',url:'first'})\n        }\n      }else {\n        // 2成员\n        data=[\n          {\n            name:'设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'报警设置',\n            url:'/warn/'\n          },\n          {\n            name:'成员列表',\n            url:'/itemlist/'\n          }\n        ]\n        if(this.$parent.$el.className!='search'){\n          data.push({ name:'置顶/取消置顶',url:'first'})\n        }\n      }\n      this.actions=data\n      if(this.$parent.$el.className!='search'){\n        if(top==1){\n          this.actions[this.actions.length-1].name='取消置顶';\n          this.actions[this.actions.length-1].type='cancelgotop';\n        }else {\n          this.actions[this.actions.length-1].name='置顶'\n          this.actions[this.actions.length-1].type='gotop';\n        }\n      }\n      this.selectId=id\n      this.currentIndex=index\n      this.show=!this.show\n    },\n  },\n  mounted(){\n    \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .list_wrap ul li .t span {\n  font-size: .32rem;\n  /* margin-right: .3rem; */\n}\n\n.list_wrap ul li {\n  border-bottom: 1px solid #c6c6c6;\n  padding: .2rem 0;\n}\n\n.list_wrap ul li .info {\n  display: flex;\n  flex-direction:row;\n  flex-wrap:nowrap;\n  justify-content:space-between;\n\n}\n\n.list_wrap ul{\n  padding: .2rem .4rem .4rem .4rem;\n}\n\n.list_wrap ul p.t {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul .p {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul li .p span {\n  margin-right: .1rem;\n  font-size: .32rem;\n}\n\n.machine_name {\n  font-size: .453rem;\n}\n\n.list_wrap ul li .machine_name .hht-shezhi1 {\n  font-size: .48rem;\n  width: .8rem;\n  height: .8rem;\n  text-align: center;\n  vertical-align: middle;\n  color: #0087ff;\n}\n\n.list_wrap ul li .machine_name span:active {\n  color: #333;\n}\n.hht-WIFIxinhao-ji:before {\n  margin-right: 5px;\n}\n\n\n\n\n\n.Administrator {\n  vertical-align: -1px !important;\n}\n\n.wendu span,.shidu span{\n  font-size: .4rem !important ;\n}\n\n.warn {\n  color: red !important ;\n}\n\n.machine_name .Administrator {\n  color: #0087ff;\n  font-size: .5rem !important ;\n  margin-right: 4px;\n}\n\n.machine_name .fontFamily {\n  margin-right: 0.2rem;\n}\n</style>\n\n\n "]}]}