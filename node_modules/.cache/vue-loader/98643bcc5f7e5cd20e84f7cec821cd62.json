{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\search.vue","mtime":1536906592735},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// @ is an alias to /src\nimport { Search ,Actionsheet,Dialog,Loading,Toast} from 'vant'\nimport {get,post} from '../../src/util/http.js'\nimport {debounce} from '../../src/util/util.js'\nimport {formatDatePub} from '../../src/util/util.js'\nrequire('../../src/util/cookie.js')\nexport default {\n  name: 'home',\n  components: {\n    Search,\n    Actionsheet ,\n    Dialog,\n    Loading\n  },\n  watch:{\n    value:function(newVal,oldVal){\n      // console.log(val,'--------',a)\n      this.searchByKey()\n    }\n  },\n  methods:{\n    top(opt){\n      console.log(opt)\n      this.loading=true\n      //       wxUserDeviceId  必传，下面俩参数传其种一个\n      // alarmSwitch （boolean 类型 true|false）\n      // top       1置顶 0取消置顶\n      post('/device/setting/software',{\n        wxUserDeviceId:opt.wxUserDeviceId,\n        top:opt.top?'0':'1'\n      }).then((res)=>{\n        if(res.code==10000){\n          this.loading=false\n          // this.getList()\n        }else {\n          this.loading=false\n          Toast('置顶失败，稍后再试！')\n        }\n      }).catch(function(e){\n        console.log(e,'------------')\n      })\n    },\n    onSelect(item){\n      this.show = false;\n      // console.log(item)/\n      if(item.url=='first'){\n        if(item.type=='gotop'){\n          let opt=this.items[this.currentIndex]\n          this.top(opt)\n        }else if(item.type=='cancelgotop'){\n          let opt=this.items[this.currentIndex]\n          this.top(opt)\n        }\n        return\n      }else if(item.url=='delete'){\n        let opt=this.items[this.currentIndex]\n        this.dealer(opt)\n        return\n      }else {\n        let opt={\n          path:item.url+''+this.selectId\n        }\n        this.selectId=''\n        this.$router.push(opt)\n      }\n    },\n    dealer(opt){\n      Dialog.confirm({\n        title: '确定删除',\n        message: '删除后将不在展示该条数据'\n      }).then(() => {\n        this.loading=true\n        // on confirm\n        get('/device/deleleDevice',{wxUserDeviceId:opt.wxUserDeviceId}).then((res)=>{\n          if(res.code==10000){\n            this.loading=false\n            Toast('老板，再见...')\n          }else {\n            this.loading=false\n            Toast('哈哈，没珊掉我..')\n          }\n        }).catch((e)=>{\n          this.loading=false\n          Toast('哈哈，没珊掉我..')\n          console.log(e)\n        })\n      }).catch(() => {\n        // on cancel\n        Toast('谢手下留情...')\n      });\n    },\n    set(index,top,id,role){\n      console.log(arguments)\n       let data=[]\n      if(role==1){\n        // 2管理员\n        data=[\n          {\n            name:'进入设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'进入温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'数据设置',\n            url:'/warn/'\n          },\n          {\n            name:'进入成员列表',\n            url:'/itemlist/'\n          },\n          {\n            name:'删除',\n            url:'delete'\n          },\n          {\n            name:'置顶/取消置顶',\n            url:'first'\n          }\n        ]\n      }else {\n        // 2成员\n        data=[\n          {\n            name:'进入设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'进入温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'数据设置',\n            url:'/warn/'\n          },\n          {\n            name:'删除',\n            url:'delete'\n          },\n          {\n            name:'置顶/取消置顶',\n            url:'first'\n          }\n        ]\n      }\n      this.actions=data\n      if(top==1){\n        this.actions[this.actions.length-1].name='取消置顶';\n        this.actions[this.actions.length-1].type='cancelgotop';\n      }else {\n        this.actions[this.actions.length-1].name='置顶'\n        this.actions[this.actions.length-1].type='gotop';\n      }\n      \n      this.selectId=id\n      this.currentIndex=index\n      this.show=!this.show\n    },\n    setFrist(){\n\n    },\n    setDefault(){\n\n    },\n    toPercent(point){\n      let str=Number(point*100).toFixed(1);\n      str+=\"%\";\n      return str;\n    },\n    searchByKey:debounce(\n      function(){\n          let self=this\n          if(self.value==''){\n            return\n          }\n          this.loading=true\n          get('/device/list',{openId:self.openId,deviceName:self.value}).then((res)=>{\n          if(res.code==10000){\n            self.items=[]\n            self.items=res.data\n            this.loading=false\n            try {\n              self.items.forEach((el,i)=>{\n              el.probe_type=el.probe_type==1?'内置探头':'外置探头 '\n              if(el.report_parse_acquisition_time!=undefined){\n                el.time=formatDatePub(el.report_parse_acquisition_time)\n              }\n              if(el.report_parse_voltage != undefined && el.report_parse_voltage!=''){\n                if( el.report_parse_voltage>3.6){\n                  // 高\n                  el.powerL=1\n                }else if(el.report_parse_voltage<3.6 && el.report_parse_voltage>3.5 ){\n                  // 中\n                  el.powerL=2\n                }else if(el.report_parse_voltage<3.5 && el.report_parse_voltage>3.45){\n                  // 低\n                  el.powerL=3\n                }else {\n                  el.powerL=4\n                }\n              }\n            })\n            }catch(e){\n              console.log(e)\n            }\n            \n          }\n        }).catch((e)=>{\n          console.log(e)\n        })\n      },500)\n  },\n  data(){\n    return {\n      selectId:'',//当前选择的设备id\n      show:false,\n      isFirst:false,\n      value:'', // 用户输入内容\n      items:[],\n      loading:false,\n      actions:[\n        {\n          name:'进入设备详情',\n          url:'/xq/',\n        },\n        {\n          name:'进入温度曲线',\n          url:'/wsd/'\n        },\n        // {\n        //   name:'进入采集设置',\n        //   url:'cjset/'\n        // },\n        {\n          name:'数据设置',\n          url:'/warn/'\n        },\n        {\n          name:'进入成员列表'\n        },\n        {\n          name:'置顶/取消置顶',\n          url:'first'\n        }\n      ]\n    }\n  },\n  mounted(){\n    this.openId=Cookies.get('openId')  \n  }\n}\n",{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src\\views","sourcesContent":["<template>\n  <div class=\"home\">\n    <p class=\"title\">支持id  name</p>\n    <div class=\"search_wrap\">\n      <van-search placeholder=\"请输入搜索关键词\" v-model=\"value\" />\n    </div>\n    <div class=\"noData\">\n      <p v-if=\"items.length==0\">没有搜索到相关数据</p>\n    </div>\n    <div class=\"list_wrap\">\n      <ul>\n        <li v-for=\"(item,index) in items\" v-bind:key=\"index\">\n          <p class=\"machine_name p\"><span class=\"fontFamily hht-guanliyuan Administrator\" v-if=\"item.wxUserDeviceRole==1\"></span>{{item.name}} <span class=\"fontFamily hht-shezhi1 fr\" v-on:click=\"set(index,item.top,item.wxUserDeviceId,item.wxUserDeviceRole)\"></span></p>\n          <p class=\"t\">\n            <span>温湿度计(名称)</span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji fr\">信号{{item.report_parse_device_signal}}</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji3 fr\" v-if=\"item.powerL=='1'\">高</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji2 fr\"  v-else-if=\"item.powerL=='2'\">中</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji1 fr\" v-else-if=\"item.powerL=='3'\">低</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji fr\" v-else-if=\"item.powerL=='4'\">无</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji fr\" v-else>{{item.power}}</span>\n          </p>\n          <p class=\"wendu p\">\n            <span class=\"fontFamily hht-wendu\">温度：</span>\n            <span>{{item.report_parse_temperature }}℃</span>\n            <span class=\"scope fr \">范围：<span class=\"\">{{item.temperature_low?item.temperature_low:'--'}}-{{item.temperature_high?item.temperature_high:'--'}}</span></span>\n          </p>\n          <p class=\"shidu p\">\n            <span class=\"fontFamily hht-shidu\">湿度：</span>\n            <span>{{item.report_parse_humidity}}</span>\n            <span class=\"scope fr\">范围：<span class=\"\">{{item.humidity_low?item.humidity_low:'--'}}-{{item.humidity_high?item.humidity_high:'--'}}</span></span>\n          </p>\n          <p class=\"info p\">\n            <span>{{item.time}}</span>\n            <span>ID:{{item.device_id}}</span>\n            <span>{{item.probe_type}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <div>\n      <van-actionsheet\n        v-model=\"show\"\n        :actions=\"actions\"\n        @select=\"onSelect\"\n      />\n    </div>\n    <div class=\"load\" v-if=\"loading\">\n      <van-loading color=\"#c1c1c1\" size=\"40px\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Search ,Actionsheet,Dialog,Loading,Toast} from 'vant'\nimport {get,post} from '../../src/util/http.js'\nimport {debounce} from '../../src/util/util.js'\nimport {formatDatePub} from '../../src/util/util.js'\nrequire('../../src/util/cookie.js')\nexport default {\n  name: 'home',\n  components: {\n    Search,\n    Actionsheet ,\n    Dialog,\n    Loading\n  },\n  watch:{\n    value:function(newVal,oldVal){\n      // console.log(val,'--------',a)\n      this.searchByKey()\n    }\n  },\n  methods:{\n    top(opt){\n      console.log(opt)\n      this.loading=true\n      //       wxUserDeviceId  必传，下面俩参数传其种一个\n      // alarmSwitch （boolean 类型 true|false）\n      // top       1置顶 0取消置顶\n      post('/device/setting/software',{\n        wxUserDeviceId:opt.wxUserDeviceId,\n        top:opt.top?'0':'1'\n      }).then((res)=>{\n        if(res.code==10000){\n          this.loading=false\n          // this.getList()\n        }else {\n          this.loading=false\n          Toast('置顶失败，稍后再试！')\n        }\n      }).catch(function(e){\n        console.log(e,'------------')\n      })\n    },\n    onSelect(item){\n      this.show = false;\n      // console.log(item)/\n      if(item.url=='first'){\n        if(item.type=='gotop'){\n          let opt=this.items[this.currentIndex]\n          this.top(opt)\n        }else if(item.type=='cancelgotop'){\n          let opt=this.items[this.currentIndex]\n          this.top(opt)\n        }\n        return\n      }else if(item.url=='delete'){\n        let opt=this.items[this.currentIndex]\n        this.dealer(opt)\n        return\n      }else {\n        let opt={\n          path:item.url+''+this.selectId\n        }\n        this.selectId=''\n        this.$router.push(opt)\n      }\n    },\n    dealer(opt){\n      Dialog.confirm({\n        title: '确定删除',\n        message: '删除后将不在展示该条数据'\n      }).then(() => {\n        this.loading=true\n        // on confirm\n        get('/device/deleleDevice',{wxUserDeviceId:opt.wxUserDeviceId}).then((res)=>{\n          if(res.code==10000){\n            this.loading=false\n            Toast('老板，再见...')\n          }else {\n            this.loading=false\n            Toast('哈哈，没珊掉我..')\n          }\n        }).catch((e)=>{\n          this.loading=false\n          Toast('哈哈，没珊掉我..')\n          console.log(e)\n        })\n      }).catch(() => {\n        // on cancel\n        Toast('谢手下留情...')\n      });\n    },\n    set(index,top,id,role){\n      console.log(arguments)\n       let data=[]\n      if(role==1){\n        // 2管理员\n        data=[\n          {\n            name:'进入设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'进入温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'数据设置',\n            url:'/warn/'\n          },\n          {\n            name:'进入成员列表',\n            url:'/itemlist/'\n          },\n          {\n            name:'删除',\n            url:'delete'\n          },\n          {\n            name:'置顶/取消置顶',\n            url:'first'\n          }\n        ]\n      }else {\n        // 2成员\n        data=[\n          {\n            name:'进入设备详情',\n            url:'/xq/',\n          },\n          {\n            name:'进入温度曲线',\n            url:'/wsd/'\n          },\n          {\n            name:'数据设置',\n            url:'/warn/'\n          },\n          {\n            name:'删除',\n            url:'delete'\n          },\n          {\n            name:'置顶/取消置顶',\n            url:'first'\n          }\n        ]\n      }\n      this.actions=data\n      if(top==1){\n        this.actions[this.actions.length-1].name='取消置顶';\n        this.actions[this.actions.length-1].type='cancelgotop';\n      }else {\n        this.actions[this.actions.length-1].name='置顶'\n        this.actions[this.actions.length-1].type='gotop';\n      }\n      \n      this.selectId=id\n      this.currentIndex=index\n      this.show=!this.show\n    },\n    setFrist(){\n\n    },\n    setDefault(){\n\n    },\n    toPercent(point){\n      let str=Number(point*100).toFixed(1);\n      str+=\"%\";\n      return str;\n    },\n    searchByKey:debounce(\n      function(){\n          let self=this\n          if(self.value==''){\n            return\n          }\n          this.loading=true\n          get('/device/list',{openId:self.openId,deviceName:self.value}).then((res)=>{\n          if(res.code==10000){\n            self.items=[]\n            self.items=res.data\n            this.loading=false\n            try {\n              self.items.forEach((el,i)=>{\n              el.probe_type=el.probe_type==1?'内置探头':'外置探头 '\n              if(el.report_parse_acquisition_time!=undefined){\n                el.time=formatDatePub(el.report_parse_acquisition_time)\n              }\n              if(el.report_parse_voltage != undefined && el.report_parse_voltage!=''){\n                if( el.report_parse_voltage>3.6){\n                  // 高\n                  el.powerL=1\n                }else if(el.report_parse_voltage<3.6 && el.report_parse_voltage>3.5 ){\n                  // 中\n                  el.powerL=2\n                }else if(el.report_parse_voltage<3.5 && el.report_parse_voltage>3.45){\n                  // 低\n                  el.powerL=3\n                }else {\n                  el.powerL=4\n                }\n              }\n            })\n            }catch(e){\n              console.log(e)\n            }\n            \n          }\n        }).catch((e)=>{\n          console.log(e)\n        })\n      },500)\n  },\n  data(){\n    return {\n      selectId:'',//当前选择的设备id\n      show:false,\n      isFirst:false,\n      value:'', // 用户输入内容\n      items:[],\n      loading:false,\n      actions:[\n        {\n          name:'进入设备详情',\n          url:'/xq/',\n        },\n        {\n          name:'进入温度曲线',\n          url:'/wsd/'\n        },\n        // {\n        //   name:'进入采集设置',\n        //   url:'cjset/'\n        // },\n        {\n          name:'数据设置',\n          url:'/warn/'\n        },\n        {\n          name:'进入成员列表'\n        },\n        {\n          name:'置顶/取消置顶',\n          url:'first'\n        }\n      ]\n    }\n  },\n  mounted(){\n    this.openId=Cookies.get('openId')  \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nhtml,body {\n  height: 100%;\n  \n}\n\n.c1 {\n  color: #0087ff;\n}\n\n.title {\n  text-align: center;\n  font-size: .4rem;\n  padding: .4rem;\n}\n.home {\n  min-height: 100%;\n\n}\n#app {\n  margin: 0px;\n}\n\n* {\n  margin: 0px;\n  text-align: left\n}\n\n.list_wrap ul li .t span {\n  font-size: .32rem;\n  margin-right: .3rem;\n}\n\n.list_wrap ul li {\n  border-bottom: 1px solid #c6c6c6;\n}\n\n.list_wrap ul li .info {\n  display: flex;\n  flex-direction:row;\n  flex-wrap:nowrap;\n  justify-content:space-between;\n\n}\n\n.list_wrap ul{\n  padding: .2rem .4rem .4rem .4rem;\n}\n\n.list_wrap ul p.t {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul .p {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul li .p span {\n  margin-right: .267rem;\n  font-size: .32rem;\n}\n\n.machine_name {\n  font-size: .453rem;\n}\n\n.list_wrap ul li .machine_name span {\n  font-size: .48rem;\n  width: .8rem;\n  height: .8rem;\n  text-align: center;\n  vertical-align: middle;\n  color: #0087ff;\n}\n\n.list_wrap ul li .machine_name span:active {\n  color: #333;\n}\n.hht-WIFIxinhao-ji:before {\n  margin-right: 5px;\n}\n\n.search_wrapa p{\n  text-align: left;\n  height: .8rem;\n  line-height: .8rem;\n  background: #fff;\n  font-size: .373rem;\n  color: #c6c6c6;\n  padding-left: .3rem;\n}\n\n.search_wrapa {\n  padding: .2rem;\n  background:rgb(242, 242, 242);\n}\n\n.noData p{\n  line-height: .8rem;\n  font-size: .4rem;\n  text-align: center;\n  padding: .267rem;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n\n</style>\n\n"]}]}