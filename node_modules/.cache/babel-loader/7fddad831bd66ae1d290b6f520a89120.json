{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\search.vue","mtime":1536801927675},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"vant/es/actionsheet/style\";\nimport _Actionsheet from \"vant/es/actionsheet\";\nimport \"vant/es/search/style\";\nimport _Search from \"vant/es/search\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport { get } from '../../src/util/http.js';\nimport { debounce } from '../../src/util/util.js';\n\nrequire('../../src/util/cookie.js');\n\nexport default {\n  name: 'home',\n  components: {\n    Search: _Search,\n    Actionsheet: _Actionsheet\n  },\n  watch: {\n    value: function value(newVal, oldVal) {\n      // console.log(val,'--------',a)\n      this.searchByKey();\n    }\n  },\n  methods: {\n    onSelect: function onSelect(item) {\n      this.show = false; // console.log(item)/\n\n      if (item.url == 'first') {\n        if (item.type == 'gotop') {\n          console.log('--------------');\n          var el = this.items.splice(this.currentIndex, 1);\n          this.items.unshift(el[0]);\n          console.log(this.actions);\n        } else if (item.type == 'cancel') {\n          this.items.sort(function (a, b) {\n            return a.index - b.index;\n          });\n        }\n\n        return;\n      } else {\n        var opt = {\n          path: item.url + '' + this.selectId\n        };\n        this.selectId = '';\n        this.$router.push(opt);\n      }\n    },\n    set: function set(index, id) {\n      console.log(arguments);\n\n      if (index == 0) {\n        this.actions[this.actions.length - 1].name = '取消置顶';\n        this.actions[this.actions.length - 1].type = 'cancel';\n      } else {\n        this.actions[this.actions.length - 1].name = '置顶';\n        this.actions[this.actions.length - 1].type = 'gotop';\n      }\n\n      this.selectId = id;\n      this.currentIndex = index;\n      this.show = !this.show;\n    },\n    setFrist: function setFrist() {},\n    setDefault: function setDefault() {},\n    toPercent: function toPercent(point) {\n      var str = Number(point * 100).toFixed(1);\n      str += \"%\";\n      return str;\n    },\n    getList: function getList() {\n      var _this = this;\n\n      var opendId = this.userInfo.openid;\n      var s = Cookies.get('openId');\n      get('http://live-smart.com.cn/device/list', {\n        openId: s\n      }).then(function (res) {\n        if (res.code == 10000) {\n          _this.items = res.data;\n\n          _this.items.forEach(function (el, i) {\n            el.probe_type = el.probe_type == 1 ? '内置探头' : '外置探头 ';\n            el.time = formatDatePub(el.report_parse_acquisition_time);\n\n            if (el.report_parse_voltage > 3.6) {\n              // 高\n              el.powerL = 1;\n            } else if (el.report_parse_voltage < 3.6 && el.report_parse_voltage > 3.5) {\n              // 中\n              el.powerL = 2;\n            } else if (el.report_parse_voltage < 3.5 && el.report_parse_voltage > 3.45) {\n              // 低\n              el.powerL = 3;\n            } else {\n              el.powerL = 4;\n            }\n          });\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    searchByKey: debounce(function () {\n      var self = this;\n\n      if (self.value == '') {\n        return;\n        self.items = [];\n      }\n\n      get('http://live-smart.com.cn/device/list', {\n        openId: self.openId,\n        deviceName: self.value\n      }).then(function (res) {\n        if (res.code == 10000) {\n          self.items = res.data;\n          self.items.forEach(function (el, i) {\n            el.probe_type = el.probe_type == 1 ? '内置探头' : '外置探头 ';\n            el.time = formatDatePub(el.report_parse_acquisition_time);\n\n            if (el.report_parse_voltage > 3.6) {\n              // 高\n              el.powerL = 1;\n            } else if (el.report_parse_voltage < 3.6 && el.report_parse_voltage > 3.5) {\n              // 中\n              el.powerL = 2;\n            } else if (el.report_parse_voltage < 3.5 && el.report_parse_voltage > 3.45) {\n              // 低\n              el.powerL = 3;\n            } else {\n              el.powerL = 4;\n            }\n          });\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    }, 500)\n  },\n  data: function data() {\n    return {\n      selectId: '',\n      //当前选择的设备id\n      show: false,\n      isFirst: false,\n      value: '',\n      // 用户输入内容\n      items: [],\n      actions: [{\n        name: '进入设备详情',\n        url: '/xq/'\n      }, {\n        name: '进入温度曲线',\n        url: '/wsd/'\n      }, // {\n      //   name:'进入采集设置',\n      //   url:'cjset/'\n      // },\n      {\n        name: '数据设置',\n        url: '/warn/'\n      }, {\n        name: '进入成员列表'\n      }, {\n        name: '置顶/取消置顶',\n        url: 'first'\n      }]\n    };\n  },\n  mounted: function mounted() {\n    this.openId = Cookies.get('openId');\n  }\n};",{"version":3,"sources":["search.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"home\">\n    <p class=\"title\">支持id  name</p>\n    <div class=\"search_wrap\">\n      <van-search placeholder=\"请输入搜索关键词\" v-model=\"value\" />\n    </div>\n    <div class=\"noData\">\n      <p v-if=\"items.length==0\">没有搜索到相关数据</p>\n    </div>\n    <div class=\"list_wrap\">\n      <ul>\n        <li v-for=\"(item,index) in items\" v-bind:key=\"index\">\n          <p class=\"machine_name p\">{{item.name}} <span class=\"fontFamily hht-shezhi1 fr\" v-on:click=\"set(index,item.wxUserDeviceId)\"></span></p>\n          <p class=\"t\">\n            <span>温湿度计(名称)</span>\n            <span class=\"fontFamily  hht-WIFIxinhao-ji fr\">信号{{item.report_parse_device_signal}}</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji3 fr\" v-if=\"item.powerL=='1'\">高</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji2 fr\"  v-else-if=\"item.powerL=='2'\">中</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji1 fr\" v-else-if=\"item.powerL=='3'\">低</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji fr\" v-else-if=\"item.powerL=='4'\">无</span>\n            <span class=\"fontFamily  hht-dianchidianya_ji fr\" v-else>{{item.power}}</span>\n          </p>\n          <p class=\"wendu p\">\n            <span class=\"fontFamily hht-wendu\">温度：</span>\n            <span>{{item.report_parse_temperature }}℃</span>\n            <span class=\"scope fr \">范围：<span class=\"\">{{item.temperature_low?item.temperature_low:'--'}}-{{item.temperature_high?item.temperature_high:'--'}}</span></span>\n          </p>\n          <p class=\"shidu p\">\n            <span class=\"fontFamily hht-shidu\">湿度：</span>\n            <span>{{item.report_parse_humidity}}</span>\n            <span class=\"scope fr\">范围：<span class=\"\">{{item.humidity_low?item.humidity_low:'--'}}-{{item.humidity_high?item.humidity_high:'--'}}</span></span>\n          </p>\n          <p class=\"info p\">\n            <span>{{item.time}}</span>\n            <span>ID:{{item.device_id}}</span>\n            <span>{{item.probe_type}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <div>\n      <van-actionsheet\n        v-model=\"show\"\n        :actions=\"actions\"\n        @select=\"onSelect\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Search ,Actionsheet} from 'vant'\nimport {get} from '../../src/util/http.js'\nimport {debounce} from '../../src/util/util.js'\nrequire('../../src/util/cookie.js')\nexport default {\n  name: 'home',\n  components: {\n    Search,\n    Actionsheet \n  },\n  watch:{\n    value:function(newVal,oldVal){\n      // console.log(val,'--------',a)\n      this.searchByKey()\n    }\n  },\n  methods:{\n    onSelect(item){\n      this.show = false;\n      // console.log(item)/\n      if(item.url=='first'){\n        if(item.type=='gotop'){\n          console.log('--------------')\n          let el=this.items.splice(this.currentIndex,1)\n          this.items.unshift(el[0])\n          console.log(this.actions)\n        }else if(item.type=='cancel'){\n          this.items.sort((a,b)=>{return a.index-b.index})\n        }\n        return\n      }else {\n        let opt={\n          path:item.url+''+this.selectId\n        }\n        this.selectId=''\n        this.$router.push(opt)\n      }\n    },\n    set(index,id){\n      console.log(arguments)\n      if(index==0){\n        this.actions[this.actions.length-1].name='取消置顶';\n        this.actions[this.actions.length-1].type='cancel';\n      }else {\n        this.actions[this.actions.length-1].name='置顶'\n        this.actions[this.actions.length-1].type='gotop';\n      }\n      this.selectId=id\n      this.currentIndex=index\n      this.show=!this.show\n    },\n    setFrist(){\n\n    },\n    setDefault(){\n\n    },\n    toPercent(point){\n        let str=Number(point*100).toFixed(1);\n        str+=\"%\";\n        return str;\n    },\n    getList(){\n      let opendId=this.userInfo.openid\n      let s=Cookies.get('openId') \n      get('http://live-smart.com.cn/device/list',{openId:s}).then((res)=>{\n        if(res.code==10000){\n          this.items=res.data\n          this.items.forEach((el,i)=>{\n            el.probe_type=el.probe_type==1?'内置探头':'外置探头 '\n            el.time=formatDatePub(el.report_parse_acquisition_time)\n            if(el.report_parse_voltage>3.6){\n              // 高\n              el.powerL=1\n            }else if(el.report_parse_voltage<3.6 && el.report_parse_voltage>3.5 ){\n              // 中\n              el.powerL=2\n            }else if(el.report_parse_voltage<3.5 && el.report_parse_voltage>3.45){\n              // 低\n              el.powerL=3\n            }else {\n               el.powerL=4\n            }\n          })\n        }\n      }).catch((e)=>{\n        console.log(e)\n      })\n    },\n    searchByKey:debounce(\n      function(){\n          let self=this\n          if(self.value==''){\n            return\n            self.items=[]\n          }\n          get('http://live-smart.com.cn/device/list',{openId:self.openId,deviceName:self.value}).then((res)=>{\n          if(res.code==10000){\n            self.items=res.data\n            self.items.forEach((el,i)=>{\n              el.probe_type=el.probe_type==1?'内置探头':'外置探头 '\n              el.time=formatDatePub(el.report_parse_acquisition_time)\n              if(el.report_parse_voltage>3.6){\n                // 高\n                el.powerL=1\n              }else if(el.report_parse_voltage<3.6 && el.report_parse_voltage>3.5 ){\n                // 中\n                el.powerL=2\n              }else if(el.report_parse_voltage<3.5 && el.report_parse_voltage>3.45){\n                // 低\n                el.powerL=3\n              }else {\n                el.powerL=4\n              }\n            })\n          }\n        }).catch((e)=>{\n          console.log(e)\n        })\n      },500)\n  },\n  data(){\n    return {\n      selectId:'',//当前选择的设备id\n      show:false,\n      isFirst:false,\n      value:'', // 用户输入内容\n      items:[],\n      actions:[\n        {\n          name:'进入设备详情',\n          url:'/xq/',\n        },\n        {\n          name:'进入温度曲线',\n          url:'/wsd/'\n        },\n        // {\n        //   name:'进入采集设置',\n        //   url:'cjset/'\n        // },\n        {\n          name:'数据设置',\n          url:'/warn/'\n        },\n        {\n          name:'进入成员列表'\n        },\n        {\n          name:'置顶/取消置顶',\n          url:'first'\n        }\n      ]\n    }\n  },\n  mounted(){\n    this.openId=Cookies.get('openId')  \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nhtml,body {\n  height: 100%;\n  \n}\n\n.c1 {\n  color: #0087ff;\n}\n\n.title {\n  text-align: center;\n  font-size: .4rem;\n  padding: .4rem;\n}\n.home {\n  min-height: 100%;\n\n}\n#app {\n  margin: 0px;\n}\n\n* {\n  margin: 0px;\n  text-align: left\n}\n\n.list_wrap ul li .t span {\n  font-size: .32rem;\n  margin-right: .3rem;\n}\n\n.list_wrap ul li {\n  border-bottom: 1px solid #c6c6c6;\n}\n\n.list_wrap ul li .info {\n  display: flex;\n  flex-direction:row;\n  flex-wrap:nowrap;\n  justify-content:space-between;\n\n}\n\n.list_wrap ul{\n  padding: .2rem .4rem .4rem .4rem;\n}\n\n.list_wrap ul p.t {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul .p {\n  line-height: .933rem;\n  height: .933rem;\n}\n\n.list_wrap ul li .p span {\n  margin-right: .267rem;\n  font-size: .32rem;\n}\n\n.machine_name {\n  font-size: .453rem;\n}\n\n.list_wrap ul li .machine_name span {\n  font-size: .48rem;\n  width: .8rem;\n  height: .8rem;\n  text-align: center;\n  vertical-align: middle;\n  color: #0087ff;\n}\n\n.list_wrap ul li .machine_name span:active {\n  color: #333;\n}\n.hht-WIFIxinhao-ji:before {\n  margin-right: 5px;\n}\n\n.search_wrapa p{\n  text-align: left;\n  height: .8rem;\n  line-height: .8rem;\n  background: #fff;\n  font-size: .373rem;\n  color: #c6c6c6;\n  padding-left: .3rem;\n}\n\n.search_wrapa {\n  padding: .2rem;\n  background:rgb(242, 242, 242);\n}\n\n.noData p{\n  line-height: .8rem;\n  font-size: .4rem;\n  text-align: center;\n  padding: .267rem;\n}\n\n\n</style>\n\n"],"sourceRoot":"src\\views"}]}