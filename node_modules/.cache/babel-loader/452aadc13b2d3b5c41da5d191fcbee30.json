{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\download.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\download.vue","mtime":1537838900575},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// @ is an alias to /src\nimport { DatetimePicker, Actionsheet, Loading, Toast, Dialog } from 'vant';\nimport { get, post } from '../../src/util/http.js';\nimport { formatDatePub, nyr, IsPc } from '../../src/util/util.js';\n\nrequire('../../src/util/cookie.js');\n\nimport axios from 'axios';\nexport default {\n  name: 'home',\n  components: {\n    Loading: Loading,\n    Actionsheet: Actionsheet,\n    Toast: Toast,\n    Dialog: Dialog,\n    DatetimePicker: DatetimePicker\n  },\n  filters: {\n    nyr: nyr\n  },\n  methods: {\n    change: function change(e) {\n      console.log(new Date(e[0]).getTime(), '-------------', new Date(e[1]).getTime());\n    },\n    chooseFile: function chooseFile() {\n      this.$refs.attenceInput.click();\n    },\n    changeFile: function changeFile(e) {\n      this.attence = e.target.files[0].name;\n      this.attenceFile = e.target.files[0];\n    },\n    upFile: function upFile() {\n      var filename = this.attenceFile.name;\n      var arr = filename.split('.');\n      console.log(this.attenceFile);\n\n      if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n        Toast('文件格式错误！');\n        return;\n      }\n\n      var fileData = new window.FormData();\n      fileData.append('file', this.attenceFile);\n      console.log(fileData);\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        } // return\n\n      };\n      axios.post('http://live-smart.com.cn/file/device/import', fileData, config).then(function (res) {\n        console.log(res);\n      }).catch(function (e) {\n        console.log(e);\n      });\n    } //   upFile(){\n    //     let filename = this.attenceFile.name;\n    //       let arr = filename.split('.');\n    //       if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n    //         this.$toast.center('文件格式错误！');\n    //         return;\n    //       }\n    //       let fileData = new window.FormData();\n    //       fileData.append('file', this.attenceFile) \n    //       let filename = this.attenceFile.name;\n    //        let arr = filename.split('.');\n    //        if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n    //          this.$toast.center('文件格式错误！');\n    //          return;\n    //        }\n    //        let fileData = new window.FormData();\n    //        fileData.append('file', this.attenceFile) \n    //        let filename = this.attenceFile.name;\n    //        let arr = filename.split('.');\n    //        if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n    //          this.$toast.center('文件格式错误！');\n    //          return;\n    //        }\n    //        let fileData = new window.FormData();\n    //        fileData.append('file', this.attenceFile)\n    //       //  xhr\n    //       //  xhr.onreadystatechange = () => {\n    //       //   if (xhr.readyState === 4) {\n    //       //   if (xhr.status === 200) {\n    //       //   let response = JSON.parse(xhr.response)\n    //       //   this.$toast.center(response.message)\n    //       //   } else {\n    //       //   let error = this.$emit('upload-error', xhr)\n    //       //   if (error !== false) {\n    //       //     this.$toast.center(xhr.statusText)\n    //       //   }\n    //   }\n    // }\n    //   }\n    //   }\n\n  },\n  data: function data() {\n    return {\n      value1: '',\n      isPc: IsPc(),\n      attence: '',\n      attenceFile: {},\n      info: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    window.addEventListener(\"resize\", function () {\n      _this.isPc = IsPc();\n    });\n  }\n};",{"version":3,"sources":["download.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA,SAAA,cAAA,EAAA,WAAA,EAAA,OAAA,EAAA,KAAA,EAAA,MAAA,QAAA,MAAA;AACA,SAAA,GAAA,EAAA,IAAA,QAAA,wBAAA;AACA,SAAA,aAAA,EAAA,GAAA,EAAA,IAAA,QAAA,wBAAA;;AACA,QAAA,0BAAA;;AACA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,QAAA,MADA;AAEA,cAAA;AACA,oBADA;AAEA,4BAFA;AAGA,gBAHA;AAIA,kBAJA;AAKA;AALA,GAFA;AASA,WAAA;AACA;AADA,GATA;AAYA,WAAA;AACA,UADA,kBACA,CADA,EACA;AACA,cAAA,GAAA,CAAA,IAAA,IAAA,CAAA,EAAA,CAAA,CAAA,EAAA,OAAA,EAAA,EAAA,eAAA,EAAA,IAAA,IAAA,CAAA,EAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,KAHA;AAIA,cAJA,wBAIA;AACA,WAAA,KAAA,CAAA,YAAA,CAAA,KAAA;AACA,KANA;AAOA,cAPA,sBAOA,CAPA,EAOA;AACA,WAAA,OAAA,GAAA,EAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA;AACA,WAAA,WAAA,GAAA,EAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAVA;AAYA,UAZA,oBAYA;AACA,UAAA,WAAA,KAAA,WAAA,CAAA,IAAA;AACA,UAAA,MAAA,SAAA,KAAA,CAAA,GAAA,CAAA;AACA,cAAA,GAAA,CAAA,KAAA,WAAA;;AACA,UAAA,IAAA,CAAA,MAAA,KAAA,IAAA,IAAA,CAAA,MAAA,MAAA,EAAA;AACA,cAAA,SAAA;AACA;AACA;;AACA,UAAA,WAAA,IAAA,OAAA,QAAA,EAAA;AACA,eAAA,MAAA,CAAA,MAAA,EAAA,KAAA,WAAA;AACA,cAAA,GAAA,CAAA,QAAA;AACA,UAAA,SAAA;AACA,iBAAA;AACA,0BAAA;AADA,SADA,CAKA;;AALA,OAAA;AAMA,YAAA,IAAA,CAAA,6CAAA,EAAA,QAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,GAAA;AACA,OAFA,EAEA,KAFA,CAEA,UAAA,CAAA,EAAA;AACA,gBAAA,GAAA,CAAA,CAAA;AACA,OAJA;AAQA,KArCA,CAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA9EA,GAZA;AA4FA,MA5FA,kBA4FA;AACA,WAAA;AACA,cAAA,EADA;AAEA,YAAA,MAFA;AAGA,eAAA,EAHA;AAIA,mBAAA,EAJA;AAKA,YAAA;AALA,KAAA;AAOA,GApGA;AAqGA,SArGA,qBAqGA;AAAA;;AAEA,WAAA,gBAAA,CAAA,QAAA,EAAA,YAAA;AAAA,YAAA,IAAA,GAAA,MAAA;AAAA,KAAA;AACA;AAxGA,CAAA","sourcesContent":["<template>\n  <div class=\"download\">\n    <div v-if=\"isPc\">\n      <h1>慧居科技</h1>\n      <div>\n          <p>请选择导出的开始和结束日期</p>\n         <el-date-picker\n          v-model=\"value1\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          @change=\"change\"\n          >\n        </el-date-picker>\n      </div>\n      <div>\n        <div class=\"panel-body\">\n          <p><strong>注意事项：</strong><br>1、导入文件格式：.xls，.xlsx<br></p>\n          <p style=\"margin-top:10px;\"><strong>考勤导入：</strong><a class=\"btn btn-primary btn-xs \" @click=\"chooseFile\">选择文件</a></p>\n          <p>已选择文件：<em style=\"color:red; font-style:normal;\">{{attence}}</em></p><p>{{info}}</p>\n          <input type=\"file\" style=\"display:none\" name=\"attence\"  @change=\"changeFile($event)\" ref=\"attenceInput\" />\n      </div>\n      <div class=\"panel-footer\">\n          <a class=\"btn btn-primary btn-md\" @click=\"upFile\">确认导入</a>\n      </div>\n      </div>\n    </div>\n    <div v-else>\n      <h1>请用电脑访问</h1>\n    </div>\n\n    \n  \n   \n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { DatetimePicker , Actionsheet ,Loading,Toast ,Dialog } from 'vant'\nimport {get,post} from '../../src/util/http.js'\nimport {formatDatePub,nyr,IsPc} from '../../src/util/util.js'\nrequire('../../src/util/cookie.js')\nimport axios from 'axios';\nexport default {\n  name: 'home',\n  components: {\n    Loading,\n    Actionsheet ,\n    Toast,\n    Dialog,\n    DatetimePicker\n  },\n  filters:{\n    nyr\n  },\n  methods:{\n    change(e){\n      console.log(new Date(e[0]).getTime(),'-------------',new Date(e[1]).getTime())\n    },\n    chooseFile(){\n      this.$refs.attenceInput.click();\n    },\n    changeFile (e) {\n      this.attence = e.target.files[0].name;\n      this.attenceFile = e.target.files[0];\n    },\n\n    upFile(){\n      let filename = this.attenceFile.name;\n      let arr = filename.split('.');\n      console.log(this.attenceFile)\n      if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n        Toast('文件格式错误！');\n        return;\n      }\n      let fileData = new window.FormData();\n      fileData.append('file', this.attenceFile);\n      console.log(fileData)\n      let config={\n        headers:{\n          'Content-Type':'multipart/form-data'\n        }\n      }\n      // return\n      axios.post('http://live-smart.com.cn/file/device/import',fileData,config).then((res)=>{\n        console.log(res)\n      }).catch((e)=>{\n        console.log(e)\n      })\n\n\n\n    }\n\n  //   upFile(){\n  //     let filename = this.attenceFile.name;\n  //       let arr = filename.split('.');\n  //       if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n  //         this.$toast.center('文件格式错误！');\n  //         return;\n  //       }\n  //       let fileData = new window.FormData();\n  //       fileData.append('file', this.attenceFile) \n  //       let filename = this.attenceFile.name;\n  //        let arr = filename.split('.');\n  //        if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n  //          this.$toast.center('文件格式错误！');\n  //          return;\n  //        }\n  //        let fileData = new window.FormData();\n  //        fileData.append('file', this.attenceFile) \n  //        let filename = this.attenceFile.name;\n  //        let arr = filename.split('.');\n  //        if (arr[1] !== 'xls' && arr[1] !== 'xlsx') {\n  //          this.$toast.center('文件格式错误！');\n  //          return;\n  //        }\n  //        let fileData = new window.FormData();\n  //        fileData.append('file', this.attenceFile)\n  //       //  xhr\n  //       //  xhr.onreadystatechange = () => {\n  //       //   if (xhr.readyState === 4) {\n  //       //   if (xhr.status === 200) {\n  //       //   let response = JSON.parse(xhr.response)\n  //       //   this.$toast.center(response.message)\n  //       //   } else {\n  //       //   let error = this.$emit('upload-error', xhr)\n  //       //   if (error !== false) {\n  //       //     this.$toast.center(xhr.statusText)\n  //       //   }\n  //   }\n  // }\n  //   }\n  //   }\n  },\n  data(){\n    return {\n      value1:'',\n      isPc:IsPc(),\n      attence:'',\n      attenceFile:{},\n      info:{}\n    }\n  },\n  mounted(){\n\n   window.addEventListener(\"resize\", () => {this.isPc=IsPc() });\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n  body {\n    width: 100% !important;\n    max-width: 100% !important;\n  }\n  .date {\n    width: 300px;\n    margin: 0 auto;\n  }\n\n</style>\n"],"sourceRoot":"src\\views"}]}