{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\warn.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\warn.vue","mtime":1537493721111},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// @ is an alias to /src\nimport { get, post } from '../../src/util/http.js';\nimport { Switch, Dialog, Actionsheet, Loading, Toast } from 'vant';\nexport default {\n  name: 'warn',\n  components: {\n    Switch: Switch,\n    Dialog: Dialog,\n    Loading: Loading,\n    Toast: Toast,\n    Actionsheet: Actionsheet\n  },\n  filters: {\n    formattingType: function formattingType(val) {\n      if (typeof val != 'number') return val;\n\n      switch (val) {\n        case 3600:\n          return '1小时';\n          break;\n\n        case 1800:\n          return '30分钟';\n          break;\n\n        case 300:\n          return '5分钟';\n          break;\n\n        case 60:\n          return '1分钟';\n          break;\n\n        case 600:\n          return '10分钟';\n          break;\n\n        case 21600:\n          return '6个小时';\n          break;\n\n        case 43200:\n          return '12个小时';\n          break;\n\n        case 86400:\n          return '24个小时';\n          break;\n      }\n    }\n  },\n  methods: {\n    onInput: function onInput(checked) {\n      var _this2 = this;\n\n      Dialog.confirm({\n        title: '提醒',\n        message: '是否切换开关？'\n      }).then(function () {\n        _this2.loading = true;\n\n        _this2.switchBtn();\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    switchBtn: function switchBtn() {\n      var _this3 = this;\n\n      post('/device/setting/software', {\n        wxUserDeviceId: this.deviceId,\n        alarmSwitch: !this.checked\n      }).then(function (res) {\n        if (res.code == 10000) {\n          _this3.checked = !_this3.checked;\n          _this3.loading = false;\n        } else {\n          _this3.loading = false;\n          Toast('切换失败，稍后再试！');\n        }\n      }).catch(function (res) {\n        _this3.loading = false;\n        Toast('切换失败，稍后再试！');\n      });\n    },\n    onSelect: function onSelect(item) {\n      console.log(item);\n\n      var _this = this;\n\n      if (item.type == 'cj') {\n        console.log('采集');\n        this.loading = true;\n        this.samplingInterval = item.val;\n\n        var cb = function cb() {\n          _this.show = false;\n          _this.loading = false;\n          _this.info.sampling_interval = item.val;\n          _this.samplingInterval = '';\n        };\n\n        this.submitParam(cb);\n      } else if (item.type == 'bj') {\n        console.log('报警');\n        this.loading = true;\n        this.alarmInterval = item.val;\n\n        var _cb = function _cb() {\n          _this.show = false;\n          _this.loading = false;\n          _this.info.alarm_interval = item.val;\n          _this.alarmInterval = '';\n        };\n\n        this.submitParam(_cb);\n      } else if (item.type == 'sb') {\n        console.log('上报');\n        this.loading = true;\n        this.uploadInterval = item.val;\n\n        var _cb2 = function _cb2() {\n          _this.show = false;\n          _this.loading = false;\n          _this.info.upload_interval = item.val;\n          _this.uploadInterval = '';\n        };\n\n        this.submitParam(_cb2);\n      }\n    },\n    edit: function edit() {\n      this.show = true;\n    },\n    setModelVal: function setModelVal() {\n      this.temperatureHigh = this.info.temperature_high;\n      this.temperatureLow = this.info.temperature_low;\n      this.humidityHigh = this.info.humidity_high;\n      this.humidityLow = this.info.humidity_low;\n    },\n    // 修改温度范围\n    modificationWenDu: function modificationWenDu() {\n      this.wdDialogShow = true;\n      this.setModelVal();\n    },\n    // 校验温度 范围是否合法\n    checkoutWD: function checkoutWD(cb) {\n      var callback = cb || function () {};\n\n      if (this.temperatureLow === '') {\n        console.log(this.temperatureLow, '----');\n        Toast('温度下限不能为空');\n        cb(false);\n        return;\n      }\n\n      if (this.temperatureHigh === '') {\n        Toast('温度上限不能为空');\n        cb(false);\n        return;\n      }\n\n      if (!this.isNumber(this.temperatureLow)) {\n        Toast('请输入正确的温度下线');\n        cb(false);\n        return;\n      }\n\n      if (!this.isNumber(this.temperatureHigh)) {\n        Toast('请输入正确的温度上线');\n        cb(false);\n        return;\n      } // 保留两位小数 不做四舍五入 \n\n\n      this.temperatureHigh = this.toFixedTow(this.temperatureHigh);\n      this.temperatureLow = this.toFixedTow(this.temperatureLow); // 换成number\n\n      this.temperatureHigh = parseFloat(this.temperatureHigh);\n      this.temperatureLow = parseFloat(this.temperatureLow);\n\n      if (this.temperatureLow < -655.36) {\n        Toast('下线不能小于-655.36');\n        cb(false);\n        return;\n      }\n\n      if (this.temperatureHigh > 655.35) {\n        Toast('上线不能大于655.35');\n        cb(false);\n        return;\n      }\n\n      if (this.temperatureHigh < this.temperatureLow) {\n        console.log(this.temperatureHigh, '------------', this.temperatureLow);\n        Toast('下线不能大于上线');\n        cb(false);\n        return;\n      }\n\n      if (this.temperatureHigh === this.temperatureLow) {\n        console.log(this.temperatureHigh, '------------', this.temperatureLow);\n        Toast('下线不能等于上线');\n        cb(false);\n        return;\n      }\n\n      console.log(this.temperatureHigh, '------', this.info.temperature_high, '校验合格', this.temperatureLow, '-----', this.info.temperature_low);\n\n      if (this.temperatureHigh == this.info.temperature_high && this.temperatureLow == this.info.temperature_low) {\n        Toast('与当前值一致,不能提交...');\n        cb(false);\n        return;\n      }\n\n      var _this = this;\n\n      var cbb = function cbb() {\n        _this.info.temperature_low = _this.temperatureLow;\n        _this.info.temperature_high = _this.temperatureHigh;\n        _this.temperatureLow = _this.temperatureLow;\n        _this.temperatureHigh = _this.temperatureHigh;\n      };\n\n      this.submitParam(cb, cbb);\n    },\n    toFixedTow: function toFixedTow(val) {\n      var reg = /([0-9]+.[0-9]{2})[0-9]*/;\n      val = (val + '').replace(reg, \"$1\");\n      return val;\n    },\n    // 校验湿度 范围是否合法\n    checkoutSD: function checkoutSD(cb) {\n      var callback = cb || function () {}; // humidityHigh:'',//  湿度上限 \n      // humidityLow :'',//  湿度下限 \n\n\n      if (this.humidityLow === '') {\n        Toast('湿度下限不能为空');\n        cb(false);\n        return;\n      }\n\n      if (this.humidityHigh === '') {\n        Toast('湿度上限不能为空');\n        cb(false);\n        return;\n      }\n\n      if (!this.isNumber(this.humidityLow)) {\n        Toast('请输入正确的湿度下线');\n        cb(false);\n        return;\n      }\n\n      if (!this.isNumber(this.humidityHigh)) {\n        Toast('请输入正确的湿度上线');\n        cb(false);\n        return;\n      } // 保留两位小数 不做四舍五入 \n\n\n      this.humidityLow = this.toFixedTow(this.humidityLow);\n      this.humidityHigh = this.toFixedTow(this.humidityHigh); // 换成number\n\n      this.humidityLow = parseFloat(this.humidityLow);\n      this.humidityHigh = parseFloat(this.humidityHigh);\n\n      if (this.humidityLow < 0) {\n        Toast('下线不能小于0');\n        cb(false);\n        return;\n      }\n\n      if (this.humidityHigh > 100) {\n        Toast('上线不能大于100');\n        cb(false);\n        return;\n      }\n\n      if (this.humidityHigh < this.humidityLow) {\n        console.log(this.humidityHigh, '------范围------', this.humidityLow);\n        Toast('下线不能大于上线');\n        cb(false);\n        return;\n      }\n\n      if (this.humidityHigh === this.humidityLow) {\n        console.log(this.humidityHigh, '------范围------', this.humidityLow);\n        Toast('下线不能等于上线');\n        cb(false);\n        return;\n      }\n\n      console.log(this.humidityHigh, '-----', this.info.humidity_high, '校验合格', this.humidityLow, '----', this.info.humidity_low);\n\n      if (this.humidityHigh == this.info.humidity_high && this.humidityLow == this.info.humidity_low) {\n        Toast('与当前值一致,不能提交...');\n        cb(false);\n        return;\n      }\n\n      var _this = this;\n\n      var cbb = function cbb() {\n        _this.info.humidity_low = _this.humidityLow;\n        _this.info.humidity_high = _this.humidityHigh;\n        _this.humidityLow = _this.humidityLow;\n        _this.humidityHigh = _this.humidityHigh;\n      };\n\n      this.submitParam(cb, cbb);\n    },\n    WDbeforeClose: function WDbeforeClose(action, done) {\n      if (action == 'confirm') {\n        this.checkoutWD(done); // setTimeout(done, 1000);\n      } else {\n        done();\n      }\n    },\n    SDbeforeClose: function SDbeforeClose(action, done) {\n      if (action == 'confirm') {\n        // setTimeout(done, 1000);\n        this.checkoutSD(done);\n      } else {\n        done();\n      }\n    },\n    unInfo: function unInfo(opt) {\n      var obj = opt || {}; // if(obj.samplingInterval){\n      //   this.info.\n      // }\n    },\n    submitParam: function submitParam(cb, cbb) {\n      var _this4 = this;\n\n      var callback = cb || function () {};\n\n      var callbackb = cbb || function () {};\n\n      var param = {\n        deviceId: this.info.device_id,\n        openId: Cookies.get('openId'),\n        samplingInterval: this.samplingInterval,\n        uploadInterval: this.uploadInterval,\n        alarmInterval: this.alarmInterval,\n        temperatureHigh: this.temperatureHigh,\n        temperatureLow: this.temperatureLow,\n        humidityHigh: this.humidityHigh,\n        humidityLow: this.humidityLow\n      };\n      console.log(param);\n      post('/device/setting/hardware', param).then(function (res) {\n        if (res.code == 10000) {\n          callback && callback();\n          callbackb && callbackb();\n          Toast('修改成功！');\n          _this4.loading = false;\n        } else {\n          Toast('修改失败，稍后再试！');\n          _this4.loading = false;\n        }\n      }).catch(function (res) {\n        console.log(res, '-----------------');\n        _this4.loading = false;\n        Toast('修改失败，稍后再试！');\n      });\n    },\n    modificationSD: function modificationSD() {\n      this.sdDialogShow = true;\n      this.setModelVal();\n    },\n    isNumber: function isNumber(val) {\n      var regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\n\n      var regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数\n\n      if (regPos.test(val) || regNeg.test(val)) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    getData: function getData() {\n      var _this5 = this;\n\n      get('/device/view', {\n        wxUserDeviceId: this.deviceId\n      }).then(function (res) {\n        if (res.code == 10000) {\n          _this5.info = res.data;\n          _this5.temperatureHigh = res.data.temperature_high;\n          _this5.temperatureLow = res.data.temperature_low;\n          _this5.humidityHigh = res.data.humidity_high;\n          _this5.humidityLow = res.data.humidity_low;\n          _this5.checked = res.data.alarm_switch;\n          _this5.loading = false;\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    // 报警编辑\n    alarmEdit: function alarmEdit() {\n      // 30 1 6 12 24\n      var data = [{\n        name: '30分钟',\n        val: 1800,\n        type: 'bj'\n      }, {\n        name: '1小时',\n        val: 3600,\n        type: 'bj'\n      }, {\n        name: '6小时',\n        val: 21600,\n        type: 'bj'\n      }, {\n        name: '12小时',\n        val: 43200,\n        type: 'bj'\n      }, {\n        name: '24小时',\n        val: 86400,\n        type: 'bj'\n      }];\n      this.mod = data;\n      this.show = true;\n    },\n    // 上报间隔\n    updateEedit: function updateEedit() {\n      //  10 30 1 12\n      var data = [{\n        name: '10分钟',\n        val: 600,\n        type: 'sb'\n      }, {\n        name: '30分钟',\n        val: 1800,\n        type: 'sb'\n      }, {\n        name: '1小时',\n        val: 3600,\n        type: 'sb'\n      }, {\n        name: '12小时',\n        val: 43200,\n        type: 'sb'\n      }];\n      this.mod = data;\n      this.show = true;\n    },\n    // 采集编辑\n    cjEdit: function cjEdit() {\n      var data = [{\n        name: '1分钟',\n        val: 60,\n        type: 'cj'\n      }, {\n        name: '5分钟',\n        val: 300,\n        type: 'cj'\n      }, {\n        name: '10分钟',\n        val: 600,\n        type: 'cj'\n      }, {\n        name: '1小时',\n        val: 3600,\n        type: 'cj'\n      }];\n      this.mod = data;\n      this.show = true;\n    }\n  },\n  data: function data() {\n    return {\n      checked: false,\n      // 报警开关  \n      show: false,\n      // 底部弹框 显示 隐藏\n      deviceId: '',\n      info: {},\n      // 设备信息\n      loading: false,\n      samplingInterval: '',\n      //采集间隔\n      uploadInterval: '',\n      //上报间隔\n      alarmInterval: '',\n      //报警间隔 \n      temperatureHigh: '',\n      //  温度上限 \n      temperatureLow: '',\n      //  温度下限\n      humidityHigh: '',\n      //  湿度上限 \n      humidityLow: '',\n      //  湿度下限 \n      wdDialogShow: false,\n      // 温度编辑弹窗显示\n      sdDialogShow: false,\n      // 湿度编辑弹窗显示\n      mod: [] // 底部弹出框的内容\n\n    };\n  },\n  mounted: function mounted() {\n    console.log(this.$route.params, '-----------params');\n    this.deviceId = this.$route.params.id;\n    this.getData();\n    this.loading = true;\n  }\n};",{"version":3,"sources":["warn.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"warn\">\n    <p class=\"title\">数据设置</p>\n    <ul>\n      <li>\n        <span>报警开关</span>\n        <span class=\"fr mar\"><van-switch :value=\"checked\" size=\"24px\" @input=\"onInput\" /></span>\n      </li>\n      <li>\n        <span>报警间隔 </span>\n        <span class=\"fr\" v-on:click=\"alarmEdit\">{{ info.alarm_interval | formattingType}} <span class=\"fontFamily hht-xiugai-copy aling\"></span></span>\n      </li>\n      <li>\n        <span>采集间隔 </span>\n        <span class=\"fr\" v-on:click=\"cjEdit\">{{ info.sampling_interval | formattingType}} <span class=\"fontFamily hht-xiugai-copy aling\"></span></span>\n      </li>\n      <li>\n        <span>上报间隔 </span>\n        <span class=\"fr\" v-on:click=\"updateEedit\">{{ info.upload_interval | formattingType}} <span class=\"fontFamily hht-xiugai-copy aling\"></span></span>\n      </li>\n      <li class=\"setmod\">\n        <span>正常温度范围</span>\n        <span class=\"fr \" v-on:click=\"modificationWenDu\"><span>{{info.temperature_low}} <span class=\"fontFamily hht-xiugai-copy aling\"></span></span> ~ <span >{{info.temperature_high}}<span  class=\"fontFamily hht-xiugai-copy aling\"></span> </span>  </span>\n      </li>\n      <li>\n        <span>正常湿度范围</span>\n        <span class=\"fr \" v-on:click=\"modificationSD\"><span>{{info.humidity_low}} <span class=\"fontFamily hht-xiugai-copy aling\"></span></span> ~ <span >{{info.humidity_high}} <span  class=\"fontFamily hht-xiugai-copy aling\"></span> </span>  </span>\n      </li>\n    </ul>\n    <div>\n      <van-actionsheet\n        v-model=\"show\"\n        :actions=\"mod\"\n        @select=\"onSelect\"\n      />\n    </div>\n\n    <div class=\"load\" v-if=\"loading\">\n      <van-loading color=\"#c1c1c1\" size=\"40px\"/>\n    </div>\n\n    <div class=\"dialog_wd\">\n      <van-dialog\n        v-model=\"wdDialogShow\"\n        show-cancel-button\n        :before-close=\"WDbeforeClose\"\n      >\n        <van-field\n          v-model=\"temperatureLow\"\n          label=\"温度下线\"\n          placeholder=\"请输入两位小数\"\n        />\n        <van-field\n          v-model=\"temperatureHigh\"\n          label=\"温度上线\"\n          placeholder=\"请输入两位小数\"\n        />\n      </van-dialog>\n    </div>\n    <div class=\"dialog_sd\">\n      <van-dialog\n        v-model=\"sdDialogShow\"\n        show-cancel-button\n        :before-close=\"SDbeforeClose\"\n      >\n        <van-field\n          v-model=\"humidityLow\"\n          label=\"湿度下线\"\n          placeholder=\"请输入两位小数\"\n        />\n        <van-field\n          v-model=\"humidityHigh\"\n          label=\"湿度上线\"\n          placeholder=\"请输入两位小数\"\n        />\n      </van-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport {get,post} from '../../src/util/http.js'\nimport { Switch ,Dialog,Actionsheet,Loading,Toast} from 'vant'\n\nexport default {\n  name: 'warn',\n  components: {\n    Switch,\n    Dialog,\n    Loading,\n    Toast,\n    Actionsheet\n  },\n  filters:{\n    formattingType(val){\n      if(typeof val !='number') return val\n      switch(val)\n      {\n        case 3600:\n        return '1小时'\n        break;\n\n        case 1800:\n        return '30分钟'\n        break;\n\n        case 300:\n        return '5分钟'\n        break;\n\n        case 60:\n        return '1分钟'\n        break;\n\n        case 600:\n        return '10分钟'\n        break;\n\n        case 21600:\n        return '6个小时'\n        break;\n\n        case 43200:\n        return '12个小时'\n        break;\n\n        case 86400:\n        return '24个小时'\n        break;\n      }\n    }\n  },\n  methods:{\n    onInput(checked){\n      Dialog.confirm({\n        title: '提醒',\n        message: '是否切换开关？'\n      }).then(() => {\n        this.loading=true\n        this.switchBtn()\n      }).catch((e)=>{\n        console.log(e)\n      });\n    },\n    switchBtn (){\n      post('/device/setting/software',{\n        wxUserDeviceId:this.deviceId,\n        alarmSwitch:!this.checked\n      }).then((res)=>{\n        if(res.code==10000){\n          this.checked = !this.checked;\n          this.loading=false\n        }else {\n          this.loading=false\n          Toast('切换失败，稍后再试！')\n        }\n      }).catch((res)=>{\n        this.loading=false\n        Toast('切换失败，稍后再试！')\n      })\n    },\n    onSelect(item){\n      console.log(item)\n      let _this=this\n      if(item.type=='cj'){\n        console.log('采集')\n        this.loading=true\n        this.samplingInterval=item.val\n        let cb=function(){\n          _this.show=false\n          _this.loading=false\n          _this.info.sampling_interval=item.val\n          _this.samplingInterval=''\n        }\n\n        this.submitParam(cb)\n      }else if(item.type=='bj'){\n        console.log('报警')\n        this.loading=true\n        this.alarmInterval=item.val\n        let cb=function(){\n          _this.show=false\n          _this.loading=false\n          _this.info.alarm_interval=item.val\n          _this.alarmInterval=''\n        }\n        this.submitParam(cb)\n      }else if(item.type=='sb'){\n        console.log('上报')\n        this.loading=true\n        this.uploadInterval=item.val\n        let cb=function(){\n          _this.show=false\n          _this.loading=false\n          _this.info.upload_interval=item.val\n          _this.uploadInterval=''\n        }\n        this.submitParam(cb)\n      }\n    },\n    edit(){\n      this.show = true;\n    },\n\n    setModelVal(){\n      this.temperatureHigh=this.info.temperature_high\n      this.temperatureLow=this.info.temperature_low\n\n      this.humidityHigh=this.info.humidity_high\n      this.humidityLow=this.info.humidity_low\n    },\n\n    // 修改温度范围\n    modificationWenDu(){\n      this.wdDialogShow=true\n      this.setModelVal()\n    },\n\n    // 校验温度 范围是否合法\n    checkoutWD(cb){\n      let callback=cb|| function(){}\n      \n      if(this.temperatureLow===''){\n        console.log(this.temperatureLow,'----')\n        Toast('温度下限不能为空')\n        cb(false)\n        return\n      }\n\n      if(this.temperatureHigh===''){\n        Toast('温度上限不能为空')\n        cb(false)\n        return\n      }\n\n      if(!this.isNumber(this.temperatureLow)){\n        Toast('请输入正确的温度下线')\n        cb(false)\n        return\n      }\n\n      if(!this.isNumber(this.temperatureHigh)){\n        Toast('请输入正确的温度上线')\n        cb(false)\n        return\n      }\n\n      // 保留两位小数 不做四舍五入 \n      this.temperatureHigh=this.toFixedTow(this.temperatureHigh)\n      this.temperatureLow=this.toFixedTow(this.temperatureLow)\n\n      // 换成number\n      this.temperatureHigh=parseFloat(this.temperatureHigh)\n      this.temperatureLow=parseFloat(this.temperatureLow)\n\n      if(this.temperatureLow<-655.36){\n        Toast('下线不能小于-655.36')\n        cb(false)\n        return\n      }\n\n      if(this.temperatureHigh>655.35){\n        Toast('上线不能大于655.35')\n        cb(false)\n        return\n      }\n\n      if(this.temperatureHigh<this.temperatureLow){\n        console.log(this.temperatureHigh,'------------',this.temperatureLow)\n        Toast('下线不能大于上线')\n        cb(false)\n        return\n      }\n\n      if(this.temperatureHigh===this.temperatureLow){\n        console.log(this.temperatureHigh,'------------',this.temperatureLow)\n        Toast('下线不能等于上线')\n        cb(false)\n        return\n      }\n\n\n      console.log(this.temperatureHigh,'------',this.info.temperature_high,'校验合格',this.temperatureLow,'-----',this.info.temperature_low)\n      if(this.temperatureHigh==this.info.temperature_high && this.temperatureLow==this.info.temperature_low){\n        Toast('与当前值一致,不能提交...')\n        cb(false)\n        return\n      }\n\n\n      let _this=this\n      let cbb=function(){\n        _this.info.temperature_low=_this.temperatureLow\n        _this.info.temperature_high=_this.temperatureHigh\n        _this.temperatureLow=_this.temperatureLow\n        _this.temperatureHigh=_this.temperatureHigh\n      }\n      this.submitParam(cb,cbb)\n    },\n\n    toFixedTow(val){\n      let reg = /([0-9]+.[0-9]{2})[0-9]*/;\n      val=(val+'').replace(reg,\"$1\")\n      return val\n    },\n\n    // 校验湿度 范围是否合法\n    checkoutSD(cb){\n      let callback=cb|| function(){}\n      // humidityHigh:'',//  湿度上限 \n      // humidityLow :'',//  湿度下限 \n      if(this.humidityLow===''){\n        Toast('湿度下限不能为空')\n        cb(false)\n        return\n      }\n\n      if(this.humidityHigh===''){\n        Toast('湿度上限不能为空')\n        cb(false)\n        return\n      }\n\n      if(!this.isNumber(this.humidityLow)){\n        Toast('请输入正确的湿度下线')\n        cb(false)\n        return\n      }\n\n      if(!this.isNumber(this.humidityHigh)){\n        Toast('请输入正确的湿度上线')\n        cb(false)\n        return\n      }\n\n      // 保留两位小数 不做四舍五入 \n      this.humidityLow=this.toFixedTow(this.humidityLow)\n      this.humidityHigh=this.toFixedTow(this.humidityHigh)\n\n      // 换成number\n      this.humidityLow=parseFloat(this.humidityLow)\n      this.humidityHigh=parseFloat(this.humidityHigh)\n\n      if(this.humidityLow<0){\n        Toast('下线不能小于0')\n        cb(false)\n        return\n      }\n\n      if(this.humidityHigh>100){\n        Toast('上线不能大于100')\n        cb(false)\n        return\n      }\n\n      if(this.humidityHigh<this.humidityLow){\n        console.log(this.humidityHigh,'------范围------',this.humidityLow)\n        Toast('下线不能大于上线')\n        cb(false)\n        return\n      }\n\n      if(this.humidityHigh===this.humidityLow){\n        console.log(this.humidityHigh,'------范围------',this.humidityLow)\n        Toast('下线不能等于上线')\n        cb(false)\n        return\n      }\n\n       console.log(this.humidityHigh,'-----',this.info.humidity_high,'校验合格',this.humidityLow,'----',this.info.humidity_low)\n\n      if(this.humidityHigh==this.info.humidity_high && this.humidityLow==this.info.humidity_low){\n        Toast('与当前值一致,不能提交...')\n        cb(false)\n        return\n      }\n\n      var _this=this\n      let cbb=function(){\n        _this.info.humidity_low=_this.humidityLow\n        _this.info.humidity_high=_this.humidityHigh\n        _this.humidityLow=_this.humidityLow\n        _this.humidityHigh=_this.humidityHigh\n      }\n      this.submitParam(cb,cbb)\n\n    },\n\n    WDbeforeClose(action,done){\n      if(action=='confirm'){\n        this.checkoutWD(done)\n        // setTimeout(done, 1000);\n      }else{\n        done()\n      }\n    },\n    SDbeforeClose(action,done){\n      if(action=='confirm'){\n        // setTimeout(done, 1000);\n        this.checkoutSD(done)\n      }else{\n        done()\n      }\n    },\n\n    unInfo(opt){\n      let obj=opt || {}\n      // if(obj.samplingInterval){\n      //   this.info.\n      // }\n    },\n\n    submitParam(cb,cbb){\n      let callback=cb || function(){}\n      let callbackb=cbb || function(){}\n      let param={\n          deviceId :this.info.device_id,\n          openId:Cookies.get('openId'),\n          samplingInterval:this.samplingInterval,\n          uploadInterval:this.uploadInterval,\n          alarmInterval:this.alarmInterval,\n          temperatureHigh:this.temperatureHigh,\n          temperatureLow:this.temperatureLow,\n          humidityHigh:this.humidityHigh,\n          humidityLow :this.humidityLow\n      }\n      console.log(param)\n      post('/device/setting/hardware',param).then((res)=>{\n        if(res.code==10000){\n          callback && callback()\n          callbackb && callbackb()\n          Toast('修改成功！')\n          this.loading=false\n        }else {\n          Toast('修改失败，稍后再试！')\n          this.loading=false\n        }\n      }).catch((res)=>{\n        console.log(res,'-----------------')\n        this.loading=false\n        Toast('修改失败，稍后再试！')\n      })\n    },\n    modificationSD(){\n      this.sdDialogShow=true\n      this.setModelVal()\n    },\n\n    isNumber(val){\n      let regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\n      let regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数\n      if(regPos.test(val) || regNeg.test(val)){\n          return true;\n      }else{\n          return false;\n      }\n    },\n    getData(){\n      get('/device/view',{wxUserDeviceId:this.deviceId}).then((res)=>{\n        if(res.code==10000){\n          this.info=res.data\n          this.temperatureHigh=res.data.temperature_high\n          this.temperatureLow=res.data.temperature_low\n\n          this.humidityHigh=res.data.humidity_high\n          this.humidityLow=res.data.humidity_low\n\n          this.checked=res.data.alarm_switch\n          this.loading=false\n        }\n      }).catch((e)=>{\n        console.log(e)\n      })\n    },\n\n    // 报警编辑\n    alarmEdit(){\n      // 30 1 6 12 24\n      let data=[\n        {\n          name:'30分钟',\n          val:1800,\n          type:'bj'\n        },\n        {\n          name:'1小时',\n          val:3600,\n          type:'bj'\n        },\n        {\n          name:'6小时',\n          val:21600,\n          type:'bj'\n        },\n        {\n          name:'12小时',\n          val:43200,\n          type:'bj'\n        },\n          {\n          name:'24小时',\n          val:86400,\n          type:'bj'\n        },\n      ]\n      this.mod=data\n      this.show = true;\n    },\n\n    // 上报间隔\n    updateEedit(){\n      //  10 30 1 12\n      let data=[\n        {\n          name:'10分钟',\n          val:600,\n          type:'sb'\n        },\n        {\n          name:'30分钟',\n          val:1800,\n          type:'sb'\n        },\n        {\n          name:'1小时',\n          val:3600,\n          type:'sb'\n        },\n        {\n          name:'12小时',\n          val:43200,\n          type:'sb'\n        }\n      ]\n      this.mod=data\n      this.show = true;\n    },\n\n    // 采集编辑\n    cjEdit(){\n      let data=[\n        {\n          name:'1分钟',\n          val:60,\n          type:'cj'\n        },\n        {\n          name:'5分钟',\n          val:300,\n          type:'cj'\n        },\n        {\n          name:'10分钟',\n          val:600,\n          type:'cj'\n        },\n        {\n          name:'1小时',\n          val:3600,\n          type:'cj'\n        }\n      ]\n      this.mod=data\n      this.show = true;\n    }\n  },\n  data(){\n    return {\n      checked:false, // 报警开关  \n      show:false, // 底部弹框 显示 隐藏\n      deviceId:'',\n      info:{}, // 设备信息\n      loading:false, \n\n      samplingInterval:'', //采集间隔\n      uploadInterval:'',//上报间隔\n      alarmInterval:'',//报警间隔 \n\n      temperatureHigh:'',//  温度上限 \n      temperatureLow:'',//  温度下限\n\n      humidityHigh:'',//  湿度上限 \n      humidityLow :'',//  湿度下限 \n\n      wdDialogShow:false ,// 温度编辑弹窗显示\n      sdDialogShow:false,// 湿度编辑弹窗显示\n      mod:[] ,// 底部弹出框的内容\n    }\n  },\n  mounted(){\n    console.log(this.$route.params,'-----------params')\n    this.deviceId=this.$route.params.id\n    this.getData()\n    this.loading=true\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.warn ul li {\n  height: 1.333rem;\n  line-height: 1.333rem;\n  text-align: left;\n  border-bottom: 1px solid #c6c6c6;\n}\n\n.warn ul {\n  padding: .4rem;\n}\n\n.warn .aling {\n  vertical-align: middle;\n}\n\n.warn .mar {\n  margin-top: .187rem;\n  height: 70%;\n}\n\n.title {\n  font-size: .4rem;\n  padding: .4rem;\n  text-align: center;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n</style>"],"sourceRoot":"src\\views"}]}