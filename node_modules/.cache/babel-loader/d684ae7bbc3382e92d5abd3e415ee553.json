{"remainingRequest":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\vant\\vueUI\\waibao\\waibao\\src\\main.js","dependencies":[{"path":"D:\\vant\\vueUI\\waibao\\waibao\\src\\main.js","mtime":1542608033650},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport Vant from 'vant';\nimport 'vant/lib/vant-css/index.css';\nimport echarts from 'echarts';\nimport './assets/icon/iconfont.css';\nimport { get, post } from '../src/util/http';\n\nrequire('../src/util/cookie');\n\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nVue.use(ElementUI);\nVue.use(Vant);\nVue.prototype.$echarts = echarts;\nVue.config.productionTip = false;\nrouter.beforeEach(function (to, from, next) {\n  if (to.meta.title) {\n    document.title = to.meta.title;\n  } // var key='oJ3fKwNf3IkVFiAGKVu2WE-0i918'\n  // Cookies('openId',key,{ expires: new Date(new Date().getTime() + (2*24*60*60 * 1000))})\n\n\n  var href = encodeURIComponent(window.location.href);\n\n  if (Cookies.get('openId')) {\n    next();\n  } else {\n    var code = window.location.search.split('&')[0].split('=')[1];\n\n    if (code) {\n      // document.write( window.location.href,'--------------',window.location.search)\n      // 用code  换openId\n      get('/wx/getWebTokenByCode', {\n        code: code\n      }).then(function (res) {\n        if (res.code == 10000 && res.data != undefined && res.data.openid != '' && res.data.openid != undefined) {\n          Cookies('openId', res.data.openid, {\n            expires: new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000)\n          });\n          next();\n        } else {\n          // code 失效 或者接口挂了\n          window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=' + href + '&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect';\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    } else {\n      window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri=' + href + '&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect';\n    }\n  }\n});\nnew Vue({\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["D:\\vant\\vueUI\\waibao\\waibao\\src\\main.js"],"names":["Vue","App","router","store","Vant","echarts","get","post","require","ElementUI","use","prototype","$echarts","config","productionTip","beforeEach","to","from","next","meta","title","document","href","encodeURIComponent","window","location","Cookies","code","search","split","then","res","data","undefined","openid","expires","Date","getTime","catch","e","console","log","render","h","$mount"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAO,6BAAP;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAO,4BAAP;AACA,SAAQC,GAAR,EAAYC,IAAZ,QAAuB,kBAAvB;;AACAC,QAAQ,oBAAR;;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,sCAAP;AACAT,IAAIU,GAAJ,CAAQD,SAAR;AAGAT,IAAIU,GAAJ,CAAQN,IAAR;AACAJ,IAAIW,SAAJ,CAAcC,QAAd,GAAuBP,OAAvB;AACAL,IAAIa,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAZ,OAAOa,UAAP,CAAkB,UAACC,EAAD,EAAIC,IAAJ,EAASC,IAAT,EAAgB;AAChC,MAAGF,GAAGG,IAAH,CAAQC,KAAX,EAAiB;AACfC,aAASD,KAAT,GAAeJ,GAAGG,IAAH,CAAQC,KAAvB;AACD,GAH+B,CAIhC;AACA;;;AACA,MAAIE,OAAMC,mBAAmBC,OAAOC,QAAP,CAAgBH,IAAnC,CAAV;;AACA,MAAGI,QAAQpB,GAAR,CAAY,QAAZ,CAAH,EAAyB;AACvBY;AACD,GAFD,MAEM;AACJ,QAAIS,OAAMH,OAAOC,QAAP,CAAgBG,MAAhB,CAAuBC,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,EAAqCA,KAArC,CAA2C,GAA3C,EAAgD,CAAhD,CAAV;;AACA,QAAGF,IAAH,EAAQ;AACN;AACA;AACArB,UAAI,uBAAJ,EAA4B;AAACqB,cAAKA;AAAN,OAA5B,EAAyCG,IAAzC,CAA8C,UAACC,GAAD,EAAO;AACnD,YAAGA,IAAIJ,IAAJ,IAAU,KAAV,IAAmBI,IAAIC,IAAJ,IAAUC,SAA7B,IAA0CF,IAAIC,IAAJ,CAASE,MAAT,IAAiB,EAA3D,IAAkEH,IAAIC,IAAJ,CAASE,MAAT,IAAiBD,SAAtF,EAAgG;AAC9FP,kBAAQ,QAAR,EAAiBK,IAAIC,IAAJ,CAASE,MAA1B,EAAiC;AAAEC,qBAAS,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAwB,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAR,GAAa,IAA9C;AAAX,WAAjC;AACAnB;AACD,SAHD,MAGM;AACJ;AACAM,iBAAOC,QAAP,CAAgBH,IAAhB,GAAqB,+FAA6FA,IAA7F,GAAkG,mEAAvH;AACD;AACF,OARD,EAQGgB,KARH,CAQS,UAACC,CAAD,EAAK;AACZC,gBAAQC,GAAR,CAAYF,CAAZ;AACD,OAVD;AAWD,KAdD,MAcM;AACJf,aAAOC,QAAP,CAAgBH,IAAhB,GAAqB,+FAA6FA,IAA7F,GAAkG,mEAAvH;AACD;AACF;AACF,CA7BD;AA8BA,IAAItB,GAAJ,CAAQ;AACNE,gBADM;AAENC,cAFM;AAGNuC,UAAQ;AAAA,WAAKC,EAAE1C,GAAF,CAAL;AAAA;AAHF,CAAR,EAIG2C,MAJH,CAIU,MAJV","sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport Vant from 'vant';\r\nimport 'vant/lib/vant-css/index.css';\r\nimport echarts from 'echarts'\r\nimport './assets/icon/iconfont.css';\r\nimport {get,post} from '../src/util/http'\r\nrequire('../src/util/cookie')\r\n\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nVue.use(ElementUI);\r\n\r\n\r\nVue.use(Vant);\r\nVue.prototype.$echarts=echarts\r\nVue.config.productionTip = false\r\nrouter.beforeEach((to,from,next)=>{\r\n  if(to.meta.title){\r\n    document.title=to.meta.title\r\n  }\r\n  // var key='oJ3fKwNf3IkVFiAGKVu2WE-0i918'\r\n  // Cookies('openId',key,{ expires: new Date(new Date().getTime() + (2*24*60*60 * 1000))})\r\n  let href= encodeURIComponent(window.location.href) \r\n  if(Cookies.get('openId')){\r\n    next()\r\n  }else {\r\n    let code= window.location.search.split('&')[0].split('=')[1];\r\n    if(code){\r\n      // document.write( window.location.href,'--------------',window.location.search)\r\n      // 用code  换openId\r\n      get('/wx/getWebTokenByCode',{code:code}).then((res)=>{\r\n        if(res.code==10000 && res.data!=undefined && res.data.openid!='' &&  res.data.openid!=undefined){\r\n          Cookies('openId',res.data.openid,{ expires: new Date(new Date().getTime() + (2*24*60*60 * 1000))})\r\n          next()\r\n        }else {\r\n          // code 失效 或者接口挂了\r\n          window.location.href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri='+href+'&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\r\n        }\r\n      }).catch((e)=>{\r\n        console.log(e)\r\n      })\r\n    }else {\r\n      window.location.href='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf410780b57e7f0ad&redirect_uri='+href+'&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'\r\n    }\r\n  }\r\n})\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"]}]}