{"remainingRequest":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\test\\app\\src\\views\\wsd.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\test\\app\\src\\views\\wsd.vue","mtime":1537327512518},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// @ is an alias to /src\nimport { Button, Loading, Toast, DatetimePicker } from 'vant';\nimport { get, post } from '../../src/util/http.js';\nexport default {\n  name: 'wsd',\n  components: {\n    Button: Button,\n    Loading: Loading,\n    Toast: Toast\n  },\n  computed: {\n    classObject: function classObject() {\n      return {};\n    }\n  },\n  methods: {\n    Onconfirm: function Onconfirm(value) {\n      console.log('确定...', value);\n      var d = new Date(value);\n      console.log('确定...', d.getFullYear(), d.getMonth(), d.getDate());\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      console.log(_t);\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    cut: function cut(item) {\n      this.currentTab = item;\n\n      if (item == 1) {\n        // 当前是否是今天的数据\n        var d = new Date();\n\n        var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n        _t = _t / 1000;\n        if (this.data && this.data.date == _t) return;\n      }\n\n      if (item == 2) {\n        var _d = new Date();\n\n        var _t2 = new Date('' + _d.getFullYear() + '/' + (_d.getMonth() + 1) + '/' + (_d.getDate() - 1) + '').getTime();\n\n        _t2 = _t2 / 1000;\n        if (this.data && this.data.date == _t2) return;\n      }\n\n      if (item == 1) {\n        // 今天\n        var _d2 = new Date();\n\n        var _t3 = new Date('' + _d2.getFullYear() + '/' + (_d2.getMonth() + 1) + '/' + _d2.getDate() + '').getTime();\n\n        _t3 = _t3 / 1000;\n        this.selectDate = _t3;\n        this.getdatas();\n      } else {\n        //昨天\n        var _d3 = new Date();\n\n        var _t4 = new Date('' + _d3.getFullYear() + '/' + (_d3.getMonth() + 1) + '/' + (_d3.getDate() - 1) + '').getTime();\n\n        _t4 = _t4 / 1000;\n        this.selectDate = _t4;\n        this.getdatas();\n      }\n    },\n    Oncancel: function Oncancel() {\n      console.log('取消...');\n      this.datePicker = false;\n    },\n    onElse: function onElse() {\n      this.datePicker = true;\n    },\n    onToday: function onToday() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    onYesterday: function onYesterday() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + (d.getDate() - 1) + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    hideDatePicker: function hideDatePicker() {\n      this.datePicker = false;\n    },\n    init: function init() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    getDataDate: function getDataDate() {\n      var d = new Date(this.data.date * 1000);\n      var s = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();\n      return s;\n    },\n    drawLine: function drawLine() {\n      var _this = this;\n\n      var myChart = this.$echarts.init(document.getElementById('wd'));\n      var myChart2 = this.$echarts.init(document.getElementById('sd'));\n      var myChart3 = this.$echarts.init(document.getElementById('power'));\n      var option = {\n        title: {\n          text: '湿度曲线',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d2,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      };\n      var option2 = {\n        title: {\n          text: '温度曲线',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d3,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      };\n      var option3 = {\n        title: {\n          text: '电量',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d4,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      }; // var obj={\n      //   data:[_this.getDataDate()],\n      //   x: 'left'\n      // }\n      // option.legend=obj\n\n      console.log(option, '---------------');\n      myChart.setOption(option);\n      myChart2.setOption(option2);\n      myChart3.setOption(option3);\n      window.addEventListener(\"resize\", function () {\n        myChart.resize();\n        myChart2.resize();\n        myChart3.resize();\n      });\n    },\n    getdatas: function getdatas() {\n      var _this2 = this;\n\n      get('/device/reportData', {\n        deviceId: this.deviceId,\n        date: this.selectDate\n      }).then(function (res) {\n        if (res.code == 10000) {\n          if (res.data.humidity.length > 0 && res.data.temperature.length > 0 && res.data.voltage.length > 0) {\n            _this2.data = res.data;\n            _this2.data.date = _this2.selectDate;\n            _this2.loading = false;\n            _this2.d1 = res.data.timeData;\n            var reg = /\\d{4}-\\d{1,2}-\\d{1,2}/;\n            _this2.d1 = _this2.d1.map(function (str) {\n              return str.replace(reg, '');\n            });\n            _this2.d2 = res.data.humidity;\n            _this2.d3 = res.data.temperature;\n            _this2.d4 = res.data.voltage;\n\n            _this2.drawLine();\n\n            _this2.hideDatePicker();\n\n            console.log(_this2.data.date);\n            _this2.loading = false;\n          } else {\n            _this2.loading = false;\n            Toast('暂无数据...');\n\n            _this2.hideDatePicker();\n\n            _this2.loading = false;\n          }\n        } else {\n          _this2.loading = false;\n          Toast('获取数据失败，请稍后');\n\n          _this2.hideDatePicker();\n\n          _this2.loading = false;\n        }\n      }).catch(function (e) {\n        _this2.loading = false;\n\n        _this2.hideDatePicker();\n\n        Toast('获取数据失败，请稍后');\n        console.log(e);\n      });\n    }\n  },\n  data: function data() {\n    return {\n      deviceId: '',\n      selectDate: '',\n      currentDate: new Date(),\n      currentDateT: new Date(),\n      minDate: new Date('2018/1/1'),\n      datePicker: false,\n      d1: [],\n      d2: [],\n      d3: [],\n      d4: [],\n      currentTab: true,\n      data: null,\n      loading: true\n    };\n  },\n  mounted: function mounted() {\n    this.deviceId = this.$route.params.id;\n    this.init();\n  }\n};",{"version":3,"sources":["wsd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"wsd\">\n    <div class=\"btn_wrap\">\n      <!-- <van-button type=\"primary\" v-on:click=\"onYesterday\">昨天</van-button> -->\n      <!-- <van-button type=\"primary\" v-on:click=\"onToday\">今天</van-button> -->\n      <!-- <van-button type=\"primary\" v-on:click=\"onElse\">其他</van-button> -->\n      <div class=\"clearfix\"> \n          <div class=\"btn \" v-on:click=\"cut(1)\" v-bind:class=\"currentTab==1?'active':''\">今天</div>\n          <div class=\"btn\" v-on:click=\"cut(2)\" v-bind:class=\"currentTab==2?'active':''\">昨天</div>\n      </div>\n    </div>\n    <div>\n      <div class=\"sd mod\" id=\"sd\"></div>\n    </div>\n    <div>\n      <div class=\"wd mod\" id=\"wd\"></div>\n    </div>\n    <div>\n       <div class=\"power mod\" id=\"power\"></div>\n    </div>\n    <div class=\"date_wrap\" v-bind:class=\"datePicker?'bottom_show':'bottom_false'\">\n      <van-datetime-picker\n        v-model=\"currentDate\"\n        type=\"date\"\n        :min-date=\"minDate\"\n        :max-date=\"currentDateT\"\n        @confirm=\"Onconfirm\"\n        @cancel=\"Oncancel\"\n      />\n    </div>\n    <div class=\"load\" v-if=\"loading\">\n      <van-loading color=\"#c1c1c1\" size=\"40px\"/>\n    </div>\n    <transition name=\"fade\">\n      <div class=\"mark\" v-if=\"datePicker\" v-on:click=\"hideDatePicker\"></div>\n    </transition>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Button,Loading,Toast,DatetimePicker } from 'vant';\nimport {get,post} from '../../src/util/http.js'\n\nexport default {\n  name: 'wsd',\n  components: {\n    Button,\n    Loading,\n    Toast\n  },\n  computed:{\n    classObject:function(){\n      return {\n\n      }\n    }\n  },\n  methods:{\n    Onconfirm(value){\n      console.log('确定...',value)\n      let d=new Date(value)\n      console.log('确定...',d.getFullYear(),d.getMonth(),d.getDate())\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n      _t=_t/1000\n      console.log(_t)\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n    cut(item){\n      this.currentTab=item\n      if(item==1){ // 当前是否是今天的数据\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n        _t=_t/1000\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==2){\n        let d=new Date()\n       let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n        _t=_t/1000\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==1){ // 今天\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n        _t=_t/1000\n        this.selectDate=_t\n        this.getdatas()\n      }else { //昨天\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n        _t=_t/1000\n        this.selectDate=_t\n        this.getdatas()\n      }\n    },\n\n    Oncancel(){\n      console.log('取消...')\n      this.datePicker=false\n    },\n\n    onElse(){\n      this.datePicker=true\n    },\n    onToday(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n    onYesterday(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n\n    hideDatePicker(){\n      this.datePicker=false\n    },\n    init(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate())+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n    getDataDate(){\n      let d=new Date((this.data.date*1000))\n      let s=d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate()\n      return s\n    },\n\n    drawLine(){\n      let _this=this\n      let myChart = this.$echarts.init(document.getElementById('wd'))\n      let myChart2 = this.$echarts.init(document.getElementById('sd'))\n      let myChart3 = this.$echarts.init(document.getElementById('power'))\n      let option = {\n          title: {\n            text: '湿度曲线',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d2,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      let option2 = {\n          title: {\n            text: '温度曲线',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d3,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      let option3 = {\n          title: {\n            text: '电量',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d4,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      // var obj={\n      //   data:[_this.getDataDate()],\n      //   x: 'left'\n      // }\n      // option.legend=obj\n      console.log(option,'---------------')\n      myChart.setOption(option)\n      myChart2.setOption(option2)\n      myChart3.setOption(option3)\n      window.addEventListener(\"resize\", () => { myChart.resize(); myChart2.resize(); myChart3.resize();});\n    },\n    getdatas(){\n      get('/device/reportData',{deviceId :this.deviceId,date:this.selectDate}).then((res)=>{\n        if(res.code==10000){\n          if(res.data.humidity.length>0&& res.data.temperature.length>0&& res.data.voltage.length>0){\n            this.data=res.data\n            this.data.date=this.selectDate\n            this.loading=false\n            this.d1=res.data.timeData\n            let reg=/\\d{4}-\\d{1,2}-\\d{1,2}/\n            this.d1 = this.d1.map(function (str) {\n              return str.replace(reg, '');\n            });\n            this.d2=res.data.humidity\n            this.d3=res.data.temperature\n            this.d4=res.data.voltage\n            this.drawLine()\n            this.hideDatePicker()\n            console.log(this.data.date)\n            this.loading=false\n          }else {\n            this.loading=false\n            Toast('暂无数据...')\n            this.hideDatePicker()\n            this.loading=false\n          }\n        }else {\n          this.loading=false\n          Toast('获取数据失败，请稍后')\n          this.hideDatePicker()\n          this.loading=false\n        }\n      }).catch((e)=>{\n        this.loading=false\n        this.hideDatePicker()\n        Toast('获取数据失败，请稍后')\n        console.log(e)\n      })\n    }\n  },\n  data(){\n    return {\n      deviceId:'',\n      selectDate:'',\n      currentDate: new Date(),\n      currentDateT: new Date(),\n      minDate: new Date('2018/1/1'),\n      datePicker:false,\n      d1:[],\n      d2:[],\n      d3:[],\n      d4:[],\n      currentTab:true,\n      data:null,\n      loading:true\n    }\n  },\n  mounted(){\n    this.deviceId=this.$route.params.id\n    this.init()\n    \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.wsd .mod {\n  width: 100% !important;\n  height: 300px;\n}\n\n.btn_wrap {\n  position: fixed;\n  width: 100%;\n  top: 0px;\n  padding: .4rem;\n  background: #fff;\n  z-index: 10;\n  box-sizing: border-box;\n  border-bottom: 1px solid #f3f3f3;\n}\n\n.btn_wrap .btn{\n  float: left;\n  width: 1.6rem;\n  height: 1.173rem;\n  line-height: 1.173rem;\n  font-size: .4rem;\n  text-align: center;\n  background: #f6f6f6;\n  margin-right: .2rem;\n  border-radius: .08rem;\n}\n\n.btn_wrap .btn:active {\n  background: #4b0;\n  color: #fff;\n}\n\n.btn_wrap .active {\n  background: #4b0;\n  color: #fff;\n}\n\n\n\n.item_title {\n  font-size: .427rem;\n  margin-top: .133rem;\n}\n\n.wsd {\n  padding: 2rem 0 1rem 0;\n}\n\n.wsd .btn_wrap{\n  text-align: left;\n}\n\n.wsd .btn_wrap button {\n  margin-left: .267rem;\n}\n\n.title {\n  font-size: .4rem;\n  padding: .4rem;\n  text-align: center;\n}\n\n.date_wrap {\n  position: fixed;\n  height: 6.933rem;\n  width: 100%;\n  z-index: 10;\n}\n.mark {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  background: #333;\n  opacity: .7;\n}\n\n.bottom_hide {\n  bottom: -7rem;\n}\n\n.bottom_show {\n  bottom: 0px;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n\n.tip {\n  font-size: .133rem;\n  text-align: left;\n  margin-top: .267rem;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n</style>\n"],"sourceRoot":"src\\views"}]}