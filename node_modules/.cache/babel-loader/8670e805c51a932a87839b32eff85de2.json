{"remainingRequest":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\babel-loader\\lib\\index.js!D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vant\\vueUI\\waibao\\waibao\\src\\views\\wsd.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vant\\vueUI\\waibao\\waibao\\src\\views\\wsd.vue","mtime":1542007719902},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536746400741},{"path":"D:\\vant\\vueUI\\waibao\\waibao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// @ is an alias to /src\nimport { Button, Loading, Toast, DatetimePicker } from 'vant';\nimport { get, post } from '../../src/util/http.js';\nexport default {\n  name: 'wsd',\n  components: {\n    Button: Button,\n    Loading: Loading,\n    Toast: Toast\n  },\n  computed: {\n    classObject: function classObject() {}\n  },\n  methods: {\n    Onconfirm: function Onconfirm(value) {\n      var d = new Date(value);\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      console.log(_t);\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    cut: function cut(item) {\n      this.currentTab = item;\n\n      if (item == 1) {\n        // 当前是否是今天的数据\n        var d = new Date();\n\n        var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n        _t = _t / 1000;\n        if (this.data && this.data.date == _t) return;\n      }\n\n      if (item == 2) {\n        var _d2 = new Date();\n\n        var _t2 = new Date('' + _d2.getFullYear() + '/' + (_d2.getMonth() + 1) + '/' + (_d2.getDate() - 1) + '').getTime();\n\n        _t2 = _t2 / 1000;\n        if (this.data && this.data.date == _t2) return;\n      }\n\n      if (item == 3) {\n        // 当前是否是前天的数据\n        var _d3 = new Date();\n\n        var _t3 = new Date('' + _d3.getFullYear() + '/' + (_d3.getMonth() + 1) + '/' + (_d3.getDate() - 2) + '').getTime();\n\n        _t3 = _t3 / 1000;\n        if (this.data && this.data.date == _t3) return;\n      }\n\n      if (item == 4) {\n        // 当前是否是本月的数据\n        var _t4 = '1';\n        if (this.data && this.data.date == _t4) return;\n      }\n\n      if (item == 5) {\n        // 当前是否是本月的数据\n        var _t5 = '2';\n        if (this.data && this.data.date == _t5) return;\n      }\n\n      if (item == 6) {\n        // 当前是否是本月的数据\n        var _t6 = '3';\n        if (this.data && this.data.date == _t6) return;\n      }\n\n      if (item == 1) {\n        // 今天\n        var _d4 = new Date();\n\n        var _t7 = new Date('' + _d4.getFullYear() + '/' + (_d4.getMonth() + 1) + '/' + _d4.getDate() + '').getTime();\n\n        _t7 = _t7 / 1000;\n        this.selectDate = _t7;\n        this.getdatas();\n      } else if (item == 2) {\n        //昨天\n        var _d5 = new Date();\n\n        var _t8 = new Date('' + _d5.getFullYear() + '/' + (_d5.getMonth() + 1) + '/' + (_d5.getDate() - 1) + '').getTime();\n\n        _t8 = _t8 / 1000;\n        this.selectDate = _t8;\n        this.getdatas();\n      } else if (item == 3) {\n        var _d6 = new Date();\n\n        var _t9 = new Date('' + _d6.getFullYear() + '/' + (_d6.getMonth() + 1) + '/' + (_d6.getDate() - 2) + '').getTime();\n\n        _t9 = _t9 / 1000;\n        this.selectDate = _t9;\n        this.getdatas();\n      } else if (item == 4) {\n        this.selectDate = '1';\n        this.getdatas();\n      } else if (item == 5) {\n        this.selectDate = '2';\n        this.getdatas();\n      } else if (item == 6) {\n        this.selectDate = '3';\n        this.getdatas();\n      }\n    },\n    Oncancel: function Oncancel() {\n      this.datePicker = false;\n    },\n    onElse: function onElse() {\n      this.datePicker = true;\n    },\n    onToday: function onToday() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    onYesterday: function onYesterday() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + (d.getDate() - 1) + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    hideDatePicker: function hideDatePicker() {\n      this.datePicker = false;\n    },\n    init: function init() {\n      var d = new Date();\n\n      var _t = new Date('' + d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate() + '').getTime();\n\n      _t = _t / 1000;\n      this.selectDate = _t;\n      this.getdatas();\n    },\n    getDataDate: function getDataDate() {\n      var d = new Date(this.data.date * 1000);\n      var s = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();\n      return s;\n    },\n    drawLine: function drawLine() {\n      var _this = this;\n\n      var myChart = this.$echarts.init(document.getElementById('wd'));\n      var myChart2 = this.$echarts.init(document.getElementById('sd'));\n      var myChart3 = this.$echarts.init(document.getElementById('power'));\n      var option = {\n        title: {\n          text: '湿度曲线',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d2,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      };\n      var option2 = {\n        title: {\n          text: '温度曲线',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d3,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      };\n      var option3 = {\n        title: {\n          text: '电量',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            animation: false\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: _this.d1\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: _this.d4,\n          type: 'line'\n        }],\n        dataZoom: [{}, {\n          type: 'inside'\n        }]\n      }; // var obj={\n      //   data:[_this.getDataDate()],\n      //   x: 'left'\n      // }\n      // option.legend=obj\n\n      console.log(option, '---------------');\n      myChart.setOption(option);\n      myChart2.setOption(option2);\n      myChart3.setOption(option3);\n      window.addEventListener(\"resize\", function () {\n        myChart.resize();\n        myChart2.resize();\n        myChart3.resize();\n      });\n    },\n    getdatas: function getdatas() {\n      var _this2 = this;\n\n      var data = {\n        deviceId: this.deviceId\n      };\n\n      if (this.selectDate === '1' || this.selectDate === '2' || this.selectDate === '3') {\n        data.flag = this.selectDate;\n      } else {\n        data.date = this.selectDate;\n      }\n\n      get('/device/reportData', data).then(function (res) {\n        if (res.code == 10000) {\n          if (res.data.humidity.length > 0 && res.data.temperature.length > 0 && res.data.voltage.length > 0) {\n            _this2.data = res.data;\n            _this2.data.date = _this2.selectDate;\n            _this2.loading = false;\n            _this2.d1 = res.data.timeData;\n\n            if (_this2.selectDate === '1' || _this2.selectDate === '2' || _this2.selectDate === '3') {\n              var reg = /\\d{4}-(\\d{1,2}-\\d{1,2})/;\n              var _d = [];\n\n              _this2.d1.forEach(function (item, index) {\n                if (reg.test(item)) {\n                  _d.push(RegExp.$1);\n                }\n              });\n\n              _this2.d1 = _d;\n            } else {\n              var _reg = /\\d{4}-\\d{1,2}-\\d{1,2}/;\n              _this2.d1 = _this2.d1.map(function (str) {\n                return str.replace(_reg, '');\n              });\n            }\n\n            _this2.d2 = res.data.humidity;\n            _this2.d3 = res.data.temperature;\n            _this2.d4 = res.data.voltage;\n\n            _this2.drawLine();\n\n            _this2.hideDatePicker();\n\n            _this2.loading = false;\n          } else {\n            _this2.loading = false;\n            _this2.data = null;\n            _this2.d2 = [];\n            _this2.d3 = [];\n            _this2.d4 = [];\n            _this2.d1 = [];\n\n            _this2.drawLine();\n\n            Toast('暂无数据...');\n\n            _this2.hideDatePicker();\n\n            _this2.loading = false;\n          }\n        } else {\n          _this2.loading = false;\n          Toast('获取数据失败，请稍后');\n\n          _this2.hideDatePicker();\n\n          _this2.loading = false;\n        }\n      }).catch(function (e) {\n        _this2.loading = false;\n\n        _this2.hideDatePicker();\n\n        Toast('获取数据失败，请稍后');\n        console.log(e);\n      });\n    }\n  },\n  data: function data() {\n    return {\n      deviceId: '',\n      selectDate: '',\n      currentDate: new Date(),\n      currentDateT: new Date(),\n      minDate: new Date('2018/1/1'),\n      datePicker: false,\n      d1: [],\n      d2: [],\n      d3: [],\n      d4: [],\n      currentTab: true,\n      data: null,\n      loading: true\n    };\n  },\n  mounted: function mounted() {\n    this.deviceId = this.$route.params.id;\n    this.init();\n  }\n};",{"version":3,"sources":["wsd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA,SAAA,MAAA,EAAA,OAAA,EAAA,KAAA,EAAA,cAAA,QAAA,MAAA;AACA,SAAA,GAAA,EAAA,IAAA,QAAA,wBAAA;AAEA,eAAA;AACA,QAAA,KADA;AAEA,cAAA;AACA,kBADA;AAEA,oBAFA;AAGA;AAHA,GAFA;AAOA,YAAA;AACA,iBAAA,uBAAA,CAEA;AAHA,GAPA;AAYA,WAAA;AACA,aADA,qBACA,KADA,EACA;AACA,UAAA,IAAA,IAAA,IAAA,CAAA,KAAA,CAAA;;AACA,UAAA,KAAA,IAAA,IAAA,CAAA,KAAA,EAAA,WAAA,EAAA,GAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA;;AACA,WAAA,KAAA,IAAA;AACA,cAAA,GAAA,CAAA,EAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,QAAA;AACA,KARA;AAUA,OAVA,eAUA,IAVA,EAUA;AACA,WAAA,UAAA,GAAA,IAAA;;AACA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,IAAA,IAAA,IAAA,EAAA;;AACA,YAAA,KAAA,IAAA,IAAA,CAAA,KAAA,EAAA,WAAA,EAAA,GAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA;;AACA,aAAA,KAAA,IAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,EAAA,EACA;AACA;;AAEA,UAAA,QAAA,CAAA,EAAA;AACA,YAAA,MAAA,IAAA,IAAA,EAAA;;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,KAAA,IAAA,WAAA,EAAA,GAAA,GAAA,IAAA,IAAA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,IAAA,OAAA,KAAA,CAAA,IAAA,EAAA,EAAA,OAAA,EAAA;;AACA,cAAA,MAAA,IAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EACA;AACA;;AAEA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,IAAA,IAAA,EAAA;;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,KAAA,IAAA,WAAA,EAAA,GAAA,GAAA,IAAA,IAAA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,IAAA,OAAA,KAAA,CAAA,IAAA,EAAA,EAAA,OAAA,EAAA;;AACA,cAAA,MAAA,IAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EACA;AACA;;AAEA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,GAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EACA;AACA;;AAEA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,GAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EACA;AACA;;AACA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,GAAA;AACA,YAAA,KAAA,IAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EACA;AACA;;AAEA,UAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,IAAA,IAAA,EAAA;;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,KAAA,IAAA,WAAA,EAAA,GAAA,GAAA,IAAA,IAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,IAAA,OAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA;;AACA,cAAA,MAAA,IAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA,OANA,MAMA,IAAA,QAAA,CAAA,EAAA;AAAA;AACA,YAAA,MAAA,IAAA,IAAA,EAAA;;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,KAAA,IAAA,WAAA,EAAA,GAAA,GAAA,IAAA,IAAA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,IAAA,OAAA,KAAA,CAAA,IAAA,EAAA,EAAA,OAAA,EAAA;;AACA,cAAA,MAAA,IAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA,OANA,MAMA,IAAA,QAAA,CAAA,EAAA;AACA,YAAA,MAAA,IAAA,IAAA,EAAA;;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,KAAA,IAAA,WAAA,EAAA,GAAA,GAAA,IAAA,IAAA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,IAAA,OAAA,KAAA,CAAA,IAAA,EAAA,EAAA,OAAA,EAAA;;AACA,cAAA,MAAA,IAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA,OANA,MAMA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA,OAHA,MAGA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA,OAHA,MAGA,IAAA,QAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,GAAA;AACA,aAAA,QAAA;AACA;AACA,KAjFA;AAmFA,YAnFA,sBAmFA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,KArFA;AAuFA,UAvFA,oBAuFA;AACA,WAAA,UAAA,GAAA,IAAA;AACA,KAzFA;AA0FA,WA1FA,qBA0FA;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;;AACA,UAAA,KAAA,IAAA,IAAA,CAAA,KAAA,EAAA,WAAA,EAAA,GAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA;;AACA,WAAA,KAAA,IAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,QAAA;AACA,KAhGA;AAiGA,eAjGA,yBAiGA;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;;AACA,UAAA,KAAA,IAAA,IAAA,CAAA,KAAA,EAAA,WAAA,EAAA,GAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,EAAA,OAAA,KAAA,CAAA,IAAA,EAAA,EAAA,OAAA,EAAA;;AACA,WAAA,KAAA,IAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,QAAA;AACA,KAvGA;AA0GA,kBA1GA,4BA0GA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,KA5GA;AA6GA,QA7GA,kBA6GA;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;;AACA,UAAA,KAAA,IAAA,IAAA,CAAA,KAAA,EAAA,WAAA,EAAA,GAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EAAA,EAAA,OAAA,EAAA;;AACA,WAAA,KAAA,IAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,QAAA;AACA,KAnHA;AAqHA,eArHA,yBAqHA;AACA,UAAA,IAAA,IAAA,IAAA,CAAA,KAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,WAAA,KAAA,GAAA,IAAA,EAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,EAAA,OAAA,EAAA;AACA,aAAA,CAAA;AACA,KAzHA;AA2HA,YA3HA,sBA2HA;AACA,UAAA,QAAA,IAAA;;AACA,UAAA,UAAA,KAAA,QAAA,CAAA,IAAA,CAAA,SAAA,cAAA,CAAA,IAAA,CAAA,CAAA;AACA,UAAA,WAAA,KAAA,QAAA,CAAA,IAAA,CAAA,SAAA,cAAA,CAAA,IAAA,CAAA,CAAA;AACA,UAAA,WAAA,KAAA,QAAA,CAAA,IAAA,CAAA,SAAA,cAAA,CAAA,OAAA,CAAA,CAAA;AACA,UAAA,SAAA;AACA,eAAA;AACA,gBAAA,MADA;AAEA,mBAAA,EAFA;AAGA,aAAA;AAHA,SADA;AAMA,iBAAA;AACA,mBAAA,MADA;AAEA,uBAAA;AACA,uBAAA;AADA;AAFA,SANA;AAYA,eAAA;AACA,gBAAA,UADA;AAEA,gBAAA,MAAA;AAFA,SAZA;AAgBA,eAAA;AACA,gBAAA;AADA,SAhBA;AAmBA,gBAAA,CAAA;AACA,gBAAA,MAAA,EADA;AAEA,gBAAA;AAFA,SAAA,CAnBA;AAuBA,kBAAA,CAAA,EAAA,EACA;AACA,gBAAA;AADA,SADA;AAvBA,OAAA;AA4BA,UAAA,UAAA;AACA,eAAA;AACA,gBAAA,MADA;AAEA,mBAAA,EAFA;AAGA,aAAA;AAHA,SADA;AAMA,iBAAA;AACA,mBAAA,MADA;AAEA,uBAAA;AACA,uBAAA;AADA;AAFA,SANA;AAYA,eAAA;AACA,gBAAA,UADA;AAEA,gBAAA,MAAA;AAFA,SAZA;AAgBA,eAAA;AACA,gBAAA;AADA,SAhBA;AAmBA,gBAAA,CAAA;AACA,gBAAA,MAAA,EADA;AAEA,gBAAA;AAFA,SAAA,CAnBA;AAuBA,kBAAA,CAAA,EAAA,EACA;AACA,gBAAA;AADA,SADA;AAvBA,OAAA;AA4BA,UAAA,UAAA;AACA,eAAA;AACA,gBAAA,IADA;AAEA,mBAAA,EAFA;AAGA,aAAA;AAHA,SADA;AAMA,iBAAA;AACA,mBAAA,MADA;AAEA,uBAAA;AACA,uBAAA;AADA;AAFA,SANA;AAYA,eAAA;AACA,gBAAA,UADA;AAEA,gBAAA,MAAA;AAFA,SAZA;AAgBA,eAAA;AACA,gBAAA;AADA,SAhBA;AAmBA,gBAAA,CAAA;AACA,gBAAA,MAAA,EADA;AAEA,gBAAA;AAFA,SAAA,CAnBA;AAuBA,kBAAA,CAAA,EAAA,EACA;AACA,gBAAA;AADA,SADA;AAvBA,OAAA,CA7DA,CAyFA;AACA;AACA;AACA;AACA;;AACA,cAAA,GAAA,CAAA,MAAA,EAAA,iBAAA;AACA,cAAA,SAAA,CAAA,MAAA;AACA,eAAA,SAAA,CAAA,OAAA;AACA,eAAA,SAAA,CAAA,OAAA;AACA,aAAA,gBAAA,CAAA,QAAA,EAAA,YAAA;AAAA,gBAAA,MAAA;AAAA,iBAAA,MAAA;AAAA,iBAAA,MAAA;AAAA,OAAA;AACA,KA9NA;AA+NA,YA/NA,sBA+NA;AAAA;;AACA,UAAA,OAAA;AACA,kBAAA,KAAA;AADA,OAAA;;AAGA,UAAA,KAAA,UAAA,KAAA,GAAA,IAAA,KAAA,UAAA,KAAA,GAAA,IAAA,KAAA,UAAA,KAAA,GAAA,EAAA;AACA,aAAA,IAAA,GAAA,KAAA,UAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,GAAA,KAAA,UAAA;AACA;;AACA,UAAA,oBAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,IAAA,IAAA,KAAA,EAAA;AACA,cAAA,IAAA,IAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,IAAA,IAAA,IAAA,CAAA,WAAA,CAAA,MAAA,GAAA,CAAA,IAAA,IAAA,IAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,mBAAA,IAAA,GAAA,IAAA,IAAA;AACA,mBAAA,IAAA,CAAA,IAAA,GAAA,OAAA,UAAA;AACA,mBAAA,OAAA,GAAA,KAAA;AACA,mBAAA,EAAA,GAAA,IAAA,IAAA,CAAA,QAAA;;AACA,gBAAA,OAAA,UAAA,KAAA,GAAA,IAAA,OAAA,UAAA,KAAA,GAAA,IAAA,OAAA,UAAA,KAAA,GAAA,EAAA;AACA,kBAAA,MAAA,yBAAA;AACA,kBAAA,KAAA,EAAA;;AACA,qBAAA,EAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,CAAA,EAAA;AACA,qBAAA,IAAA,CAAA,OAAA,EAAA;AACA;AACA,eAJA;;AAKA,qBAAA,EAAA,GAAA,EAAA;AACA,aATA,MASA;AACA,kBAAA,OAAA,uBAAA;AACA,qBAAA,EAAA,GAAA,OAAA,EAAA,CAAA,GAAA,CAAA,UAAA,GAAA,EAAA;AACA,uBAAA,IAAA,OAAA,CAAA,IAAA,EAAA,EAAA,CAAA;AACA,eAFA,CAAA;AAGA;;AACA,mBAAA,EAAA,GAAA,IAAA,IAAA,CAAA,QAAA;AACA,mBAAA,EAAA,GAAA,IAAA,IAAA,CAAA,WAAA;AACA,mBAAA,EAAA,GAAA,IAAA,IAAA,CAAA,OAAA;;AACA,mBAAA,QAAA;;AACA,mBAAA,cAAA;;AACA,mBAAA,OAAA,GAAA,KAAA;AACA,WA1BA,MA0BA;AACA,mBAAA,OAAA,GAAA,KAAA;AACA,mBAAA,IAAA,GAAA,IAAA;AACA,mBAAA,EAAA,GAAA,EAAA;AACA,mBAAA,EAAA,GAAA,EAAA;AACA,mBAAA,EAAA,GAAA,EAAA;AACA,mBAAA,EAAA,GAAA,EAAA;;AACA,mBAAA,QAAA;;AACA,kBAAA,SAAA;;AACA,mBAAA,cAAA;;AACA,mBAAA,OAAA,GAAA,KAAA;AACA;AACA,SAvCA,MAuCA;AACA,iBAAA,OAAA,GAAA,KAAA;AACA,gBAAA,YAAA;;AACA,iBAAA,cAAA;;AACA,iBAAA,OAAA,GAAA,KAAA;AACA;AACA,OA9CA,EA8CA,KA9CA,CA8CA,UAAA,CAAA,EAAA;AACA,eAAA,OAAA,GAAA,KAAA;;AACA,eAAA,cAAA;;AACA,cAAA,YAAA;AACA,gBAAA,GAAA,CAAA,CAAA;AACA,OAnDA;AAoDA;AA5RA,GAZA;AA0SA,MA1SA,kBA0SA;AACA,WAAA;AACA,gBAAA,EADA;AAEA,kBAAA,EAFA;AAGA,mBAAA,IAAA,IAAA,EAHA;AAIA,oBAAA,IAAA,IAAA,EAJA;AAKA,eAAA,IAAA,IAAA,CAAA,UAAA,CALA;AAMA,kBAAA,KANA;AAOA,UAAA,EAPA;AAQA,UAAA,EARA;AASA,UAAA,EATA;AAUA,UAAA,EAVA;AAWA,kBAAA,IAXA;AAYA,YAAA,IAZA;AAaA,eAAA;AAbA,KAAA;AAeA,GA1TA;AA2TA,SA3TA,qBA2TA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,IAAA;AAEA;AA/TA,CAAA","sourcesContent":["<template>\n  <div class=\"wsd\">\n    <div class=\"btn_wrap\">\n      <!-- <van-button type=\"primary\" v-on:click=\"onYesterday\">昨天</van-button> -->\n      <!-- <van-button type=\"primary\" v-on:click=\"onToday\">今天</van-button> -->\n      <!-- <van-button type=\"primary\" v-on:click=\"onElse\">其他</van-button> -->\n      <div class=\"clearfix\"> \n          <div class=\"btn \" v-on:click=\"cut(1)\" v-bind:class=\"currentTab==1?'active':''\">今天</div>\n          <div class=\"btn\" v-on:click=\"cut(2)\" v-bind:class=\"currentTab==2?'active':''\">昨天</div>\n          <div class=\"btn\" v-on:click=\"cut(3)\" v-bind:class=\"currentTab==3?'active':''\">前天</div>\n          <div class=\"btn\" v-on:click=\"cut(4)\" v-bind:class=\"currentTab==4?'active':''\">本周</div>\n          <div class=\"btn\" v-on:click=\"cut(5)\" v-bind:class=\"currentTab==5?'active':''\">本月</div>\n          <div class=\"btn\" v-on:click=\"cut(6)\" v-bind:class=\"currentTab==6?'active':''\">本年</div>\n      </div>\n    </div>\n    <div>\n      <div class=\"sd mod\" id=\"sd\"></div>\n    </div>\n    <div>\n      <div class=\"wd mod\" id=\"wd\"></div>\n    </div>\n    <div>\n       <div class=\"power mod\" id=\"power\"></div>\n    </div>\n    <div class=\"date_wrap\" v-bind:class=\"datePicker?'bottom_show':'bottom_false'\">\n      <van-datetime-picker\n        v-model=\"currentDate\"\n        type=\"date\"\n        :min-date=\"minDate\"\n        :max-date=\"currentDateT\"\n        @confirm=\"Onconfirm\"\n        @cancel=\"Oncancel\"\n      />\n    </div>\n    <div class=\"load\" v-if=\"loading\">\n      <van-loading color=\"#c1c1c1\" size=\"40px\"/>\n    </div>\n    <transition name=\"fade\">\n      <div class=\"mark\" v-if=\"datePicker\" v-on:click=\"hideDatePicker\"></div>\n    </transition>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Button,Loading,Toast,DatetimePicker } from 'vant';\nimport {get,post} from '../../src/util/http.js'\n\nexport default {\n  name: 'wsd',\n  components: {\n    Button,\n    Loading,\n    Toast\n  },\n  computed:{\n    classObject:function(){\n      \n    }\n  },\n  methods:{\n    Onconfirm(value){\n      let d=new Date(value)\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n      _t=_t/1000\n      console.log(_t)\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n    cut(item){\n      this.currentTab=item\n      if(item==1){ // 当前是否是今天的数据\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n        _t=_t/1000\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==2){\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n        _t=_t/1000\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==3){ // 当前是否是前天的数据\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-2)+'').getTime()\n        _t=_t/1000\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==4){ // 当前是否是本月的数据\n        let _t='1'\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==5){ // 当前是否是本月的数据\n        let _t='2'\n        if(this.data && this.data.date==_t)\n        return\n      }\n      if(item==6){ // 当前是否是本月的数据\n        let _t='3'\n        if(this.data && this.data.date==_t)\n        return\n      }\n\n      if(item==1){ // 今天\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n        _t=_t/1000\n        this.selectDate=_t\n        this.getdatas()\n      }else if(item==2) { //昨天\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n        _t=_t/1000\n        this.selectDate=_t\n        this.getdatas()\n      }else if(item==3){\n        let d=new Date()\n        let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-2)+'').getTime()\n        _t=_t/1000\n        this.selectDate=_t\n        this.getdatas()\n      }else if(item==4){\n        this.selectDate='1'\n        this.getdatas()\n      }else if(item==5){\n        this.selectDate='2'\n        this.getdatas()\n      }else if(item==6){\n        this.selectDate='3'\n        this.getdatas()\n      }\n    },\n\n    Oncancel(){\n      this.datePicker=false\n    },\n\n    onElse(){\n      this.datePicker=true\n    },\n    onToday(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate()+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n    onYesterday(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate()-1)+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n\n    hideDatePicker(){\n      this.datePicker=false\n    },\n    init(){\n      let d=new Date()\n      let _t=new Date(''+d.getFullYear()+'/'+(d.getMonth()+1)+'/'+(d.getDate())+'').getTime()\n      _t=_t/1000\n      this.selectDate=_t\n      this.getdatas()\n    },\n\n    getDataDate(){\n      let d=new Date((this.data.date*1000))\n      let s=d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate()\n      return s\n    },\n\n    drawLine(){\n      let _this=this\n      let myChart = this.$echarts.init(document.getElementById('wd'))\n      let myChart2 = this.$echarts.init(document.getElementById('sd'))\n      let myChart3 = this.$echarts.init(document.getElementById('power'))\n      let option = {\n          title: {\n            text: '湿度曲线',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d2,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      let option2 = {\n          title: {\n            text: '温度曲线',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d3,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      let option3 = {\n          title: {\n            text: '电量',\n            subtext: '',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              animation: false\n            }\n          },\n          xAxis: {\n            type: 'category',\n            data:_this.d1\n          },\n          yAxis: {\n              type: 'value'\n          },\n          series: [{\n              data: _this.d4,\n              type: 'line'\n          }],\n          dataZoom: [{\n            }, {\n                type: 'inside'\n            }],\n      };\n      // var obj={\n      //   data:[_this.getDataDate()],\n      //   x: 'left'\n      // }\n      // option.legend=obj\n      console.log(option,'---------------')\n      myChart.setOption(option)\n      myChart2.setOption(option2)\n      myChart3.setOption(option3)\n      window.addEventListener(\"resize\", () => { myChart.resize(); myChart2.resize(); myChart3.resize();});\n    },\n    getdatas(){\n      var data={\n        deviceId :this.deviceId\n      }\n      if(this.selectDate==='1' || this.selectDate==='2' || this.selectDate==='3'){\n        data.flag=this.selectDate\n      }else {\n        data.date=this.selectDate\n      }\n      get('/device/reportData',data).then((res)=>{\n        if(res.code==10000){\n          if(res.data.humidity.length>0&& res.data.temperature.length>0&& res.data.voltage.length>0){\n            this.data=res.data\n            this.data.date=this.selectDate\n            this.loading=false\n            this.d1=res.data.timeData\n            if(this.selectDate==='1' || this.selectDate==='2' || this.selectDate==='3'){\n              let reg=/\\d{4}-(\\d{1,2}-\\d{1,2})/\n              let _d=[]\n              this.d1.forEach(function(item,index){\n                if(reg.test(item)){\n                  _d.push(RegExp.$1)\n                }\n              })\n              this.d1=_d\n            }else {\n              let reg=/\\d{4}-\\d{1,2}-\\d{1,2}/\n              this.d1 = this.d1.map(function (str) {\n                return str.replace(reg, '');\n              });\n            }\n            this.d2=res.data.humidity\n            this.d3=res.data.temperature\n            this.d4=res.data.voltage\n            this.drawLine()\n            this.hideDatePicker()\n            this.loading=false\n          }else {\n            this.loading=false\n            this.data=null\n            this.d2=[]\n            this.d3=[]\n            this.d4=[]\n            this.d1=[]\n            this.drawLine()\n            Toast('暂无数据...')\n            this.hideDatePicker()\n            this.loading=false\n          }\n        }else {\n          this.loading=false\n          Toast('获取数据失败，请稍后')\n          this.hideDatePicker()\n          this.loading=false\n        }\n      }).catch((e)=>{\n        this.loading=false\n        this.hideDatePicker()\n        Toast('获取数据失败，请稍后')\n        console.log(e)\n      })\n    }\n  },\n  data(){\n    return {\n      deviceId:'',\n      selectDate:'',\n      currentDate: new Date(),\n      currentDateT: new Date(),\n      minDate: new Date('2018/1/1'),\n      datePicker:false,\n      d1:[],\n      d2:[],\n      d3:[],\n      d4:[],\n      currentTab:true,\n      data:null,\n      loading:true\n    }\n  },\n  mounted(){\n    this.deviceId=this.$route.params.id\n    this.init()\n    \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.wsd .mod {\n  width: 100% !important;\n  height: 300px;\n  /* border-bottom: 1px solid #333; */\n  padding-bottom: 40px;\n  box-sizing: content-box;\n}\n\n.btn_wrap {\n  position: fixed;\n  width: 100%;\n  top: 0px;\n  padding: .4rem;\n  background: #fff;\n  z-index: 10;\n  box-sizing: border-box;\n  border-bottom: 1px solid #f3f3f3;\n}\n\n.btn_wrap .btn{\n  float: left;\n  width: 1.3rem;\n  height: 1.173rem;\n  line-height: 1.173rem;\n  font-size: .4rem;\n  text-align: center;\n  background: #f6f6f6;\n  margin-right: .2rem;\n  border-radius: .08rem;\n}\n\n.btn_wrap .btn:active {\n  background: #4b0;\n  color: #fff;\n}\n\n.btn_wrap .active {\n  background: #4b0;\n  color: #fff;\n}\n\n\n\n.item_title {\n  font-size: .427rem;\n  margin-top: .133rem;\n}\n\n.wsd {\n  padding: 2rem 0 1rem 0;\n}\n\n.wsd .btn_wrap{\n  text-align: left;\n}\n\n.wsd .btn_wrap button {\n  margin-left: .267rem;\n}\n\n.title {\n  font-size: .4rem;\n  padding: .4rem;\n  text-align: center;\n}\n\n.date_wrap {\n  position: fixed;\n  height: 6.933rem;\n  width: 100%;\n  z-index: 10;\n}\n.mark {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  background: #333;\n  opacity: .7;\n}\n\n.bottom_hide {\n  bottom: -7rem;\n}\n\n.bottom_show {\n  bottom: 0px;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n\n.tip {\n  font-size: .133rem;\n  text-align: left;\n  margin-top: .267rem;\n}\n\n.load {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n  background: #333;\n  opacity: .8;\n  border-radius:.133rem;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.load .van-loading {\n  vertical-align: middle;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%,-50%);\n}\n\n</style>\n"],"sourceRoot":"src\\views"}]}